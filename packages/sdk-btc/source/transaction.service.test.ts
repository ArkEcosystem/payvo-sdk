import "jest-extended";
import { IoC, Services, Signatories } from "@payvo/sdk";
import nock from "nock";
import { createService } from "../test/mocking";
import { TransactionService } from "./transaction.service";
import { BindingType } from "./constants";
import { AddressFactory } from "./address.factory";
import { AddressService } from "./address.service";
import { ClientService } from "./client.service";
import { DataTransferObjects } from "./coin.dtos";
import { UnspentAggregator } from "./unspent-aggregator";
import { ExtendedPublicKeyService } from "./extended-public-key.service";
import { DateTime } from "@payvo/intl";

const mnemonic = "skin fortune security mom coin hurdle click emotion heart brisk exact reason";

let subject: TransactionService;

beforeEach(async () => {
	nock.disableNetConnect();

	subject = createService(TransactionService, "btc.testnet", async (container: IoC.Container) => {
		container.constant(IoC.BindingType.Container, container);
		container.singleton(IoC.BindingType.AddressService, AddressService);
		container.singleton(IoC.BindingType.ClientService, ClientService);
		container.constant(IoC.BindingType.DataTransferObjects, DataTransferObjects);
		container.singleton(IoC.BindingType.DataTransferObjectService, Services.AbstractDataTransferObjectService);
		container.singleton(IoC.BindingType.ExtendedPublicKeyService, ExtendedPublicKeyService);
		container.singleton(BindingType.AddressFactory, AddressFactory);
		container.singleton(BindingType.UnspentAggregator, UnspentAggregator);
	});
});

describe("bip44 wallet", () => {
	beforeAll(() => {
		nock("https://btc-test.payvo.com:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6","mqLZY69ZjogwvFWfLEuGdFUPKeZ6JvyRj1","mwhFCM54gRxY27ynaB7xmmuuGpxATWDzXd","mjTpEuSwBh4KmKMt9pwFViTWQVZzqnWEis","mxdEAqtmiXqqczohNonMbUZP8ntYLPUUF4","miWmLw6bSSqvKDiVpM4SNKuSz5SX9kkMPA","mvRNAXLYUYhxuTdZahnw3mNtyDcxeiSt6y","mirzRVH2z9hyEVDDbv2QAMSaWjPDjFM3Na","mo6XLVZ39Pd3bkSsNjLs6iyz56qF4PYe9g","mtSQ96xauiYzz1xryvLhMNduw57Sie9LSE","mqNKx6o1P74CDDkvMoa2Jq4qcMviKYZFc1","mjr9b55DXcCLEZbqj4Z1JX2GgvZip75ge7","msZGjfGbdNDwhcH4M2UypirvxFeBS1Q8Y6","mo3dcPFguG2PacM5NUfp64k95qUzk8d6UE","n2VAVsBWCESjCaWrdZwJq3aYJr7zLQdEJ8","mytz9GeGaU7QrtGPYh7Pz9f7gihvbHKLum","muKxLoTUeCBL4czS9uaYeoWrWGcc3guyqL","mkkvJiKyYeRPZ8R4ZXv6p3aFBg28asBXZJ","muH9SVf3xvZPTpezLyH8Q6oixq4gNnoz7k","mfvGHJx8C5X7FjVaPvnkX4SLmC8XQ1xYHG","moa7w3BfHA9ENzuzBwCPMjWKWnokUDtc3P","n3rg3cRpwydmzuFF6DB33mDujFZU9xUVhS","my14NrWyUxsAir8sEWVZeDcvGEQVPo9y6m","msedyPEyejVYLWQpSarPL33MPgVzmaFEoN","mkYWa3ndp42DMryDk3R435vFW7he6rAkaN","mpNBsosQ4nvGpGzKYXahmKxtECagWyWHmB","mj4FbCdfjuhnrL47fvXqiGwtb4YA2BNmg7","n2e3aamJ9rijAWNgbhqaEhQz1gkXqVwv3H","mprAVWpzQWXfZQyCL1cXbdS5r1P6PQH7Lx","mgmACAUXLU4Y6UtK6f8FWe5v91ZV9diEYV","mtTirAvBsJnm2sN2yFxc4RbjEPKdPGZPpw","mzix3qtCtrnMPUEyi8WK6tCTjD2p8jSTER","mzLWiJBTaShRjA8aUifDiKPf2QZRk9fc9b","n2rEg9zPanYzxYd7QefY6ts4YyoVmdMUDH","mwqYEM9MreprUT7B74GMvtZoVoTS21ujja","mzmNYJg1o8W8P3dw5LwgpaMZMHBhY8dJ3f","mh6rfmwHMfk7VuBgpvjyxyfYqndvya5FJA","mphDrvh3NZzEhuUjnnfHvmXRyC4vw2rW3E","mn24hyd8P72KQH4Cw2SRwuijV9T3A5K7cZ","n4cVj1UYzqkfyKL6B4Qxwms5YGA3Fg6jzp","moHTPGxDPESt8oxqmPAavpopGUMT5rg3yx","mrwMYe7MoDEjzCSBs7RABHTkvJ1REnBSBz","mwcxFKnUf8QLCXkCAA9kNMUo8PoeE3ZNih","n1ny4eeB6brjVs9vr7hAvVfxPzebx4dXVn","mn4jAxNChyWiQTUWcWD7TkubkWnpvjgBv4","n18mAypHDvxee2E6V6AviKmnZPm1wzFE19","msGcyr9E4cDzxD9EDiPxM29cC8c7QumozJ","mhH5bnYnLJmxN2Z5tHxSeSSkNMahL4EzKs","mqYjXDpCVKMA35dfzdUYBYTQD25AWvVoiG","myvyBt3zC352JR7413McVEvAYuFqkwgqWb","n1i8xa9CRHhMPCV5pddciGpaKdL3tpDu3K","mzuxJDcbgKU6bv3gVXLJ1HdLtAyZXA31zV","mfg6im7pkgQFyuzaQSPt1KBKU9zdZnkqgy","n1ymFJTcCdCZQvrFvCKWJQWpwxVmF7YvLA","mnLovetW93Mdgo2vT5y3wYHUv6BJKgZoxb","msUTXvU96voEAVpz9KQ3fAuwaGd4FQAyrq","mkk64Ch1kKvyXpqRYmWX83yQRsy3eRTTRX","mjw6TdbDdSnfuEenqBAD65AfbsuPSZ5p9Y","mi8F4pRefaGKvVpXJsMbbo4PbBNTtvXmag","mydNPx62PcyYjRrJCS63zf2BH1xHLSXX9u","n3KBoSgDqnBQBeCnKfBjPEdxPHBnZ7xp6h","mnZAdewZ4v8Ppdh7JEEMQJtvLdeRHH1VNn","mg656eh1DVFspD15jkxXxoyi7Kv7fgMdvM","mwWnGEsATbfCS4AV5hFkXWJ2RYCQAqFJGA","mjpkTaJ9DANEdERbYYS9HuUDmgEPYYyBK9","mv9aAsmv6NdvaGoYSkmVUcLpUH9xeziP9G","n2t3VNLRR8a7tGeGiJrUM6e1meTbdw25CZ","mfxMkw5nLm5WioT77twDETR722g9SbnoZt","mzrt4ynLsVUE3osMEkdhpQGqzutQ49CWVA","mwpEVmw1Ng2mnNeiTKrvtwCn6CtN4VD99C","mnMGzAtqhkduba7Nco69Y68Ug1WznBANHY","mt1qyjuY36A6gu9qh35mXMmTEivxysP2Hk","mpJxJHWkiTd8nbPKWtoq8FxYrNeDsfXuyX","mi5td1SkrnPU8pkwkb3d9nWhCJxUzZnBXp","mjRxeSS9P3DHMwmcnkDpdK45T9Zreogd1d","mohFFiM4S5BbwUiLTBmGjNpujaUzd2jav5","mg5a3aAfN5sikYmrSdxJnM6BxG5BxaFybx","ms2PzPBBGF377CnRmN559E2NK4mK82hbYc","msrUFHvQ9TNf55PR5fRKDzK9KbjakL9wLz","mt2cmM2Umo2cSDNZX635pPJTsdJCH31gsp","mnDK5vBXuMh8t6As3YfibqGVqshj9DkGwJ","muM8F7AM7rU7a7uSBs8LS5Qj26NPVzkp7f","mqs6W2ujvSbrGyUXxsybfYxrqyHgSnbKLi","muFyoYmo7wsRzx6bZ5EReRJrQpREFbgBUU","mxyHq29pLa52X4Jghj1KvLs6mhGNDUygBH","n12EFBQ25Wh67KrBTmEjze13PyQxGUdUt5","mzrcunEFvoBPdN4N2KyDi7G4JvpMkWdtCJ","msKrmVTy99orKLdA5fPynmdY7jr2mc3uTN","mfuUcXpTzmxUag9r3hsgn89hoFDBkUCvYV","moohmKrnKUMkzt5jKwFkpUagad6o5NBrd7","mi21bYwhvLL4DSuZhiLKfDLDv7J8xyDhXA","mqzxFciGNGdAtnkyftU2XJ43oesV5V9Q1o","mhJCwNQNe5UiFSU9WnehKF2zQp4qNmhU9V","my1jQfVeHEHfjSWmbrAhQ3a1KuFemg3zvo","mqDxWKmfsGnCKj7gFDbrhQYJdUFtKxbgvL","miN3x4ZecShnV2c5RBDWVaJtiRNpQM9yBB","mwaiuRVexbNkq5n4vn95jonVLnUyCR8D1r","n1Hjmy8aSfi51VeXi9BG7Ku1tePJ6EmWQ5","mvxDAPoF63a1BmNJBmQWHjNXM6LFXtY9mU","my9uRTqts9FStbDzDGyjL4CpkCSwbN69at"]}',
			)
			.reply(
				200,
				'{"data":{"mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6":true,"mqLZY69ZjogwvFWfLEuGdFUPKeZ6JvyRj1":true,"mwhFCM54gRxY27ynaB7xmmuuGpxATWDzXd":true,"mjTpEuSwBh4KmKMt9pwFViTWQVZzqnWEis":false,"mxdEAqtmiXqqczohNonMbUZP8ntYLPUUF4":false,"miWmLw6bSSqvKDiVpM4SNKuSz5SX9kkMPA":false,"mvRNAXLYUYhxuTdZahnw3mNtyDcxeiSt6y":false,"mirzRVH2z9hyEVDDbv2QAMSaWjPDjFM3Na":false,"mo6XLVZ39Pd3bkSsNjLs6iyz56qF4PYe9g":false,"mtSQ96xauiYzz1xryvLhMNduw57Sie9LSE":false,"mqNKx6o1P74CDDkvMoa2Jq4qcMviKYZFc1":false,"mjr9b55DXcCLEZbqj4Z1JX2GgvZip75ge7":false,"msZGjfGbdNDwhcH4M2UypirvxFeBS1Q8Y6":false,"mo3dcPFguG2PacM5NUfp64k95qUzk8d6UE":false,"n2VAVsBWCESjCaWrdZwJq3aYJr7zLQdEJ8":false,"mytz9GeGaU7QrtGPYh7Pz9f7gihvbHKLum":false,"muKxLoTUeCBL4czS9uaYeoWrWGcc3guyqL":false,"mkkvJiKyYeRPZ8R4ZXv6p3aFBg28asBXZJ":false,"muH9SVf3xvZPTpezLyH8Q6oixq4gNnoz7k":false,"mfvGHJx8C5X7FjVaPvnkX4SLmC8XQ1xYHG":false,"moa7w3BfHA9ENzuzBwCPMjWKWnokUDtc3P":false,"n3rg3cRpwydmzuFF6DB33mDujFZU9xUVhS":false,"my14NrWyUxsAir8sEWVZeDcvGEQVPo9y6m":false,"msedyPEyejVYLWQpSarPL33MPgVzmaFEoN":false,"mkYWa3ndp42DMryDk3R435vFW7he6rAkaN":false,"mpNBsosQ4nvGpGzKYXahmKxtECagWyWHmB":false,"mj4FbCdfjuhnrL47fvXqiGwtb4YA2BNmg7":false,"n2e3aamJ9rijAWNgbhqaEhQz1gkXqVwv3H":false,"mprAVWpzQWXfZQyCL1cXbdS5r1P6PQH7Lx":false,"mgmACAUXLU4Y6UtK6f8FWe5v91ZV9diEYV":false,"mtTirAvBsJnm2sN2yFxc4RbjEPKdPGZPpw":false,"mzix3qtCtrnMPUEyi8WK6tCTjD2p8jSTER":false,"mzLWiJBTaShRjA8aUifDiKPf2QZRk9fc9b":false,"n2rEg9zPanYzxYd7QefY6ts4YyoVmdMUDH":false,"mwqYEM9MreprUT7B74GMvtZoVoTS21ujja":false,"mzmNYJg1o8W8P3dw5LwgpaMZMHBhY8dJ3f":false,"mh6rfmwHMfk7VuBgpvjyxyfYqndvya5FJA":false,"mphDrvh3NZzEhuUjnnfHvmXRyC4vw2rW3E":false,"mn24hyd8P72KQH4Cw2SRwuijV9T3A5K7cZ":false,"n4cVj1UYzqkfyKL6B4Qxwms5YGA3Fg6jzp":false,"moHTPGxDPESt8oxqmPAavpopGUMT5rg3yx":false,"mrwMYe7MoDEjzCSBs7RABHTkvJ1REnBSBz":false,"mwcxFKnUf8QLCXkCAA9kNMUo8PoeE3ZNih":false,"n1ny4eeB6brjVs9vr7hAvVfxPzebx4dXVn":false,"mn4jAxNChyWiQTUWcWD7TkubkWnpvjgBv4":false,"n18mAypHDvxee2E6V6AviKmnZPm1wzFE19":false,"msGcyr9E4cDzxD9EDiPxM29cC8c7QumozJ":false,"mhH5bnYnLJmxN2Z5tHxSeSSkNMahL4EzKs":false,"mqYjXDpCVKMA35dfzdUYBYTQD25AWvVoiG":false,"myvyBt3zC352JR7413McVEvAYuFqkwgqWb":false,"n1i8xa9CRHhMPCV5pddciGpaKdL3tpDu3K":false,"mzuxJDcbgKU6bv3gVXLJ1HdLtAyZXA31zV":false,"mfg6im7pkgQFyuzaQSPt1KBKU9zdZnkqgy":false,"n1ymFJTcCdCZQvrFvCKWJQWpwxVmF7YvLA":false,"mnLovetW93Mdgo2vT5y3wYHUv6BJKgZoxb":false,"msUTXvU96voEAVpz9KQ3fAuwaGd4FQAyrq":false,"mkk64Ch1kKvyXpqRYmWX83yQRsy3eRTTRX":false,"mjw6TdbDdSnfuEenqBAD65AfbsuPSZ5p9Y":false,"mi8F4pRefaGKvVpXJsMbbo4PbBNTtvXmag":false,"mydNPx62PcyYjRrJCS63zf2BH1xHLSXX9u":false,"n3KBoSgDqnBQBeCnKfBjPEdxPHBnZ7xp6h":false,"mnZAdewZ4v8Ppdh7JEEMQJtvLdeRHH1VNn":false,"mg656eh1DVFspD15jkxXxoyi7Kv7fgMdvM":false,"mwWnGEsATbfCS4AV5hFkXWJ2RYCQAqFJGA":false,"mjpkTaJ9DANEdERbYYS9HuUDmgEPYYyBK9":false,"mv9aAsmv6NdvaGoYSkmVUcLpUH9xeziP9G":false,"n2t3VNLRR8a7tGeGiJrUM6e1meTbdw25CZ":false,"mfxMkw5nLm5WioT77twDETR722g9SbnoZt":false,"mzrt4ynLsVUE3osMEkdhpQGqzutQ49CWVA":false,"mwpEVmw1Ng2mnNeiTKrvtwCn6CtN4VD99C":false,"mnMGzAtqhkduba7Nco69Y68Ug1WznBANHY":false,"mt1qyjuY36A6gu9qh35mXMmTEivxysP2Hk":false,"mpJxJHWkiTd8nbPKWtoq8FxYrNeDsfXuyX":false,"mi5td1SkrnPU8pkwkb3d9nWhCJxUzZnBXp":false,"mjRxeSS9P3DHMwmcnkDpdK45T9Zreogd1d":false,"mohFFiM4S5BbwUiLTBmGjNpujaUzd2jav5":false,"mg5a3aAfN5sikYmrSdxJnM6BxG5BxaFybx":false,"ms2PzPBBGF377CnRmN559E2NK4mK82hbYc":false,"msrUFHvQ9TNf55PR5fRKDzK9KbjakL9wLz":false,"mt2cmM2Umo2cSDNZX635pPJTsdJCH31gsp":false,"mnDK5vBXuMh8t6As3YfibqGVqshj9DkGwJ":false,"muM8F7AM7rU7a7uSBs8LS5Qj26NPVzkp7f":false,"mqs6W2ujvSbrGyUXxsybfYxrqyHgSnbKLi":false,"muFyoYmo7wsRzx6bZ5EReRJrQpREFbgBUU":false,"mxyHq29pLa52X4Jghj1KvLs6mhGNDUygBH":false,"n12EFBQ25Wh67KrBTmEjze13PyQxGUdUt5":false,"mzrcunEFvoBPdN4N2KyDi7G4JvpMkWdtCJ":false,"msKrmVTy99orKLdA5fPynmdY7jr2mc3uTN":false,"mfuUcXpTzmxUag9r3hsgn89hoFDBkUCvYV":false,"moohmKrnKUMkzt5jKwFkpUagad6o5NBrd7":false,"mi21bYwhvLL4DSuZhiLKfDLDv7J8xyDhXA":false,"mqzxFciGNGdAtnkyftU2XJ43oesV5V9Q1o":false,"mhJCwNQNe5UiFSU9WnehKF2zQp4qNmhU9V":false,"my1jQfVeHEHfjSWmbrAhQ3a1KuFemg3zvo":false,"mqDxWKmfsGnCKj7gFDbrhQYJdUFtKxbgvL":false,"miN3x4ZecShnV2c5RBDWVaJtiRNpQM9yBB":false,"mwaiuRVexbNkq5n4vn95jonVLnUyCR8D1r":false,"n1Hjmy8aSfi51VeXi9BG7Ku1tePJ6EmWQ5":false,"mvxDAPoF63a1BmNJBmQWHjNXM6LFXtY9mU":false,"my9uRTqts9FStbDzDGyjL4CpkCSwbN69at":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["mya5ZRZi3epftGxvMP5trEfkpCFhPzMPqA","ms4Hd6b1a5TkfeWB9GJgNuFFKasfcNJ3tG","mpYRddfkDi6j6PQtMQSdzW5cWcgBAyn13b","mqwqp8LQ9KTW5z5T7Cz6bgKPYZfU295cNV","mmn4RLfCQ212uJ9J4AsCdSBpdv8Zunsv3T","my2fXCjuD171r23HDt6RdXqyTLtgNStode","mpdihF6RNDvvMUgkR6XVd4vk7bNxn1fWQ1","mgisjKNWXEQ4iTaxkqM1S6AzSk41J6GViq","mrq2jg7jZ8RFmb7ghGUNNdug1uPjJQSRjP","mhjGYmXqLWwvdNCQqTDk2u2g2pLgAyz3oY","mzP1TqX7SZQkEL6KUC93sj2HjppkEpQsJS","mmyKqrUdQY5PEnroPf3KoXA5Hz2HheYtj1","mvvoazPwCXW1ZYt9RkzWU5wqhEJYkzFSkR","mmqj1J2pyHTqeoXqYkEzamXXF24bnBepVi","mpLbymsruNuEfMjmpTNbqnXiDiBPRPMXPz","moawaywryMjx3jCMcVj1rvHk8umnQNfu3g","mvSYNLhGPZAzKsD5JGNzrvUFaoy7XvSvk7","mvYszAkFqNni1wp5KKXpzBhHWEr14wa2E6","mmYuY2CKGp8RHWzE4dEA9N9ggn8uNpPsgd","mhi6GknrHLmxmRzGbY1eQEFbrZ2k7os94w","moa77Sg1ojb6fQFRqvG83mBKDoCCCCvMuQ","mmWxZMQCWgNPP9uAHcW17jNZCGCPJ8FkLs","mzSwHhM4fFK2Z2xUr6BjjGcX9fFCk3PeMi","mrdhJHG3r5V8eFAeqa2rtNjExdAHdeAam7","mq2tFwnyYJvzgijDuLujzrBwi5NLn8hdiV","moqLkvAFW8oTWW8kxHBxouC8AHrWtUBkYU","mty52foLTDMj7CkB86cSUKdMtSARRpponG","mnH8hSsYCuYHJdPMoMNM4YshmtYbRff78i","ms6b343mjyoJwZug9JbMh8DyukWkhURY6x","mh3bUc6wzv5F4wCvh72gJ31xJfoiXuaEXx","mgS7aLWDjNDjzmoqCNDbyirFBY1Fs1YSuj","mq6AU4DDw6GXEFGiBK4y1nqK9W4P94HwyZ","mzfPgEseU1zWa8T3XGwyEoFFZE9yuN1hEv","mu4QZGhCa6xWvnMgCfZcpRmodKeiCnPrXM","n17pBjKyYrogPw8NDNVdypbCbt2B4e53AJ","mtKSHEEzm5oLevFdQH5afa5fXX3aDUTq8d","mrfvs5u1un7EHTtyQZLNqFNuCTeFVNhmsu","mvg2868L1hvtSfJubvCLGcFia2p1u66Lpg","mj4Cq6q5ByfoE9ZpvqqQS7Ls6X3yhKGnSF","mtfsBReVptQrBJRM9t6afcqZuYhxT7YTDd","muETqzJv9x9yeiEKu7ELhX3q8B3cnb21kA","msS6VdzDBYepWD6SgMtQmHUz2Zyq2WNiZZ","mtg9uwQHSJmvhYMWouesT3pMUnYmS8DA6c","mfh9EECmpnqdBgrpoZFs7ms98a2rcpLXvt","mheQGcT3SMXovQ47Rwhfupx3AZY9t1V5Cx","mmj54DT6W6Rf6WwVVg21cEbttHg88iy5Nm","mmkH9ecvncNg1JNtpdNyPj21T28AE2WEgs","mpSGyrMqKW5EQeQFXEqnZnUjCnAbzGxs8U","miYwei39kHYxAd1BRgW6hJqGgFMmAFNrUz","mgszb8nLYpVXysfnedgy4SUshcNUfpbvLK","mjnTNFXHcHcHLvbgpMFdtpc7VbTNeHN6bP","mgjjCjtzSYVjyq9hDUhwBidmMJijsShAy9","mpSe2ZvSFFBJmnZzCJ3Xg1Fw8D7rP4XexQ","mr4MZE3Hr8txpx3wsWj72dThFNwMgiiwtM","mmAUqYqCdjUpPRHkXXyrt2UTGCkk9aH5M4","n16UH9euzeJgfVb28gucEZAJJwPaSYwnuv","mwYWbp4uLMg9uQ16uYzuBxWFp5Nuey5DF5","mvTiBsGRhYQc6f6DFVvYTAN3wva9b6iz3k","mzKH7EJr9v215NVDnN1jCfrC6dQCsEf7CZ","mhXoJGLzZGDhY6H7ow5SKGgKvEPiAFt65h","mxJntKV7bQ2Ydb2GiEqFwcS2CCPiqwn5NS","mspNeiE31jptQeG1dWVzsNERbn2BFjkcBJ","mr2dhPGiWVDwbYdz5NYCbsB8f8UKYxP9gc","n12LDfjtXkbrt7ayakm79V3Z2db8TYBnSK","mxsz7M8ryrkcmpjba5Gw1b3zQnybUFQhC7","n45c4uLpTWmJG48QL5G1BXrT8cHGZSSrN2","n1TjZTwyhmTxCaEvqu3FnLZNj2ToJV7htj","mqGLob3vcS9WQQ6dtPo2c1dfhZpyD5gnAR","mk1tqhhCfcgGJD2v3PBfHgCbKvaNryFLwS","muSKNhMDNqgJFWQXrZ6TopcQBskmKL8XzM","n2rErFT26dm95id4cZkeAfbXRoTTfcBuAN","mzBGsABUb6ePNLgkh3GsbajhyZcaNkSN7f","mp8n4qvSKyfbqcfwGFjiRShjFbep21vZGz","moNRsPqShPU2Lu1mLzRCH8AHr1y1p4jeAd","mnkmEBevngZ4RSDNZjxSp9LhzxMmkPpbAS","morD5hKxsbGdQPcv6HHzSJ5CSkDVTm5bA3","n2oVKQV9BWwYH93Xi8SjHzJQNW6PcXj6Fs","mqgJXLHC8jAu3Y6x47zufGx98AVtP4nqJr","mtAEUhUjmzpFsakaVJmPjFVitweGagWu7i","muc8LSTdRwE5AnW6KxiYuEdAKTqLc3E83S","mhGjXfCSu2Trf38r8aE7SvyXJdqRTVm6w7","mjeeFqvxF3Zsz2C9hZtwMUo9Y2kupd2ESj","mydT6MpNAmUpgdrfmbEzS96DQPvNWSog98","mnNmS9xnrn5ZJwALQqsTbxrVjL5gPjE1D9","n32H2h9dqJ15d19yMpE79LoeGVTEHPgDGw","mrSDFk967B9L1KzzudutDjh37DFry66Nhx","mnA7ZTiAz3qKSxLZdPHXh5p1goWvSpQpmn","mhctYwa9SGYdhCNrUWP9ZM2gm7CEyregpW","mheT3L9RCJcQvEazGzLRGbzLCoCbdTPSpg","mnU2B6JSkBBT3oRBL4FGN3xuUx2Uj2UZbB","mkPoZ4sydswBhFw8TnHvYJrwT18ya3E6Kq","mi7ShFCXgfWghYSDEKbKMhXQPrrZoqk3NX","myJLjQB2EKLeTGVoziKLEHCTgy4XiWXBoa","mzH8DNqu1hNSdoyHM5VYRbAQWthWk6ENFe","mkBbBUsZrmZCeeAfmYQn5bPTPmKEH22pQd","mj2nECW7U8ydt9KY32ijxyNHvDhSFYZtWu","mun5PPRKGgdiv3F3uuVnDxWHJgbx6X8u1T","mmZvz6Rxdis4rYH2hE3jEGzaFcA76p4M9v","myHcAK4HGtifqYN3uatN8j6b9txe2UKUsn","mzQRJEFQikWKsfRt1HoiT7U5F5u3ESCuzN"]}',
			)
			.reply(
				200,
				'{"data":{"mya5ZRZi3epftGxvMP5trEfkpCFhPzMPqA":false,"ms4Hd6b1a5TkfeWB9GJgNuFFKasfcNJ3tG":false,"mpYRddfkDi6j6PQtMQSdzW5cWcgBAyn13b":false,"mqwqp8LQ9KTW5z5T7Cz6bgKPYZfU295cNV":false,"mmn4RLfCQ212uJ9J4AsCdSBpdv8Zunsv3T":false,"my2fXCjuD171r23HDt6RdXqyTLtgNStode":false,"mpdihF6RNDvvMUgkR6XVd4vk7bNxn1fWQ1":false,"mgisjKNWXEQ4iTaxkqM1S6AzSk41J6GViq":false,"mrq2jg7jZ8RFmb7ghGUNNdug1uPjJQSRjP":false,"mhjGYmXqLWwvdNCQqTDk2u2g2pLgAyz3oY":false,"mzP1TqX7SZQkEL6KUC93sj2HjppkEpQsJS":false,"mmyKqrUdQY5PEnroPf3KoXA5Hz2HheYtj1":false,"mvvoazPwCXW1ZYt9RkzWU5wqhEJYkzFSkR":false,"mmqj1J2pyHTqeoXqYkEzamXXF24bnBepVi":false,"mpLbymsruNuEfMjmpTNbqnXiDiBPRPMXPz":false,"moawaywryMjx3jCMcVj1rvHk8umnQNfu3g":false,"mvSYNLhGPZAzKsD5JGNzrvUFaoy7XvSvk7":false,"mvYszAkFqNni1wp5KKXpzBhHWEr14wa2E6":false,"mmYuY2CKGp8RHWzE4dEA9N9ggn8uNpPsgd":false,"mhi6GknrHLmxmRzGbY1eQEFbrZ2k7os94w":false,"moa77Sg1ojb6fQFRqvG83mBKDoCCCCvMuQ":false,"mmWxZMQCWgNPP9uAHcW17jNZCGCPJ8FkLs":false,"mzSwHhM4fFK2Z2xUr6BjjGcX9fFCk3PeMi":false,"mrdhJHG3r5V8eFAeqa2rtNjExdAHdeAam7":false,"mq2tFwnyYJvzgijDuLujzrBwi5NLn8hdiV":false,"moqLkvAFW8oTWW8kxHBxouC8AHrWtUBkYU":false,"mty52foLTDMj7CkB86cSUKdMtSARRpponG":false,"mnH8hSsYCuYHJdPMoMNM4YshmtYbRff78i":false,"ms6b343mjyoJwZug9JbMh8DyukWkhURY6x":false,"mh3bUc6wzv5F4wCvh72gJ31xJfoiXuaEXx":false,"mgS7aLWDjNDjzmoqCNDbyirFBY1Fs1YSuj":false,"mq6AU4DDw6GXEFGiBK4y1nqK9W4P94HwyZ":false,"mzfPgEseU1zWa8T3XGwyEoFFZE9yuN1hEv":false,"mu4QZGhCa6xWvnMgCfZcpRmodKeiCnPrXM":false,"n17pBjKyYrogPw8NDNVdypbCbt2B4e53AJ":false,"mtKSHEEzm5oLevFdQH5afa5fXX3aDUTq8d":false,"mrfvs5u1un7EHTtyQZLNqFNuCTeFVNhmsu":false,"mvg2868L1hvtSfJubvCLGcFia2p1u66Lpg":false,"mj4Cq6q5ByfoE9ZpvqqQS7Ls6X3yhKGnSF":false,"mtfsBReVptQrBJRM9t6afcqZuYhxT7YTDd":false,"muETqzJv9x9yeiEKu7ELhX3q8B3cnb21kA":false,"msS6VdzDBYepWD6SgMtQmHUz2Zyq2WNiZZ":false,"mtg9uwQHSJmvhYMWouesT3pMUnYmS8DA6c":false,"mfh9EECmpnqdBgrpoZFs7ms98a2rcpLXvt":false,"mheQGcT3SMXovQ47Rwhfupx3AZY9t1V5Cx":false,"mmj54DT6W6Rf6WwVVg21cEbttHg88iy5Nm":false,"mmkH9ecvncNg1JNtpdNyPj21T28AE2WEgs":false,"mpSGyrMqKW5EQeQFXEqnZnUjCnAbzGxs8U":false,"miYwei39kHYxAd1BRgW6hJqGgFMmAFNrUz":false,"mgszb8nLYpVXysfnedgy4SUshcNUfpbvLK":false,"mjnTNFXHcHcHLvbgpMFdtpc7VbTNeHN6bP":false,"mgjjCjtzSYVjyq9hDUhwBidmMJijsShAy9":false,"mpSe2ZvSFFBJmnZzCJ3Xg1Fw8D7rP4XexQ":false,"mr4MZE3Hr8txpx3wsWj72dThFNwMgiiwtM":false,"mmAUqYqCdjUpPRHkXXyrt2UTGCkk9aH5M4":false,"n16UH9euzeJgfVb28gucEZAJJwPaSYwnuv":false,"mwYWbp4uLMg9uQ16uYzuBxWFp5Nuey5DF5":false,"mvTiBsGRhYQc6f6DFVvYTAN3wva9b6iz3k":false,"mzKH7EJr9v215NVDnN1jCfrC6dQCsEf7CZ":false,"mhXoJGLzZGDhY6H7ow5SKGgKvEPiAFt65h":false,"mxJntKV7bQ2Ydb2GiEqFwcS2CCPiqwn5NS":false,"mspNeiE31jptQeG1dWVzsNERbn2BFjkcBJ":false,"mr2dhPGiWVDwbYdz5NYCbsB8f8UKYxP9gc":false,"n12LDfjtXkbrt7ayakm79V3Z2db8TYBnSK":false,"mxsz7M8ryrkcmpjba5Gw1b3zQnybUFQhC7":false,"n45c4uLpTWmJG48QL5G1BXrT8cHGZSSrN2":false,"n1TjZTwyhmTxCaEvqu3FnLZNj2ToJV7htj":false,"mqGLob3vcS9WQQ6dtPo2c1dfhZpyD5gnAR":false,"mk1tqhhCfcgGJD2v3PBfHgCbKvaNryFLwS":false,"muSKNhMDNqgJFWQXrZ6TopcQBskmKL8XzM":false,"n2rErFT26dm95id4cZkeAfbXRoTTfcBuAN":false,"mzBGsABUb6ePNLgkh3GsbajhyZcaNkSN7f":false,"mp8n4qvSKyfbqcfwGFjiRShjFbep21vZGz":false,"moNRsPqShPU2Lu1mLzRCH8AHr1y1p4jeAd":false,"mnkmEBevngZ4RSDNZjxSp9LhzxMmkPpbAS":false,"morD5hKxsbGdQPcv6HHzSJ5CSkDVTm5bA3":false,"n2oVKQV9BWwYH93Xi8SjHzJQNW6PcXj6Fs":false,"mqgJXLHC8jAu3Y6x47zufGx98AVtP4nqJr":false,"mtAEUhUjmzpFsakaVJmPjFVitweGagWu7i":false,"muc8LSTdRwE5AnW6KxiYuEdAKTqLc3E83S":false,"mhGjXfCSu2Trf38r8aE7SvyXJdqRTVm6w7":false,"mjeeFqvxF3Zsz2C9hZtwMUo9Y2kupd2ESj":false,"mydT6MpNAmUpgdrfmbEzS96DQPvNWSog98":false,"mnNmS9xnrn5ZJwALQqsTbxrVjL5gPjE1D9":false,"n32H2h9dqJ15d19yMpE79LoeGVTEHPgDGw":false,"mrSDFk967B9L1KzzudutDjh37DFry66Nhx":false,"mnA7ZTiAz3qKSxLZdPHXh5p1goWvSpQpmn":false,"mhctYwa9SGYdhCNrUWP9ZM2gm7CEyregpW":false,"mheT3L9RCJcQvEazGzLRGbzLCoCbdTPSpg":false,"mnU2B6JSkBBT3oRBL4FGN3xuUx2Uj2UZbB":false,"mkPoZ4sydswBhFw8TnHvYJrwT18ya3E6Kq":false,"mi7ShFCXgfWghYSDEKbKMhXQPrrZoqk3NX":false,"myJLjQB2EKLeTGVoziKLEHCTgy4XiWXBoa":false,"mzH8DNqu1hNSdoyHM5VYRbAQWthWk6ENFe":false,"mkBbBUsZrmZCeeAfmYQn5bPTPmKEH22pQd":false,"mj2nECW7U8ydt9KY32ijxyNHvDhSFYZtWu":false,"mun5PPRKGgdiv3F3uuVnDxWHJgbx6X8u1T":false,"mmZvz6Rxdis4rYH2hE3jEGzaFcA76p4M9v":false,"myHcAK4HGtifqYN3uatN8j6b9txe2UKUsn":false,"mzQRJEFQikWKsfRt1HoiT7U5F5u3ESCuzN":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6","mqLZY69ZjogwvFWfLEuGdFUPKeZ6JvyRj1","mwhFCM54gRxY27ynaB7xmmuuGpxATWDzXd"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"mqLZY69ZjogwvFWfLEuGdFUPKeZ6JvyRj1","txId":"94336a791ade1aee7a55f0132e1c766e7272b304b805347f34a716cd0b10ebe6","outputIndex":0,"script":"76a9146bba19cd7beb53addb39ab750531668ad409474688ac","satoshis":1000000},{"address":"mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6","txId":"3b182fedfbf8dca089b5ff97004e53081c6610a2eb08dd9bd8c3243a64216649","outputIndex":0,"script":"76a914a08a89d81d7a9be55a18d12f9808dcd572e2cd1c88ac","satoshis":1000000},{"address":"mwhFCM54gRxY27ynaB7xmmuuGpxATWDzXd","txId":"473f473a78f569e93ebd0955d3eb5855c888938106e8f55670c6b75ec1b44d16","outputIndex":0,"script":"76a914b17447e9524445be6572706a3ccfdc9c0e2a8ae788ac","satoshis":1000000}],"links":{"first":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":3,"total":3}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["94336a791ade1aee7a55f0132e1c766e7272b304b805347f34a716cd0b10ebe6","3b182fedfbf8dca089b5ff97004e53081c6610a2eb08dd9bd8c3243a64216649","473f473a78f569e93ebd0955d3eb5855c888938106e8f55670c6b75ec1b44d16"]}',
			)
			.reply(
				200,
				'{"data":{"94336a791ade1aee7a55f0132e1c766e7272b304b805347f34a716cd0b10ebe6":"01000000000101f918cfe92daf57938655190a9c49512ed3c90880de4573698e1ad9d91b86fdd40100000000f0ffffff0340420f00000000001976a9146bba19cd7beb53addb39ab750531668ad409474688ac6002200000000000160014a7ec2786b0b69fde7fa17c91b840010a0a459a1e0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d0247304402202e95518835663a419bb68a20bf87050d60a5f74153344c00a9f4c58059501ae20220379384577ff91409c027db710366fa5bee110b1f3e93e0dd2fe686ca8dc705bd012102d9df366a292c38fee7d741066404cff7a2a7d33d5e065a1d0618b2424e18896400000000","3b182fedfbf8dca089b5ff97004e53081c6610a2eb08dd9bd8c3243a64216649":"010000000001018fd59fca8c155ca700f8dc82c582177464409d7525a7a529495ca1af9ae565ce0100000000f0ffffff0340420f00000000001976a914a08a89d81d7a9be55a18d12f9808dcd572e2cd1c88ac3af124000000000016001426675e52bd5285e36d3d5ab451adb40748c636af0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d024830450221009c9262185b692f625351550fa76030a6d8d48f701c2dd09feb7c48484b85e6c302205f34e1e681ac5aa0f8e4ca7552b187310e37ef7e2376600951ef27141133cb6c012102bc4a237367a011b80c98e4a93fdd056f2d630097b82d455b96b2d441889d6b0b00000000","473f473a78f569e93ebd0955d3eb5855c888938106e8f55670c6b75ec1b44d16":"01000000000101605cf9d712df4533c9a8cbbc023b4bc97921d92ee23c3e450ad380455b8990460100000000f0ffffff0340420f00000000001976a914b17447e9524445be6572706a3ccfdc9c0e2a8ae788ac6cd41f0000000000160014e81b5d8f035a3b950ad72d869be2448b023d23410000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d024730440220148c049f0f9d5c2b6d5b8a3efbe02e5953a414dc078688f55a6ac7a8612ae8800220343527bc59b13724e6878e5d79952a83f53ebfa9aae84a7a6b5342dcae0195d8012103418ce7ab05d74e5b240116672dc1b0c983d534258bbedfd676d212a33554bed500000000"}}',
			);
	});

	it("should generate and sign a transfer transaction", async () => {
		const signatory = new Signatories.Signatory(
			new Signatories.MnemonicSignatory({
				signingKey: mnemonic,
				address: "address",
				publicKey: "publicKey",
				privateKey: "privateKey",
				options: {
					bip44: {
						account: 0,
					},
				},
			}),
		);
		const result = await subject.transfer({
			data: {
				amount: 0.001,
				to: "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn",
			},
			signatory,
		});

		console.log("result", result);
		expect(result.id()).toBe("912ff5cac9d386fad9ad59a7661ed713990a8db12a801b34a3e8de0f27057371");
		expect(result.sender()).toBe("mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6");
		expect(result.recipient()).toBe("tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		expect(result.amount().toNumber()).toBe(100_000);
		expect(result.fee().toNumber()).toBe(12_430);
		expect(result.timestamp()).toBeInstanceOf(DateTime);
	});
});

describe("bip49 wallet", () => {
	beforeAll(() => {
		// nock.recorder.rec();
		nock("https://btc-test.payvo.com:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["2N789HT3aXABch6TqknX2TCekPEUGLMfurn","2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT","2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB","2MvxBq4NpBpBT2ZJhkj4eJXjAWzbo3vsnGR","2N5H3mWaqj7m8NQJaNXGt1myGsN9HZZVvbm","2MsKn6krztaAgssnYAXAUEjpBUB6hUoP4hF","2NAQ4EK2QdhUBSAunsRbgoh4Sd51rcZr1rb","2N4zv2KR93169CLL19XhXqMoyoThqneEGFe","2MwWzNwJLsLATochEcYmujbfmPyZxdXx9iD","2NFKpqkYwkciKeH4BxeUzD7UTHa5PJRcMNE","2NDCrPojzPDn6R7cHrxzmZBWndnxcuXVxiM","2N8nza539HAe6K9coAsZuEpGH6XTVQvvaMh","2Mw9ri9oks7CGkXxnkJseohk5dzmK39pndL","2N6BTWoweaufr7RXHPaPTiyPkrNdcjzeAKC","2MxJJ2CCNrDuZ9sYhAZjHcydeZY6U6nEXTC","2MsxeeHWUevXrCrXwc7tL6GPCmYuSyYZNuP","2NFwTtVpP8TqLRVLeNQ4z2BKD9LvkJGgqTx","2N6rWGYk8HaaezqWhysBZoNpJXkrk2ZBBnz","2MtYXRziznpvRfQVDfEhDTCYacUK1VKTYAR","2N8ST28NsESkkBohTFZhwXvJSTphe7eByUw","2N28utBztNg5XuEkustWDUsS3fQjQynPKxJ","2NCbA9qsyz3afU6DKUDG7pzxM9L5NqXjNzr","2MvyN2nHkpWrRoivaYZaAjJZR8wQPNvUiAE","2N6qNLeNJn7DWKM6ZCcF8GqCuYngifk1KoW","2N2kKdqAvvD5xT95LarwfPYHXLy4Kw7i7mu","2MvT4SX9zJm3H8NeGdEjsiJ5MuSyMqukLKj","2N8LFVMBZ22ZRHVo2qy41EiE3RGLnxk4QNd","2MxwHtHpBgGtC7RrFppwTrcjAthC1EQHj5p","2Msu29MZN2wdtub4Z3YxhS1XbrPBMHyuwsp","2NEjp5T1G6y61H1JPLPRxzx9wKctHhJz93x","2N5gz2yCQJRm4SqmUZcfc67HTjrUo55gHh3","2N3AwQqdPqeQ6MvS7rhSaC2gFvTru41xiK3","2MxrkkkBriArzsvv7DDnxANz8HjYaEXj86i","2N8uaCHXCrBVvp713ryViPfv4S3XxuaCTYK","2NFe4WTqCHgSYLrHwa6EF2rqgEeK4TdP1HU","2N2HC6Gxy85tGWNQsDLrJpDkEFsYtFmte2C","2Mwbt8GFowWm3AoatvhSCaQqNXV4YUkiDqs","2NE4RjenrKzgCNdyn5ePjGYYuViJTQrhdCT","2N5ZVzEfrSomVa2YVtwXz5SR3LpnWz7jSmQ","2NFXwS9S3zEdw4uyuPd4aJrrGgsNUqdBsLp","2MzdNTpW3WCBmZcjX4BV33dZsbLho6We4oT","2MzVNYFRpQnxLZ8AEUeyVuZBDrue9dq2Ukj","2MyCpARHGEr82U8JhFdQJ1rB4pYtWVSLeYR","2NDtXCMwG7btvTJ3iWckxQWD4T8f4K6KNLh","2MyCFvaYjcdKPEGxSGqNNwMtwEDnMEcH56k","2NFo3ZPMYMEe8W1ri7UD5AipdV8YfVGydYB","2N1Bd8YCSrSbHSZsbf5o3V3FrniZDwnQ8gw","2N8Mqj5ncuQGWEqzFp3muozALZVnt2qMbtR","2MtZ5cVKWSPB3PdozB5mjrmA3hXXZzuhSQG","2NDoKKEN54H3Zwwi1WDtLQ1pzC5VzGYSEKT","2MtaDtk6MxnYcLgRk2Tx4DduJxSZMwoi8TP","2MvpLKQqkeEnuU9EzASgd9Yg16AjAPzf8UV","2Mz4VbaTkocnPkUt7CxPRXg9uYd8pSGJS5b","2NAsJp3YXff1Ap77M9yBMuPfQAwe2sTfZzg","2N4GYLo4Zbz6hfgN1zq8GFqTRqEkc4XJ7j9","2NEA6FpdA3p4c5AsXVSwLdTZabQQgpzoWwY","2NAbA1nTMj8ENVs3wTi8QoQseuarXVhMke3","2MwrTMp2LXzCcJwKRvxAa3wdBNu6igdWSjz","2MzdrYY7sGc1gZkZwd6oKX6UExwX6UgVUCV","2MxqZAjk7UHqfgkEpHhkHhWpXHBjF9BQGpa","2MyV6XHikXbJuGvjQFLn8T2mW3s6BnZYALs","2N9xxRKVjXdgGoeu1bpZn6BDBBkH1FY2co9","2N2Y614L73mmGm5VpCCgb9zmbZZTRgvmj4b","2MwEek5fYgMjLh5z4db66bs2odPmhKayiXY","2MtT9XVV7JnMqZPTuRWmTZyKWrsFtxgWo9k","2MwEJWJsRmrQbmuzZpQJ1zrj33CPF9DxDpL","2N8a3JoEGX5LdnNofQPMV8ERKuVXdpuFgJc","2NDHtfxJv3WMp3x6WqDihHkGH2qPGart3wo","2N9zgD6ruwBvx711E1vdUhJwNW21UXdcjCD","2N2UCaSW44EHyxjuxTKghiGSjLaTdq9hM9Y","2N9zAgXDx2edhJBPSsr5BDHuxpjFg23k5m9","2NALsVSqT1x2TtdcGTWckvkwrbRRjdKDUEf","2MwmPqU3ukg8UyrsncEpTK5sLg3GcE7xqse","2NFBMzd7JgdKZKbGBaH6ukD6ngMDULCWBKv","2NDQa1rxk2RJ3ADTa53mhUp9RqeebFxNfAq","2MxWz1b1ALgwZUYDGFZYqXSrTPxSZTTYoQP","2Mwq3agY92JHqyqk8ScHtTdLJ6eYWDwNsaU","2MzZ6rGbSXx28BWdWsEfgxQDyHEhK3FPDbP","2MvJ93MF8q42nLUzep59v6sJRHca5Kz5Qxp","2N1eYd4UzUHmGxpNqhudeB2GaPNQsAvEhVG","2N48CwaTWgrKm8AkCGXHKyhCL1ttQFYtNNw","2Mt9iBT4RafyvC2S1JV2BcSZRmYQjL9e3g6","2MsrLJk9G84TsEJLXYTayPDM3keXJTFWohP","2N9Q8GSUN14qRTwgromn3ddjrUaX7NQFwzg","2NFY3ELk4XoVh6jWLmF647hMjcwyMVnbJMA","2MvVw42sEYGL2YwyYhwDbtdZpdv4ErQnXTH","2N2BLY9qoKVFDsynTdthzACLqZd4PfPbYKt","2N4ETCE7UkrE48pGcpW8P3iWqsoZuvgw7HX","2MstS3Yt5ehcEFxvELNeRhCdR4fRC7JWPmK","2N7ewhV2ZXSwHZuaagMHdSvJjpvaNuQbfQD","2NGJMGNeoocbNhurRw9EdWUqMYghC7EGaQA","2Mz3GJ4eCk4Pzc53STigVKQKiwuRwf6W8CW","2N6y5cWzLfLBBqxxGyMiykN9Ag3tCmy3yNv","2N4jqmC9t3ua1Dq9V6AxLHu4oHfGtT59dUj","2N1nsNGjv7NTR3rix4d8YLvpD3ohSeNFSZG","2N2hrq76A891qLShomZ2JfD6F4GMopj8KpW","2N7pcjatioAmK4PzKHDXcs5n9QN4wzkJedR","2MtrmGAW78kfkzaVfy4fw7tfwi9xmcPJmjh","2N4s867WeGgaQc1CAaTdLpaNjkr4h379Jbd","2MwKvaKjUp8CNP2PhUP2J3CtSvk1SujxWQy"]}',
			)
			.reply(
				200,
				'{"data":{"2N789HT3aXABch6TqknX2TCekPEUGLMfurn":true,"2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT":true,"2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB":true,"2MvxBq4NpBpBT2ZJhkj4eJXjAWzbo3vsnGR":false,"2N5H3mWaqj7m8NQJaNXGt1myGsN9HZZVvbm":false,"2MsKn6krztaAgssnYAXAUEjpBUB6hUoP4hF":false,"2NAQ4EK2QdhUBSAunsRbgoh4Sd51rcZr1rb":false,"2N4zv2KR93169CLL19XhXqMoyoThqneEGFe":false,"2MwWzNwJLsLATochEcYmujbfmPyZxdXx9iD":false,"2NFKpqkYwkciKeH4BxeUzD7UTHa5PJRcMNE":false,"2NDCrPojzPDn6R7cHrxzmZBWndnxcuXVxiM":false,"2N8nza539HAe6K9coAsZuEpGH6XTVQvvaMh":false,"2Mw9ri9oks7CGkXxnkJseohk5dzmK39pndL":false,"2N6BTWoweaufr7RXHPaPTiyPkrNdcjzeAKC":false,"2MxJJ2CCNrDuZ9sYhAZjHcydeZY6U6nEXTC":false,"2MsxeeHWUevXrCrXwc7tL6GPCmYuSyYZNuP":false,"2NFwTtVpP8TqLRVLeNQ4z2BKD9LvkJGgqTx":false,"2N6rWGYk8HaaezqWhysBZoNpJXkrk2ZBBnz":false,"2MtYXRziznpvRfQVDfEhDTCYacUK1VKTYAR":false,"2N8ST28NsESkkBohTFZhwXvJSTphe7eByUw":false,"2N28utBztNg5XuEkustWDUsS3fQjQynPKxJ":false,"2NCbA9qsyz3afU6DKUDG7pzxM9L5NqXjNzr":false,"2MvyN2nHkpWrRoivaYZaAjJZR8wQPNvUiAE":false,"2N6qNLeNJn7DWKM6ZCcF8GqCuYngifk1KoW":false,"2N2kKdqAvvD5xT95LarwfPYHXLy4Kw7i7mu":false,"2MvT4SX9zJm3H8NeGdEjsiJ5MuSyMqukLKj":false,"2N8LFVMBZ22ZRHVo2qy41EiE3RGLnxk4QNd":false,"2MxwHtHpBgGtC7RrFppwTrcjAthC1EQHj5p":false,"2Msu29MZN2wdtub4Z3YxhS1XbrPBMHyuwsp":false,"2NEjp5T1G6y61H1JPLPRxzx9wKctHhJz93x":false,"2N5gz2yCQJRm4SqmUZcfc67HTjrUo55gHh3":false,"2N3AwQqdPqeQ6MvS7rhSaC2gFvTru41xiK3":false,"2MxrkkkBriArzsvv7DDnxANz8HjYaEXj86i":false,"2N8uaCHXCrBVvp713ryViPfv4S3XxuaCTYK":false,"2NFe4WTqCHgSYLrHwa6EF2rqgEeK4TdP1HU":false,"2N2HC6Gxy85tGWNQsDLrJpDkEFsYtFmte2C":false,"2Mwbt8GFowWm3AoatvhSCaQqNXV4YUkiDqs":false,"2NE4RjenrKzgCNdyn5ePjGYYuViJTQrhdCT":false,"2N5ZVzEfrSomVa2YVtwXz5SR3LpnWz7jSmQ":false,"2NFXwS9S3zEdw4uyuPd4aJrrGgsNUqdBsLp":false,"2MzdNTpW3WCBmZcjX4BV33dZsbLho6We4oT":false,"2MzVNYFRpQnxLZ8AEUeyVuZBDrue9dq2Ukj":false,"2MyCpARHGEr82U8JhFdQJ1rB4pYtWVSLeYR":false,"2NDtXCMwG7btvTJ3iWckxQWD4T8f4K6KNLh":false,"2MyCFvaYjcdKPEGxSGqNNwMtwEDnMEcH56k":false,"2NFo3ZPMYMEe8W1ri7UD5AipdV8YfVGydYB":false,"2N1Bd8YCSrSbHSZsbf5o3V3FrniZDwnQ8gw":false,"2N8Mqj5ncuQGWEqzFp3muozALZVnt2qMbtR":false,"2MtZ5cVKWSPB3PdozB5mjrmA3hXXZzuhSQG":false,"2NDoKKEN54H3Zwwi1WDtLQ1pzC5VzGYSEKT":false,"2MtaDtk6MxnYcLgRk2Tx4DduJxSZMwoi8TP":false,"2MvpLKQqkeEnuU9EzASgd9Yg16AjAPzf8UV":false,"2Mz4VbaTkocnPkUt7CxPRXg9uYd8pSGJS5b":false,"2NAsJp3YXff1Ap77M9yBMuPfQAwe2sTfZzg":false,"2N4GYLo4Zbz6hfgN1zq8GFqTRqEkc4XJ7j9":false,"2NEA6FpdA3p4c5AsXVSwLdTZabQQgpzoWwY":false,"2NAbA1nTMj8ENVs3wTi8QoQseuarXVhMke3":false,"2MwrTMp2LXzCcJwKRvxAa3wdBNu6igdWSjz":false,"2MzdrYY7sGc1gZkZwd6oKX6UExwX6UgVUCV":false,"2MxqZAjk7UHqfgkEpHhkHhWpXHBjF9BQGpa":false,"2MyV6XHikXbJuGvjQFLn8T2mW3s6BnZYALs":false,"2N9xxRKVjXdgGoeu1bpZn6BDBBkH1FY2co9":false,"2N2Y614L73mmGm5VpCCgb9zmbZZTRgvmj4b":false,"2MwEek5fYgMjLh5z4db66bs2odPmhKayiXY":false,"2MtT9XVV7JnMqZPTuRWmTZyKWrsFtxgWo9k":false,"2MwEJWJsRmrQbmuzZpQJ1zrj33CPF9DxDpL":false,"2N8a3JoEGX5LdnNofQPMV8ERKuVXdpuFgJc":false,"2NDHtfxJv3WMp3x6WqDihHkGH2qPGart3wo":false,"2N9zgD6ruwBvx711E1vdUhJwNW21UXdcjCD":false,"2N2UCaSW44EHyxjuxTKghiGSjLaTdq9hM9Y":false,"2N9zAgXDx2edhJBPSsr5BDHuxpjFg23k5m9":false,"2NALsVSqT1x2TtdcGTWckvkwrbRRjdKDUEf":false,"2MwmPqU3ukg8UyrsncEpTK5sLg3GcE7xqse":false,"2NFBMzd7JgdKZKbGBaH6ukD6ngMDULCWBKv":false,"2NDQa1rxk2RJ3ADTa53mhUp9RqeebFxNfAq":false,"2MxWz1b1ALgwZUYDGFZYqXSrTPxSZTTYoQP":false,"2Mwq3agY92JHqyqk8ScHtTdLJ6eYWDwNsaU":false,"2MzZ6rGbSXx28BWdWsEfgxQDyHEhK3FPDbP":false,"2MvJ93MF8q42nLUzep59v6sJRHca5Kz5Qxp":false,"2N1eYd4UzUHmGxpNqhudeB2GaPNQsAvEhVG":false,"2N48CwaTWgrKm8AkCGXHKyhCL1ttQFYtNNw":false,"2Mt9iBT4RafyvC2S1JV2BcSZRmYQjL9e3g6":false,"2MsrLJk9G84TsEJLXYTayPDM3keXJTFWohP":false,"2N9Q8GSUN14qRTwgromn3ddjrUaX7NQFwzg":false,"2NFY3ELk4XoVh6jWLmF647hMjcwyMVnbJMA":false,"2MvVw42sEYGL2YwyYhwDbtdZpdv4ErQnXTH":false,"2N2BLY9qoKVFDsynTdthzACLqZd4PfPbYKt":false,"2N4ETCE7UkrE48pGcpW8P3iWqsoZuvgw7HX":false,"2MstS3Yt5ehcEFxvELNeRhCdR4fRC7JWPmK":false,"2N7ewhV2ZXSwHZuaagMHdSvJjpvaNuQbfQD":false,"2NGJMGNeoocbNhurRw9EdWUqMYghC7EGaQA":false,"2Mz3GJ4eCk4Pzc53STigVKQKiwuRwf6W8CW":false,"2N6y5cWzLfLBBqxxGyMiykN9Ag3tCmy3yNv":false,"2N4jqmC9t3ua1Dq9V6AxLHu4oHfGtT59dUj":false,"2N1nsNGjv7NTR3rix4d8YLvpD3ohSeNFSZG":false,"2N2hrq76A891qLShomZ2JfD6F4GMopj8KpW":false,"2N7pcjatioAmK4PzKHDXcs5n9QN4wzkJedR":false,"2MtrmGAW78kfkzaVfy4fw7tfwi9xmcPJmjh":false,"2N4s867WeGgaQc1CAaTdLpaNjkr4h379Jbd":false,"2MwKvaKjUp8CNP2PhUP2J3CtSvk1SujxWQy":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["2NCZ7HVZE86KDFVPURBa7aCYmiDhKPc3Ens","2NBq3Vn72BZyyxutTXsMXZSw7L4KdtMvSgW","2N2LmgL5GkpMxsPsHdKBZwn5z1kdcnTxUJC","2NAHKx4tmvRNTg1xrKdF6zP7mUK3iNejy8j","2MzW7F5mD34y8HNF49moav5NWV7oK8YV74k","2N5q4SwWPKySiES5CFzEkJjC4yfNL9ssdMx","2N58QRKdorCPYFrq89ev2eQEQgxmrWgQSVA","2NCex7e3mX8jEixQtED8Dbrk24zX8SmwQB8","2MxHaUUAMW47VeTYnRURG6MDWR2BWYhzsRp","2Mw7PXB737kvUb2gQZkHPEobsekBc1zJS4J","2MyghR9Pq8JPsn54resXvu7jEtfCKQGYk7q","2N5HsjNhNr9YMeg7mMR1AxkCPtQ1KzUmosA","2NAnshE3gpGAnxiP8hdpSi1BwphPkFFQ2bo","2MzfLizkqBGfm7N8Xav7RmWjZKNMu8MD9Su","2N8MWAYtndoL43EmmRwWyApsrQi8gU24U1f","2N5wY9ktLgXgxSAqVnuBqGx7ieKDZ4WDbM8","2N8VbZChVA9aLFqb3MavbJohhWArYc36QSq","2N9xerR3EjSzdkFZujnvGZ63YJvncwbAhoT","2MurZKzr7oqvkpbby2D275fGpNEYkVZr5F1","2N2tBPEcafrhdQY8wA1FwD36zSVNxvFL7ui","2NEfjAxHZiU3fTCjaH5Fi1cM7Gv5xMRXx75","2MzoEgXFs5bLk98PGZAut9rWoPf5Vyig8f4","2N2RFDg8Gi1ykFAYKTcedPyawPk1MDRpLkg","2NFN8zUKEyiRMUgRB5xdWCffj5mdkuz2BiT","2N8berkJ8CFaYWFETUdCvsoQP5FSgqsh3JV","2N7QrPRT2tA8mmmz7vwit7p8NvQJR15GBwT","2Mzu3nyZmfFZST6fpjwPPiYdUPYsmH25LL3","2Mwg2Ex24RaE3oUqQq1cQWvmSwaXvrn3DYg","2NCNM6FyrUz74gQQehtAJNAMhNhZgiyeTV1","2MzSYKRb1H7PozDXokyKC8oEX62QpurhgTo","2Mv5VQMZzRS7Eg43sehSSTK24WzkGrMkVPD","2N71QdMU5FWFguEA3DkDGGPiGwYYDSRmaCC","2N7pF8uuYV7n2U7XRSvr559Wq5FafFCzjqb","2N5g4Ymod4uT4D7Z5tWA5aAWiFRVosCb6qE","2N8gH2ufS2JgYeJZoo5u6nQkmNV7btWqwrS","2N85gm9yXck7ULnFYPVi5VBgcGDo9G1fiQm","2Mv3GFvVHEpNzc2cCcCcD8sBNDZrG7pUE6V","2N9MuyrpQF568gtjEcE5T96c4cP52V2Jzgb","2N7gEXhoXHuLsCZVp5rczrm2zK1S7V6HHc8","2N5PwikEmQCEJevVm8ac7d18c2f3BbHf8RP","2NBYkKHQDUb43KeR9UPwbPChe5W3u3wcm6y","2N9hurkMm9L5xLyXM6BfsgyuAmtLcaYfPB3","2N8aQZssrGrQpPAt5FN9XvYCQHpdDtHK5P5","2Mv6SnrfXEdbhkyCUJ2zS4mgRSwGLDhEGo3","2MsK6TA9ZPbuzcmWug7T3s1gBnwGu58DFs3","2MwXQCNYbKeiS47AYMGKAqKvfTyowdDLAAr","2N1GySTQwjyLVQxrjyRWd655ATM8Fs1niUa","2N69RLhne4hGy9LPQm1iJENAykM32wHJKRs","2N1WmJpQsWgmfuzGQ2zJAS3tA2Q9PwYrgar","2MyEEXh7e15atpu5bzZvUD1zY7XjcymrzEu","2Mtq6J2mM71MitnxY27jNAmnd2grfjZg5eo","2NBtgZf7FKu4pKxRqoapHrpQ1tRNupgQ9ym","2N5smkejWpBvUNUNScqNZ18MsdW6dDGPPAs","2NFhddTvwbFpPZrkpcMTmXf8cMcszny1AJk","2MuEjytuhTwwyMapvwCN1Cmw395EVrCyzsp","2MxGM3mR1wnzoDVDY7AyXAfGCasrFz5pZMb","2MvBuHNgsv6AkDWJqvN9TtJmSUEALU5SL9P","2N1w26a3DCwUiisn5J2E9gDWaXzsTQd5qgE","2NEEiLV5yCDetR3sfJrTvses6YkawEzuTqQ","2Mw8qSA3fhMdGbj5p62oUMjVwLtTVmb9Rn8","2MxrdgDwDNL2kzpjbkiRtMFxjuRsCU9sSNj","2Mzyg9FLTuyVZBMazJe4EudbW3LRwsr36ea","2MxmfYqh6aCszC9gPMVf9GKsTtxbT3AHzvb","2MzKT1UurBuMzxeGLZM8bgRF7vRvgFeWhEq","2MxzJdkUe4cBctTagugkQUe5qfoFQwvWHSj","2N2ng3BXbFvbqBLHy5V5jJGouEYFEM3Dd7D","2N9m2ABhSz6dvNrweigZqfJ2AxiqhavShBk","2NFXpB7aXHngWt9A6HcjgAnZZpQvdnRPBMy","2NB7Gg8QK8gLoZE5D4qtCPKVmZHzQEnj3MQ","2NB9BAJ3g51ANyH15WLHEQ8gHJoizagPC39","2N3dcpqM1atb9m9Vj2Gkk29ir6uGbEHFqTn","2N5nPH2zs5aGADSiLR2DDpD6NQFQZmbKrqT","2MsUrHe17VtL3BwQys2rfwKyJTAybwfkoF9","2Mvp5tSD3DqA4FfihRBA7UitzK26no7w68M","2N8EH8zTBwox5xqLDLJZmVDqb1776yPucvZ","2NAsfM2WLozSLWx2nbvWKxPZeA1VXJ9Lamj","2NEG8BcW1CdXLQSM362uCJzRY4UstW813Dk","2N3mMiZ5zSaCEvFCTH46isTUG6FtNv1y8k1","2NFQEaCzb6PdSnZu15oFy4Wa3HZH1fPu6FT","2N1UnjtqaAiJxQ8BshwdNEzDZHc8NguUj2k","2N45keLAoxpNj29oZG9GpZ3mwMHNbw2rAyc","2MwRnQ5h32sTaE2NUuXbhGnrGbGuFa1vHy5","2N71ytX1P56qYi7hCPomfXSCYxPr82GfMn9","2NA8kBXTZ63vvmRV45hiec3J6obXE4MQWYL","2MwcKJLiDPMaxJxvwpezNFWJ2aw5cjATDus","2NDnpvdvsx9k1FxZpYU5dk6QTfpiLVJLSzG","2NEtYiZFfNGKQtpKkDA23uDpjR7B73CEVbj","2N5ERfxJHFF1SNZ56vmbzw2Ldspwm3KMKK9","2NDWFm9vtRehHmXhFaMcqrMvkdoUAhQwpbB","2N2thCcBvLEyVa7N8dsR3xXW9xMPqmfKAjx","2NA2uCpKkSYuC9ycSFc7uNmDio3fMh9DsSK","2N8u1PX9S5FimoeCEvQgFdtEEV2kRFamdJi","2NATtNcURPuzFvxxfkPsezmVYFWVa5osNDz","2N68EGCSvTwZs2zMRTde5oAoVWaF5RkaF5T","2MzCafgec6eV9hDNkaMsuGtD1FfbMBbAL2x","2N7PoLSqzCCZmkq7Cj7H2gc94XZMxth9kch","2N1h3cfRVB2aChb6wvtjN8n4KijZnm2YcgZ","2N4kcChZsHza4nzthTG77K5t9VChyAobwAq","2NFeeaekausEiUVvTuntts5HfrjzSgCzDbJ","2NDwnfXLLAk1GLpzCbcHE6novqySTAxHbgu"]}',
			)
			.reply(
				200,
				'{"data":{"2NCZ7HVZE86KDFVPURBa7aCYmiDhKPc3Ens":false,"2NBq3Vn72BZyyxutTXsMXZSw7L4KdtMvSgW":false,"2N2LmgL5GkpMxsPsHdKBZwn5z1kdcnTxUJC":false,"2NAHKx4tmvRNTg1xrKdF6zP7mUK3iNejy8j":false,"2MzW7F5mD34y8HNF49moav5NWV7oK8YV74k":false,"2N5q4SwWPKySiES5CFzEkJjC4yfNL9ssdMx":false,"2N58QRKdorCPYFrq89ev2eQEQgxmrWgQSVA":false,"2NCex7e3mX8jEixQtED8Dbrk24zX8SmwQB8":false,"2MxHaUUAMW47VeTYnRURG6MDWR2BWYhzsRp":false,"2Mw7PXB737kvUb2gQZkHPEobsekBc1zJS4J":false,"2MyghR9Pq8JPsn54resXvu7jEtfCKQGYk7q":false,"2N5HsjNhNr9YMeg7mMR1AxkCPtQ1KzUmosA":false,"2NAnshE3gpGAnxiP8hdpSi1BwphPkFFQ2bo":false,"2MzfLizkqBGfm7N8Xav7RmWjZKNMu8MD9Su":false,"2N8MWAYtndoL43EmmRwWyApsrQi8gU24U1f":false,"2N5wY9ktLgXgxSAqVnuBqGx7ieKDZ4WDbM8":false,"2N8VbZChVA9aLFqb3MavbJohhWArYc36QSq":false,"2N9xerR3EjSzdkFZujnvGZ63YJvncwbAhoT":false,"2MurZKzr7oqvkpbby2D275fGpNEYkVZr5F1":false,"2N2tBPEcafrhdQY8wA1FwD36zSVNxvFL7ui":false,"2NEfjAxHZiU3fTCjaH5Fi1cM7Gv5xMRXx75":false,"2MzoEgXFs5bLk98PGZAut9rWoPf5Vyig8f4":false,"2N2RFDg8Gi1ykFAYKTcedPyawPk1MDRpLkg":false,"2NFN8zUKEyiRMUgRB5xdWCffj5mdkuz2BiT":false,"2N8berkJ8CFaYWFETUdCvsoQP5FSgqsh3JV":false,"2N7QrPRT2tA8mmmz7vwit7p8NvQJR15GBwT":false,"2Mzu3nyZmfFZST6fpjwPPiYdUPYsmH25LL3":false,"2Mwg2Ex24RaE3oUqQq1cQWvmSwaXvrn3DYg":false,"2NCNM6FyrUz74gQQehtAJNAMhNhZgiyeTV1":false,"2MzSYKRb1H7PozDXokyKC8oEX62QpurhgTo":false,"2Mv5VQMZzRS7Eg43sehSSTK24WzkGrMkVPD":false,"2N71QdMU5FWFguEA3DkDGGPiGwYYDSRmaCC":false,"2N7pF8uuYV7n2U7XRSvr559Wq5FafFCzjqb":false,"2N5g4Ymod4uT4D7Z5tWA5aAWiFRVosCb6qE":false,"2N8gH2ufS2JgYeJZoo5u6nQkmNV7btWqwrS":false,"2N85gm9yXck7ULnFYPVi5VBgcGDo9G1fiQm":false,"2Mv3GFvVHEpNzc2cCcCcD8sBNDZrG7pUE6V":false,"2N9MuyrpQF568gtjEcE5T96c4cP52V2Jzgb":false,"2N7gEXhoXHuLsCZVp5rczrm2zK1S7V6HHc8":false,"2N5PwikEmQCEJevVm8ac7d18c2f3BbHf8RP":false,"2NBYkKHQDUb43KeR9UPwbPChe5W3u3wcm6y":false,"2N9hurkMm9L5xLyXM6BfsgyuAmtLcaYfPB3":false,"2N8aQZssrGrQpPAt5FN9XvYCQHpdDtHK5P5":false,"2Mv6SnrfXEdbhkyCUJ2zS4mgRSwGLDhEGo3":false,"2MsK6TA9ZPbuzcmWug7T3s1gBnwGu58DFs3":false,"2MwXQCNYbKeiS47AYMGKAqKvfTyowdDLAAr":false,"2N1GySTQwjyLVQxrjyRWd655ATM8Fs1niUa":false,"2N69RLhne4hGy9LPQm1iJENAykM32wHJKRs":false,"2N1WmJpQsWgmfuzGQ2zJAS3tA2Q9PwYrgar":false,"2MyEEXh7e15atpu5bzZvUD1zY7XjcymrzEu":false,"2Mtq6J2mM71MitnxY27jNAmnd2grfjZg5eo":false,"2NBtgZf7FKu4pKxRqoapHrpQ1tRNupgQ9ym":false,"2N5smkejWpBvUNUNScqNZ18MsdW6dDGPPAs":false,"2NFhddTvwbFpPZrkpcMTmXf8cMcszny1AJk":false,"2MuEjytuhTwwyMapvwCN1Cmw395EVrCyzsp":false,"2MxGM3mR1wnzoDVDY7AyXAfGCasrFz5pZMb":false,"2MvBuHNgsv6AkDWJqvN9TtJmSUEALU5SL9P":false,"2N1w26a3DCwUiisn5J2E9gDWaXzsTQd5qgE":false,"2NEEiLV5yCDetR3sfJrTvses6YkawEzuTqQ":false,"2Mw8qSA3fhMdGbj5p62oUMjVwLtTVmb9Rn8":false,"2MxrdgDwDNL2kzpjbkiRtMFxjuRsCU9sSNj":false,"2Mzyg9FLTuyVZBMazJe4EudbW3LRwsr36ea":false,"2MxmfYqh6aCszC9gPMVf9GKsTtxbT3AHzvb":false,"2MzKT1UurBuMzxeGLZM8bgRF7vRvgFeWhEq":false,"2MxzJdkUe4cBctTagugkQUe5qfoFQwvWHSj":false,"2N2ng3BXbFvbqBLHy5V5jJGouEYFEM3Dd7D":false,"2N9m2ABhSz6dvNrweigZqfJ2AxiqhavShBk":false,"2NFXpB7aXHngWt9A6HcjgAnZZpQvdnRPBMy":false,"2NB7Gg8QK8gLoZE5D4qtCPKVmZHzQEnj3MQ":false,"2NB9BAJ3g51ANyH15WLHEQ8gHJoizagPC39":false,"2N3dcpqM1atb9m9Vj2Gkk29ir6uGbEHFqTn":false,"2N5nPH2zs5aGADSiLR2DDpD6NQFQZmbKrqT":false,"2MsUrHe17VtL3BwQys2rfwKyJTAybwfkoF9":false,"2Mvp5tSD3DqA4FfihRBA7UitzK26no7w68M":false,"2N8EH8zTBwox5xqLDLJZmVDqb1776yPucvZ":false,"2NAsfM2WLozSLWx2nbvWKxPZeA1VXJ9Lamj":false,"2NEG8BcW1CdXLQSM362uCJzRY4UstW813Dk":false,"2N3mMiZ5zSaCEvFCTH46isTUG6FtNv1y8k1":false,"2NFQEaCzb6PdSnZu15oFy4Wa3HZH1fPu6FT":false,"2N1UnjtqaAiJxQ8BshwdNEzDZHc8NguUj2k":false,"2N45keLAoxpNj29oZG9GpZ3mwMHNbw2rAyc":false,"2MwRnQ5h32sTaE2NUuXbhGnrGbGuFa1vHy5":false,"2N71ytX1P56qYi7hCPomfXSCYxPr82GfMn9":false,"2NA8kBXTZ63vvmRV45hiec3J6obXE4MQWYL":false,"2MwcKJLiDPMaxJxvwpezNFWJ2aw5cjATDus":false,"2NDnpvdvsx9k1FxZpYU5dk6QTfpiLVJLSzG":false,"2NEtYiZFfNGKQtpKkDA23uDpjR7B73CEVbj":false,"2N5ERfxJHFF1SNZ56vmbzw2Ldspwm3KMKK9":false,"2NDWFm9vtRehHmXhFaMcqrMvkdoUAhQwpbB":false,"2N2thCcBvLEyVa7N8dsR3xXW9xMPqmfKAjx":false,"2NA2uCpKkSYuC9ycSFc7uNmDio3fMh9DsSK":false,"2N8u1PX9S5FimoeCEvQgFdtEEV2kRFamdJi":false,"2NATtNcURPuzFvxxfkPsezmVYFWVa5osNDz":false,"2N68EGCSvTwZs2zMRTde5oAoVWaF5RkaF5T":false,"2MzCafgec6eV9hDNkaMsuGtD1FfbMBbAL2x":false,"2N7PoLSqzCCZmkq7Cj7H2gc94XZMxth9kch":false,"2N1h3cfRVB2aChb6wvtjN8n4KijZnm2YcgZ":false,"2N4kcChZsHza4nzthTG77K5t9VChyAobwAq":false,"2NFeeaekausEiUVvTuntts5HfrjzSgCzDbJ":false,"2NDwnfXLLAk1GLpzCbcHE6novqySTAxHbgu":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["2N789HT3aXABch6TqknX2TCekPEUGLMfurn","2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT","2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB","txId":"a83039456f422ffc901e5d90315092fc12ff2f29b9be5c0b82c053b80c3ef2aa","outputIndex":0,"script":"a914423b8c503dfb7307e75c8c11705e34e8fd95301b87","satoshis":1000000},{"address":"2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT","txId":"14bb019ede5cb6905dd66dbc439a4e2c3efd3db074b917a1ed49c3c8fcdea4b7","outputIndex":0,"script":"a914902416b2e65a859146788006b9ade2907d13d52187","satoshis":1000000},{"address":"2N789HT3aXABch6TqknX2TCekPEUGLMfurn","txId":"bca46b2625258e4f9e3c4c6efcbe0ec352be31cc0bb3ab2132323fa1ff686744","outputIndex":0,"script":"a914983aec29890d89c391f99a680e577a6449c6bc1287","satoshis":1000000}],"links":{"first":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":3,"total":3}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["a83039456f422ffc901e5d90315092fc12ff2f29b9be5c0b82c053b80c3ef2aa","14bb019ede5cb6905dd66dbc439a4e2c3efd3db074b917a1ed49c3c8fcdea4b7","bca46b2625258e4f9e3c4c6efcbe0ec352be31cc0bb3ab2132323fa1ff686744"]}',
			)
			.reply(
				200,
				'{"data":{"a83039456f422ffc901e5d90315092fc12ff2f29b9be5c0b82c053b80c3ef2aa":"01000000000101cca6aa63103c12b5ff497f09bd26ab961f47eb3f4915f6fc642a66331bda7b9f0100000000f0ffffff0340420f000000000017a914423b8c503dfb7307e75c8c11705e34e8fd95301b8783362000000000001600149d53915415905ad17559c38dbd2bc3249daebff40000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100aada0a8285081c24d2b0baa29a72c5b5459fc0541fe67da026dd1487345e10cf0220284cb85fbc9b428fc67857ffa5516a611dc2a28ad5eb2ebdbdf2ac995fbcbb8f01210312ad7bb0a18773e9ee7f0564ed1d0bb3972c93859af8c3a0a85d641bde8c617300000000","14bb019ede5cb6905dd66dbc439a4e2c3efd3db074b917a1ed49c3c8fcdea4b7":"01000000000101c4b7d50951c0b86aad444b16b29614a0f670f4ce668a6e8f3350f7430bf2040d0100000000f0ffffff0340420f000000000017a914902416b2e65a859146788006b9ade2907d13d521876976210000000000160014c96573cf0ce7bbc4ca6ed3cc18473e518fb064cb0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100d694c4c6cf8e0fe2c5167e1afe678c5cd6bd21523c9eac60fc1e142fd6ad4339022060ec6b22a3e63c2e304573fee65d442cf4bc54b3928a2b6478590652dd93b30401210273517c2fe055a0599a675b944648f3f374fb00671aafbddab44167e4160c6e2f00000000","bca46b2625258e4f9e3c4c6efcbe0ec352be31cc0bb3ab2132323fa1ff686744":"010000000001010b9e58235a6e17f8477fe8f5997562437f9ac5b9373a3e002af6ad34d5e4fa440100000000f0ffffff0340420f000000000017a914983aec29890d89c391f99a680e577a6449c6bc128757ee240000000000160014e000c454f7d2063d607ea6c7d26468014412a4bf0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100be12416e311ff604503520218e9bdffe88e7e34d7e12d1613fb4eb66bc3bc69302201aeb426d81dfe64b61a126ffd9821aa58f532968e1e5033301de9c947241240f012103374079bc604a31173d21ae2b7b8a694d07293ea66e0c2a8863aad83a9c420dcb00000000"}}',
			);
	});

	it("should generate and sign a transfer transaction", async () => {
		// nock.recorder.rec();
		const signatory = new Signatories.Signatory(
			new Signatories.MnemonicSignatory({
				signingKey: mnemonic,
				address: "address",
				publicKey: "publicKey",
				privateKey: "privateKey",
				options: {
					bip49: {
						account: 0,
					},
				},
			}),
		);

		const result = await subject.transfer({
			data: {
				amount: 0.001,
				to: "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn",
			},
			signatory,
		});

		console.log("result", result);
		expect(result.id()).toBe("912ff5cac9d386fad9ad59a7661ed713990a8db12a801b34a3e8de0f27057371");
		expect(result.sender()).toBe("mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6");
		expect(result.recipient()).toBe("tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		expect(result.amount().toNumber()).toBe(100_000);
		expect(result.fee().toNumber()).toBe(12_430);
		expect(result.timestamp()).toBeInstanceOf(DateTime);
	});
});
