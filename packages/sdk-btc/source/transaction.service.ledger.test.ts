import "jest-extended";
import { IoC, Services, Signatories } from "@payvo/sdk";
import { DateTime } from "@payvo/intl";
import nock from "nock";
import { createService } from "../test/mocking";
import { TransactionService } from "./transaction.service";
import { BindingType } from "./constants";
import { AddressFactory } from "./address.factory";
import { AddressService } from "./address.service";
import { ClientService } from "./client.service";
import { DataTransferObjects } from "./coin.dtos";
import { ExtendedPublicKeyService } from "./extended-public-key.service";
import { FeeService } from "./fee.service";
import { LedgerService } from "./ledger.service";
import TransportNodeHid from "@ledgerhq/hw-transport-node-hid-singleton";
import { createTransportRecorder, openTransportReplayer, RecordStore } from "@ledgerhq/hw-transport-mocker";
import logger from "@ledgerhq/logs";
import { jest } from "@jest/globals";
import { ledger } from "../test/fixtures/ledger";

class TransportWrapper {
	readonly #record;

	constructor(record: string) {
		this.#record = record;
	}

	public create() {
		return openTransportReplayer(RecordStore.fromString(this.#record));

		// @ts-ignore
		return TransportNodeHid.default;
	}
}

beforeEach(async () => {
	nock.disableNetConnect();
	logger.listen((log) => console.info(log.type + ": " + log.message));
});

const configureMock = (record: string): TransactionService =>
	createService(TransactionService, "btc.testnet", async (container: IoC.Container) => {
		container.constant(IoC.BindingType.Container, container);
		container.singleton(IoC.BindingType.AddressService, AddressService);
		container.singleton(IoC.BindingType.ClientService, ClientService);
		container.constant(IoC.BindingType.DataTransferObjects, DataTransferObjects);
		container.singleton(IoC.BindingType.DataTransferObjectService, Services.AbstractDataTransferObjectService);
		container.singleton(IoC.BindingType.ExtendedPublicKeyService, ExtendedPublicKeyService);
		container.singleton(IoC.BindingType.FeeService, FeeService);
		container.singleton(IoC.BindingType.LedgerService, LedgerService);
		container.singleton(BindingType.AddressFactory, AddressFactory);

		// @ts-ignore Uncomment for using real device
		// container.constant(BindingType.LedgerTransport, TransportNodeHid.default);

		container.constant(BindingType.LedgerTransport, new TransportWrapper(record));
	});

jest.setTimeout(30_000);

describe("bip44 wallet", () => {
	beforeAll(() => {
		nock("https://btc-test.payvo.com:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["n3LhrsyE8g1Ga2XPGuXfRkaPcipevENLre","n1ii1xkSqM5zTyY4h5zpAnPi86csRbA5ar","mkEU1tHycuDj2XPcRMBWZHrBvHJXwkcBNR","my6MACmsGA3MXq73KJwnZwcNYwAYNXGGaM","mvY8me8vYkKUz8Qn3pFhionqYWDZeiC1hC","ms9QjBPWq7atAGtp4HrFRUhcuNU2QHj58z","mtkq8N81uLbazEszNZSij7ago4k6KkfjKk","mjZij3tVEKKFdyGcUTTkAVDR7jGhUfxEf7","mhub5yjwn8aktqw2C1hipdYNW83njAgymv","mjP4YPUBZZW6GaXJJ36W8gfTfxMCfuTvbP","n2khkbRh2pc8srDNeqM8uEy3n9APaL8KgV","mtBkrgNXdCX7gBVAugdtNqSq8L56EVV7Uw","mi5VbkBz7tjfg7AQ2oxxQWj78LDBzhrb3d","mhbNtdzhrxRLAuajTLYCzaec3DE79GLjwh","mhuacfeCHWSVweiu6KwDVrTGhsrnCQfTgz","mtbT1i9DnWaUMiWxUvSR42Ve56KbReKcgg","mowcx8DHsDBuhKSQ9XBpML9nZSSB2SyJDc","n2FJRGVUvWEk4rUzfJWkki5jqSg5bBwc98","n1nSwLjZ54S6k58KBwjdNDuqs1mZSCXx3z","moGqYcYarUUiLntbqEL3BBkq4XPuGBoVqN","muqrmFmmdHbbBsEqJMtL6RQm4RHPUYnFk2","mywJckScMZgPMhFmqfxGh7kDAV5cXqjX3r","mxujfFr43vVyNxLabh2F7CdFR9NAEVmUKa","muQRbM43NH5LSigqDDE1z96ygLadhUqAkS","myboc96HfByRuWpXcgvkCBaB9UUyJ9jXKK","mq5wovr1wwJpbCQHZ5T5CyftGCwze1DQDu","mktyYXvra2sribiZcBaTHxgyWqw2Jox3h9","mtJ5uCjqQ9Wi3tji6LXUyt8JhUetoYRumF","muDxFcQ4zhMKb4Zi6hYsVhkRNNZeG1CXtb","n4JzHYrRWJ4neKUs8aA3fhrdNstuzGdGRi","mpwKChjheNta7f2nfMrZtCsFVvTqnX4wu2","mvfYphsn7xAdrf8xAYDSskD5HYGe6BV8F5","mjf2x3fNeB65egmWgMhN4Uk9kCZRF6zSYF","mhC13KUAAi3M837GNu3CtmwaERKskLofS3","mpY4L4WHtXw7KSiZ6PDhZyTF5AhXK2F17X","mgUL2JxfUxtQ4yfMREqCUJDsv71SL3qav9","mz84bNXV2QHVAo82DFVzaymAWsNBn4oxXJ","mod4Whkw4T8P28ezhzmzLAqGCQTu8GXdg5","n3YrL12NVPcQdaeqxHzuNVqRGVAs8qHGfF","miEwLKjCjCLau1nNVQAsHQGjBuYgSK69dg","n42v5BSFfGZKEKDuU59yrur9eKSzg4F6QL","ms2WTyyd3QfrzouWcpmQ8LdhvwLchNogZc","mk5seBWzKpvkZayKcMmLnvfnJHH8ur4HeA","mip1uqSjVnrdNpgSxttgVdFgYRxwYNKcZP","n45q6F5LxC6VBUxdf6nuvp9ZwLGmBvSkfa","n4ZvH3QJ5b2b1yCqLCwuf2zpgtrUX1sGs2","n3rKjHbcp538Jr8n1V3PAZCbDQQyanuePZ","mr9gtRy2VAS78GejUiKgf4myszNPBHoLpV","muxcpyEWrtgAj96nQ9mUbuzQQb9ixDcFZS","mvSgDudA3dJZqA9VdXNv9rSaDBbii12odf","miUCCMdHSUMuqLakeJFnQNubCZiqtagT9V","myBsAAr9mNe1o13qXTA9RQRxVLbE1Cp96i","mt4BQPwHK9qYVyh6sE5Aq6Xm9YFyYSYTw8","mgYbtjCrroxWMbqXXQBos6dNNXfLMoG5ht","n1GtvUHv9mTU5MLcpDDydU4VwQcnvup3uB","mjaG5QmGTSkSXUCsfsRcG2CgERRFFQEfbb","myeyiLHwvy7GsTtHh6VFrRskMeZdqncSro","mx9RRciYgtqTR17CtmB8sZCuwdUesxU8X9","mxx8rKmbVh5bTmQJcip4XzZd3QSkqW44m9","mrWLJUo6HzfYQPXxMbba1Mh81FJ1jThwBV","mtgZJuqhnmzKq2Pqppyo7Bs5KXUBck9BQa","n4ZfnxeQBifbXP5VeoaDQ31eJ2YEePrAD3","mqsQmYqAttASHDRTSNtKvYt1JT95hr69hD","moHvYxq4UKhQ6rJGs3ggF6HjDC3Kt9RSd5","monmjReChadcQ28CsS2dT7cFt2voQrYDqv","mjorkR7WmVTEBprGY9pTCS7cbsSSHb48tq","msB8hgRB375MBJTL4zR89Bn2r1zYmHzVqo","mrzG17RdB7S2rWhVgaTMnmHzwpyLnrB7eE","mrvZPbrtuVtiu2JVFSPHAUeYPUrZVS3yrU","mpcNCGkruWiTCwJ9hTFHej65eEKHjYcUeQ","mjn917wD8SCTUYZekKajRRp9HP4MQL9SwK","mscG2nzgEuWyNU1f3HiWENydwPxMA5A57c","mmk4XeVpZSwJULzAEnA2hHV1eyE43QTNWb","myeA86s9hjuoNc562RqMrTQMbGKXYjW6jQ","mxovJt8LqTX1Q9t6CWy66sF5uzFJQWfhSE","mtHCRA5DQgr4d9pF3J9fPAL95cNurdRDPw","mummhXKqdB8MdS6c73MbBUb7jgPLqveXPo","mymahUdZ3LE6R926ocPjy71VcbkdFLnmtw","mr3WpZkETAM3ynUwP44sDPxjZ8X9FL5ihg","myi466NcvUwEgGiNzYeQyScNqhsNDU4JdZ","mtMQ8mWhcbrKL78yYdkGcHuU9TfCwGtDk7","mj5LmdsePJ4mbaKVSE37dof1GXeLpgrEc1","mxPtTaKJFdxDHHxqKzVZTf73CKgjcJtzAG","mjk1vbP9jzMfGc85CfTbAjxefFBwnRieo3","myR9FJitM5eDYzQvDnGXPXD7LFoXw91oAZ","n4q8fhk38s2rBfS2ZeAAiC3dfMP7X4p7F1","mpiVHCT9Fe6TCh5ZU862tpK6JhdBWoQkRs","mfsK8DnY6Px6NpxqUiCaAHHyMpaYPv67Gk","mpiQLtGkhRUQmo6kHQseAoqdq9WANgvpSJ","mx4cZn3XPRjejzC119buMKYjuRN85Vb5um","mz9VT4zPiH8vBAgKZn7Gf9VnRQstfEcnrX","miaYjb1WetR2MZK5r3zrFxRS8BA6pvrBkU","mtNHUh4G5EBe5KuWtwRsSZSnHQjiRDtMYE","mhGt72NEBz6GY5F7AqgiN1ZHu1mh3jTnU6","n4YN28XhZ9heUDWZ2tTGHmgqSW8mDVsoSr","n1cSBqiuLWygTK29maXmoPp45viXgzpXr8","mnq5grJzMVXehaMRn61Xwt7u5seqnmXcx8","mhoszJwb7jduLfgg18AKMrMBsLBq9WTpzG","mzi3gBmmhe9u8vzrabG2zyw9RYvidsvhsZ","mvzPPyHreLKmcMkm3rt24CDRiv2RfV2mJ9"]}',
			)
			.reply(
				200,
				'{"data":{"n3LhrsyE8g1Ga2XPGuXfRkaPcipevENLre":false,"n1ii1xkSqM5zTyY4h5zpAnPi86csRbA5ar":false,"mkEU1tHycuDj2XPcRMBWZHrBvHJXwkcBNR":false,"my6MACmsGA3MXq73KJwnZwcNYwAYNXGGaM":false,"mvY8me8vYkKUz8Qn3pFhionqYWDZeiC1hC":false,"ms9QjBPWq7atAGtp4HrFRUhcuNU2QHj58z":false,"mtkq8N81uLbazEszNZSij7ago4k6KkfjKk":false,"mjZij3tVEKKFdyGcUTTkAVDR7jGhUfxEf7":false,"mhub5yjwn8aktqw2C1hipdYNW83njAgymv":false,"mjP4YPUBZZW6GaXJJ36W8gfTfxMCfuTvbP":false,"n2khkbRh2pc8srDNeqM8uEy3n9APaL8KgV":false,"mtBkrgNXdCX7gBVAugdtNqSq8L56EVV7Uw":false,"mi5VbkBz7tjfg7AQ2oxxQWj78LDBzhrb3d":false,"mhbNtdzhrxRLAuajTLYCzaec3DE79GLjwh":false,"mhuacfeCHWSVweiu6KwDVrTGhsrnCQfTgz":false,"mtbT1i9DnWaUMiWxUvSR42Ve56KbReKcgg":false,"mowcx8DHsDBuhKSQ9XBpML9nZSSB2SyJDc":false,"n2FJRGVUvWEk4rUzfJWkki5jqSg5bBwc98":false,"n1nSwLjZ54S6k58KBwjdNDuqs1mZSCXx3z":false,"moGqYcYarUUiLntbqEL3BBkq4XPuGBoVqN":false,"muqrmFmmdHbbBsEqJMtL6RQm4RHPUYnFk2":false,"mywJckScMZgPMhFmqfxGh7kDAV5cXqjX3r":false,"mxujfFr43vVyNxLabh2F7CdFR9NAEVmUKa":false,"muQRbM43NH5LSigqDDE1z96ygLadhUqAkS":false,"myboc96HfByRuWpXcgvkCBaB9UUyJ9jXKK":false,"mq5wovr1wwJpbCQHZ5T5CyftGCwze1DQDu":false,"mktyYXvra2sribiZcBaTHxgyWqw2Jox3h9":false,"mtJ5uCjqQ9Wi3tji6LXUyt8JhUetoYRumF":false,"muDxFcQ4zhMKb4Zi6hYsVhkRNNZeG1CXtb":false,"n4JzHYrRWJ4neKUs8aA3fhrdNstuzGdGRi":false,"mpwKChjheNta7f2nfMrZtCsFVvTqnX4wu2":false,"mvfYphsn7xAdrf8xAYDSskD5HYGe6BV8F5":false,"mjf2x3fNeB65egmWgMhN4Uk9kCZRF6zSYF":false,"mhC13KUAAi3M837GNu3CtmwaERKskLofS3":false,"mpY4L4WHtXw7KSiZ6PDhZyTF5AhXK2F17X":false,"mgUL2JxfUxtQ4yfMREqCUJDsv71SL3qav9":false,"mz84bNXV2QHVAo82DFVzaymAWsNBn4oxXJ":false,"mod4Whkw4T8P28ezhzmzLAqGCQTu8GXdg5":false,"n3YrL12NVPcQdaeqxHzuNVqRGVAs8qHGfF":false,"miEwLKjCjCLau1nNVQAsHQGjBuYgSK69dg":false,"n42v5BSFfGZKEKDuU59yrur9eKSzg4F6QL":false,"ms2WTyyd3QfrzouWcpmQ8LdhvwLchNogZc":false,"mk5seBWzKpvkZayKcMmLnvfnJHH8ur4HeA":false,"mip1uqSjVnrdNpgSxttgVdFgYRxwYNKcZP":false,"n45q6F5LxC6VBUxdf6nuvp9ZwLGmBvSkfa":false,"n4ZvH3QJ5b2b1yCqLCwuf2zpgtrUX1sGs2":false,"n3rKjHbcp538Jr8n1V3PAZCbDQQyanuePZ":false,"mr9gtRy2VAS78GejUiKgf4myszNPBHoLpV":false,"muxcpyEWrtgAj96nQ9mUbuzQQb9ixDcFZS":false,"mvSgDudA3dJZqA9VdXNv9rSaDBbii12odf":false,"miUCCMdHSUMuqLakeJFnQNubCZiqtagT9V":false,"myBsAAr9mNe1o13qXTA9RQRxVLbE1Cp96i":false,"mt4BQPwHK9qYVyh6sE5Aq6Xm9YFyYSYTw8":false,"mgYbtjCrroxWMbqXXQBos6dNNXfLMoG5ht":false,"n1GtvUHv9mTU5MLcpDDydU4VwQcnvup3uB":false,"mjaG5QmGTSkSXUCsfsRcG2CgERRFFQEfbb":false,"myeyiLHwvy7GsTtHh6VFrRskMeZdqncSro":false,"mx9RRciYgtqTR17CtmB8sZCuwdUesxU8X9":false,"mxx8rKmbVh5bTmQJcip4XzZd3QSkqW44m9":false,"mrWLJUo6HzfYQPXxMbba1Mh81FJ1jThwBV":false,"mtgZJuqhnmzKq2Pqppyo7Bs5KXUBck9BQa":false,"n4ZfnxeQBifbXP5VeoaDQ31eJ2YEePrAD3":false,"mqsQmYqAttASHDRTSNtKvYt1JT95hr69hD":false,"moHvYxq4UKhQ6rJGs3ggF6HjDC3Kt9RSd5":false,"monmjReChadcQ28CsS2dT7cFt2voQrYDqv":false,"mjorkR7WmVTEBprGY9pTCS7cbsSSHb48tq":false,"msB8hgRB375MBJTL4zR89Bn2r1zYmHzVqo":false,"mrzG17RdB7S2rWhVgaTMnmHzwpyLnrB7eE":false,"mrvZPbrtuVtiu2JVFSPHAUeYPUrZVS3yrU":false,"mpcNCGkruWiTCwJ9hTFHej65eEKHjYcUeQ":false,"mjn917wD8SCTUYZekKajRRp9HP4MQL9SwK":false,"mscG2nzgEuWyNU1f3HiWENydwPxMA5A57c":false,"mmk4XeVpZSwJULzAEnA2hHV1eyE43QTNWb":false,"myeA86s9hjuoNc562RqMrTQMbGKXYjW6jQ":false,"mxovJt8LqTX1Q9t6CWy66sF5uzFJQWfhSE":false,"mtHCRA5DQgr4d9pF3J9fPAL95cNurdRDPw":false,"mummhXKqdB8MdS6c73MbBUb7jgPLqveXPo":false,"mymahUdZ3LE6R926ocPjy71VcbkdFLnmtw":false,"mr3WpZkETAM3ynUwP44sDPxjZ8X9FL5ihg":false,"myi466NcvUwEgGiNzYeQyScNqhsNDU4JdZ":false,"mtMQ8mWhcbrKL78yYdkGcHuU9TfCwGtDk7":false,"mj5LmdsePJ4mbaKVSE37dof1GXeLpgrEc1":false,"mxPtTaKJFdxDHHxqKzVZTf73CKgjcJtzAG":false,"mjk1vbP9jzMfGc85CfTbAjxefFBwnRieo3":false,"myR9FJitM5eDYzQvDnGXPXD7LFoXw91oAZ":false,"n4q8fhk38s2rBfS2ZeAAiC3dfMP7X4p7F1":false,"mpiVHCT9Fe6TCh5ZU862tpK6JhdBWoQkRs":false,"mfsK8DnY6Px6NpxqUiCaAHHyMpaYPv67Gk":false,"mpiQLtGkhRUQmo6kHQseAoqdq9WANgvpSJ":false,"mx4cZn3XPRjejzC119buMKYjuRN85Vb5um":false,"mz9VT4zPiH8vBAgKZn7Gf9VnRQstfEcnrX":false,"miaYjb1WetR2MZK5r3zrFxRS8BA6pvrBkU":false,"mtNHUh4G5EBe5KuWtwRsSZSnHQjiRDtMYE":false,"mhGt72NEBz6GY5F7AqgiN1ZHu1mh3jTnU6":false,"n4YN28XhZ9heUDWZ2tTGHmgqSW8mDVsoSr":false,"n1cSBqiuLWygTK29maXmoPp45viXgzpXr8":false,"mnq5grJzMVXehaMRn61Xwt7u5seqnmXcx8":false,"mhoszJwb7jduLfgg18AKMrMBsLBq9WTpzG":false,"mzi3gBmmhe9u8vzrabG2zyw9RYvidsvhsZ":false,"mvzPPyHreLKmcMkm3rt24CDRiv2RfV2mJ9":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz","msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2","n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA","mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR","mm9gzxT8zh7Beo1wxmNKSgePXVSEYSrCrM","mjTHjhtECpHPpTckxqUuEirexUoXnVa2C4","mhn5Lm29KHQpSFb888Ne2N8sjCoTstAAAq","mrHYgvzE2xAL7sxVfJDP4WuGUP181RvBr3","mnL5PvKG4GXwX3AYLSx75S98vFeFteBJRq","mn6RriDhuTh9DrXX8WwKmHBpMFkXpU4w4A","msR3m6CyXZ9bTG5ooQDcbwEtzwgAsKrKDw","n3kvzGysEJ3XuzecWaAtBTxjnpD4BZAiYe","n2bKDbjXLj3QYLMfBmd9GVcy1c19wJUxWi","mxyZfgBZo7goEiMFz4ZfXpWjqxGdfJnckQ","mhThc9DvGgJZZoDf3JxE8mHpcTS8wBoiDH","mzTxEzujzS2bMD9BWYck2U7k9m79grRnaw","mpfthavUUarbK8vBkrLEqBX3SDaj8632Af","moyKoZsCf6UP8X4HkRxdKmq5ihamCNpxon","mksdPb37aU3QwvdHS3Q442PiPX1qxhquq3","n4gPfaKpeLpTUyazt296bHf3hj6ZB7H2wc","mzXqh3GSAkRF83HA9xXvgkCsUMPhtbpF47","mvRPTy61Eu5FuQkKSD9RschXsCcgT7F9Ke","mfnKdSFaXGTgjd67xZrPMrxamBxuk9JfwF","miqgjnVTsheUs75EQ7W6MVN2ScvP7uB8MX","mtqgfbjZ9tstZtr3jyVKNzjPsfvKgqwdsh","mj6WUpsrEE1DKyyh6Tt4dL4Q6ovYMJXDqv","n2GwVELhoFabFoideHVSfimb66wUGHPzmp","mi55ngoeJQUmZ8ewxe799pQ744JkMbCjcr","mtd1drZCsnBXSnNhHj74N42xrXdTNQefbG","moAgQVoviA2D2aQV2jB9CRyjQF4KcWJg1t","mtoy82b6JjSjU44YMm49bUW3kkrgcA7eEL","mvXQdC1Jup75WNTry5zx7iaYb6UFWtgt4o","moa9QDEacjkayZ5VbWTTfCNkjKAVxgiX7K","moyESkaN1TDxtdcMFk5LTU8EcB7tP2eSgJ","mpRcrvTbFmwymYgW79m8tE5ANWJEGhBq2s","mwcQ2Kd7fKqH9x7cWgMksmKy6UL8BYZFbc","mnR7bePTUyRvm4Vu4EkvYrbc7UbLF7aiwi","mqvktLDsBXL7WVLamv9XAaNw3mProXaah3","mhCKygbPwuUojtMXKn5ugoDzfTyMxFek6D","mhPGchVv6RRVAGBwGNNBzNpumQk2YGm9Gp","my1Qedk3CfmGta8LWKQ7AbjTZCiA55Yt2S","mwB5CuoASxBWoqXBrq7mLYFNdvSrYhRvgm","mperSDrmbXYiu6iwsKKuspm8aPMEphvPWT","mhxa7TrYpBtLUPYmNmy7JsUZk5V2REXVww","mn1yfnj9LoEy9CLHmzw56uSmeyadB4Hzr5","mg7ZjKofdu1PEHjvC4WUrDsoC3nryoNUMH","mqM9sEh2K6bLwzcu5p6Gxxc6qVzFekrTBz","mwrERKNjnPr8tpu3grMy8zgEH68f9sxJx8","mxbLagg9QeW3k1eU9WEPso47f9nSwLhfPu","myWQKwR4iH3vsrdqKpznCPb12EshFSHeQ6","mfo4DWwc97XDr3yu8C8UxBA9djH4CHD7kG","mj7nVSAaV48zHRiiNtE4UCUe2x78tC2Qjp","my5PR9y5a5V23ufKjJ3v8wJpf8DaB7uwiL","mzGiFCYG6bsuuuV22wWt1u7A8UvCNZ8e4Q","myt62zMyGwmHNiV1h9ML6TuzU8nCYvcGpy","mxxFkSeZm6D5E6wjopqa97vszv6rqs9UCD","n4Mw2mYzqNFL8C6M3RNVBxfBRwAN9hcjG6","msJRXNbQkHynga9eW6pFLqAs1eZhzFoWQZ","n2DBGhEALVhmkyL6LzMxdgRh4SF1Ke2Mw9","mpM3wMnFjRUTcDWLcd5DZ51TgeqFw5N2ZM","mfx8pr2V2momqz9St5bbCaHeQCwH41TXne","mswRM5kueZHKkWPweq4nyfFpJRiEQ6UTrj","mhuxUusT441up1qCuKH6dCbdvXNECY14nM","mh5RPyq3Czki5WgWajEvTfE92PWgCiCont","mwxwmMPD27HhiatihhSspcCj4N2LaBrzcj","mmLAdsaK8RUhP7yqhSJM9caW6hrRKisLac","mmT7jzFyYPU6UnVSJ1bjxfJVYN1AKhZWJa","mwKdHeoHC5CPmm9CPRwoiUhwPWMMrosU3e","n3ATQKG5hVCXybev6fjZdZotbT5ih6LFDP","mvYaUg6WrAJWrjVVZBd7nPoe8zXay1tV9i","mhyfefXY1E46vHcdtDiUvY6HfS7LMXtKAJ","mswLRozh5Dpm7M7srHsF6KM3zDFZTJEEVn","mprDv1gvszNaVn47TaWPGgCARWyeq5yD6J","mi9YQP1ju8UjVa3uGA8BHTC3odh3gBJ1QR","mtuVbP91A4c8de2swYdDGyjJFmXjmCHQdz","mvQnYSDVvP6km5cU5TN3aApPKGa5PmFcSw","mk3JiS44hpN4dnnoS45xpuNXoALcEQE4iY","mnSY6sVsCBnHe6PVVVFK6bV6tf3Ri1ykcG","mtsVQhKHxohGeNDPK1epp2DPKT2jmZRn6b","mh7Ur94RHTwgjGteiybQN7nhmWZRKWo9ou","mzLsZTGwRhALkrSC555Fgetym5XLhfpW8e","mfdPbWAXs2sMBWkwGW9KgwGEEjy7R4oWhf","mvJCVH63DnXrzRycMJs15i3MEFQ3ginVvP","mz1ts8kGKWNuyxLBk7vEzsL8og2EPp1Vce","mn31JAtD9YrFPFMJAgQCrd3vi8XZNEA43e","n4bAGQkxXirKau9KNCex7HDY49YnDgsp3g","msbszKYDW4qCB8ueShWEYBuHsfeEBc8fdq","n1Q2zUqpWkkhS28eAtX3deF8xNLUWN3bzP","msmrDofDLBV3pWhbVXhcJo3Qm8VxYuKBL6","mk8gb2D8JNiQijb41NjWSRKBLv7zSVs4j3","mu5BVNMJ5HNrh2FP4t98Qmhfx5T1Gr3isH","mkd7kigFhRAgLXhcDQ12194NDiVKqJrdzF","n2AJmJCtyDiZd66CN9S6RmzTVK9TsCUTzv","mtNoXBnrwBLfwqbJe1syBZwAAsk9E1LpSh","mmnjKUc85eX49Aqnbibo113yba9DqyUUxH","my31AvFqnaRXs2CQdz1t9TXNU1ahZr7kph","mwWNQuwD6u4SmpTxJb8HVoYNDrMap6PYCh","mo5aR4S9JYb3PQpot8wBwhQyEtNp6wsdZb","mjjNUNVcG7qpHQiWhU96MhQVip5Jvw1fME","n3Shrgfben2UAvgqhGo4L9eEpw2ZcQ8Gxf"]}',
			)
			.reply(
				200,
				'{"data":{"mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz":true,"msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2":true,"n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA":true,"mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR":true,"mm9gzxT8zh7Beo1wxmNKSgePXVSEYSrCrM":false,"mjTHjhtECpHPpTckxqUuEirexUoXnVa2C4":false,"mhn5Lm29KHQpSFb888Ne2N8sjCoTstAAAq":false,"mrHYgvzE2xAL7sxVfJDP4WuGUP181RvBr3":false,"mnL5PvKG4GXwX3AYLSx75S98vFeFteBJRq":false,"mn6RriDhuTh9DrXX8WwKmHBpMFkXpU4w4A":false,"msR3m6CyXZ9bTG5ooQDcbwEtzwgAsKrKDw":false,"n3kvzGysEJ3XuzecWaAtBTxjnpD4BZAiYe":false,"n2bKDbjXLj3QYLMfBmd9GVcy1c19wJUxWi":false,"mxyZfgBZo7goEiMFz4ZfXpWjqxGdfJnckQ":false,"mhThc9DvGgJZZoDf3JxE8mHpcTS8wBoiDH":false,"mzTxEzujzS2bMD9BWYck2U7k9m79grRnaw":false,"mpfthavUUarbK8vBkrLEqBX3SDaj8632Af":false,"moyKoZsCf6UP8X4HkRxdKmq5ihamCNpxon":false,"mksdPb37aU3QwvdHS3Q442PiPX1qxhquq3":false,"n4gPfaKpeLpTUyazt296bHf3hj6ZB7H2wc":false,"mzXqh3GSAkRF83HA9xXvgkCsUMPhtbpF47":false,"mvRPTy61Eu5FuQkKSD9RschXsCcgT7F9Ke":false,"mfnKdSFaXGTgjd67xZrPMrxamBxuk9JfwF":false,"miqgjnVTsheUs75EQ7W6MVN2ScvP7uB8MX":false,"mtqgfbjZ9tstZtr3jyVKNzjPsfvKgqwdsh":false,"mj6WUpsrEE1DKyyh6Tt4dL4Q6ovYMJXDqv":false,"n2GwVELhoFabFoideHVSfimb66wUGHPzmp":false,"mi55ngoeJQUmZ8ewxe799pQ744JkMbCjcr":false,"mtd1drZCsnBXSnNhHj74N42xrXdTNQefbG":false,"moAgQVoviA2D2aQV2jB9CRyjQF4KcWJg1t":false,"mtoy82b6JjSjU44YMm49bUW3kkrgcA7eEL":false,"mvXQdC1Jup75WNTry5zx7iaYb6UFWtgt4o":false,"moa9QDEacjkayZ5VbWTTfCNkjKAVxgiX7K":false,"moyESkaN1TDxtdcMFk5LTU8EcB7tP2eSgJ":false,"mpRcrvTbFmwymYgW79m8tE5ANWJEGhBq2s":false,"mwcQ2Kd7fKqH9x7cWgMksmKy6UL8BYZFbc":false,"mnR7bePTUyRvm4Vu4EkvYrbc7UbLF7aiwi":false,"mqvktLDsBXL7WVLamv9XAaNw3mProXaah3":false,"mhCKygbPwuUojtMXKn5ugoDzfTyMxFek6D":false,"mhPGchVv6RRVAGBwGNNBzNpumQk2YGm9Gp":false,"my1Qedk3CfmGta8LWKQ7AbjTZCiA55Yt2S":false,"mwB5CuoASxBWoqXBrq7mLYFNdvSrYhRvgm":false,"mperSDrmbXYiu6iwsKKuspm8aPMEphvPWT":false,"mhxa7TrYpBtLUPYmNmy7JsUZk5V2REXVww":false,"mn1yfnj9LoEy9CLHmzw56uSmeyadB4Hzr5":false,"mg7ZjKofdu1PEHjvC4WUrDsoC3nryoNUMH":false,"mqM9sEh2K6bLwzcu5p6Gxxc6qVzFekrTBz":false,"mwrERKNjnPr8tpu3grMy8zgEH68f9sxJx8":false,"mxbLagg9QeW3k1eU9WEPso47f9nSwLhfPu":false,"myWQKwR4iH3vsrdqKpznCPb12EshFSHeQ6":false,"mfo4DWwc97XDr3yu8C8UxBA9djH4CHD7kG":false,"mj7nVSAaV48zHRiiNtE4UCUe2x78tC2Qjp":false,"my5PR9y5a5V23ufKjJ3v8wJpf8DaB7uwiL":false,"mzGiFCYG6bsuuuV22wWt1u7A8UvCNZ8e4Q":false,"myt62zMyGwmHNiV1h9ML6TuzU8nCYvcGpy":false,"mxxFkSeZm6D5E6wjopqa97vszv6rqs9UCD":false,"n4Mw2mYzqNFL8C6M3RNVBxfBRwAN9hcjG6":false,"msJRXNbQkHynga9eW6pFLqAs1eZhzFoWQZ":false,"n2DBGhEALVhmkyL6LzMxdgRh4SF1Ke2Mw9":false,"mpM3wMnFjRUTcDWLcd5DZ51TgeqFw5N2ZM":false,"mfx8pr2V2momqz9St5bbCaHeQCwH41TXne":false,"mswRM5kueZHKkWPweq4nyfFpJRiEQ6UTrj":false,"mhuxUusT441up1qCuKH6dCbdvXNECY14nM":false,"mh5RPyq3Czki5WgWajEvTfE92PWgCiCont":false,"mwxwmMPD27HhiatihhSspcCj4N2LaBrzcj":false,"mmLAdsaK8RUhP7yqhSJM9caW6hrRKisLac":false,"mmT7jzFyYPU6UnVSJ1bjxfJVYN1AKhZWJa":false,"mwKdHeoHC5CPmm9CPRwoiUhwPWMMrosU3e":false,"n3ATQKG5hVCXybev6fjZdZotbT5ih6LFDP":false,"mvYaUg6WrAJWrjVVZBd7nPoe8zXay1tV9i":false,"mhyfefXY1E46vHcdtDiUvY6HfS7LMXtKAJ":false,"mswLRozh5Dpm7M7srHsF6KM3zDFZTJEEVn":false,"mprDv1gvszNaVn47TaWPGgCARWyeq5yD6J":false,"mi9YQP1ju8UjVa3uGA8BHTC3odh3gBJ1QR":false,"mtuVbP91A4c8de2swYdDGyjJFmXjmCHQdz":false,"mvQnYSDVvP6km5cU5TN3aApPKGa5PmFcSw":false,"mk3JiS44hpN4dnnoS45xpuNXoALcEQE4iY":false,"mnSY6sVsCBnHe6PVVVFK6bV6tf3Ri1ykcG":false,"mtsVQhKHxohGeNDPK1epp2DPKT2jmZRn6b":false,"mh7Ur94RHTwgjGteiybQN7nhmWZRKWo9ou":false,"mzLsZTGwRhALkrSC555Fgetym5XLhfpW8e":false,"mfdPbWAXs2sMBWkwGW9KgwGEEjy7R4oWhf":false,"mvJCVH63DnXrzRycMJs15i3MEFQ3ginVvP":false,"mz1ts8kGKWNuyxLBk7vEzsL8og2EPp1Vce":false,"mn31JAtD9YrFPFMJAgQCrd3vi8XZNEA43e":false,"n4bAGQkxXirKau9KNCex7HDY49YnDgsp3g":false,"msbszKYDW4qCB8ueShWEYBuHsfeEBc8fdq":false,"n1Q2zUqpWkkhS28eAtX3deF8xNLUWN3bzP":false,"msmrDofDLBV3pWhbVXhcJo3Qm8VxYuKBL6":false,"mk8gb2D8JNiQijb41NjWSRKBLv7zSVs4j3":false,"mu5BVNMJ5HNrh2FP4t98Qmhfx5T1Gr3isH":false,"mkd7kigFhRAgLXhcDQ12194NDiVKqJrdzF":false,"n2AJmJCtyDiZd66CN9S6RmzTVK9TsCUTzv":false,"mtNoXBnrwBLfwqbJe1syBZwAAsk9E1LpSh":false,"mmnjKUc85eX49Aqnbibo113yba9DqyUUxH":false,"my31AvFqnaRXs2CQdz1t9TXNU1ahZr7kph":false,"mwWNQuwD6u4SmpTxJb8HVoYNDrMap6PYCh":false,"mo5aR4S9JYb3PQpot8wBwhQyEtNp6wsdZb":false,"mjjNUNVcG7qpHQiWhU96MhQVip5Jvw1fME":false,"n3Shrgfben2UAvgqhGo4L9eEpw2ZcQ8Gxf":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz","msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2","n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA","mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR","txId":"38fdefd8753be8c8101b948bda15eec6d03289a677b9da3f47c952829ccced26","outputIndex":1,"script":"76a9142972817fede6af97b9e0482a8c70e1026267bb0088ac","satoshis":82000},{"address":"msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2","txId":"a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394","outputIndex":0,"script":"76a91488941076e6adf6063892bf338783f805d582c9b388ac","satoshis":30000},{"address":"mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz","txId":"67c2cc6fe363bbf4a15083cc3c230f497a964049486b12b7815c5028ed19eca0","outputIndex":1,"script":"76a914a43362c51b5ab6b2476c55e0a88452533e1a155a88ac","satoshis":100000},{"address":"n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA","txId":"285614f13fabd80bc50f32ef9fee4e3107e40f793e1ba16a1c81dda6c2327555","outputIndex":1,"script":"76a914ff954b38c974ae46f6908a496896c53a833330cb88ac","satoshis":100000}],"links":{"first":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":4,"total":4}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["38fdefd8753be8c8101b948bda15eec6d03289a677b9da3f47c952829ccced26","a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394","67c2cc6fe363bbf4a15083cc3c230f497a964049486b12b7815c5028ed19eca0","285614f13fabd80bc50f32ef9fee4e3107e40f793e1ba16a1c81dda6c2327555"]}',
			)
			.reply(
				200,
				'{"data":{"38fdefd8753be8c8101b948bda15eec6d03289a677b9da3f47c952829ccced26":"02000000000101c6cbc73cc5751b561faebded4ba14641c3ab73edba4698026fe253bbd2ec05d30000000000feffffff0229eca1be080000001600143555d0308b812db6d1ddbb19bd89b84e67b9179450400100000000001976a9142972817fede6af97b9e0482a8c70e1026267bb0088ac0247304402206ffd0cb34a5b9bf0a940ced2bff963dbfee8848cf59e0f2a7297a2eabd0139290220106052789195ac664250ab86f592dce97fedfa752a34e5832f5d5c297a7b808e012103ab3719fad83e63de571fe36c7d441e0ed4e4f303ae8cd04b71f3eb2da07049afabf61f00","a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394":"010000000001011e28480a71d4bb1eafa75eb082fd97926c6542afd15678c98d1eca0a91b43a2a0000000000000000000230750000000000001976a91488941076e6adf6063892bf338783f805d582c9b388acde100100000000001600140ab1eb8e14afc44bfcbe551762186ebbabc5a7980247304402204b53cdb65d9604fd997d90106476aa8b72d1c8042d1e9a7c0248646a0cfdf53f02200802246764b7cc125c2180f5738d962a12373de554ed27cedcadab18cf1febe7012102823b744a0a42c15851c1d8cd6415a792474dad4a401d997f96c7185985164e2d00000000","67c2cc6fe363bbf4a15083cc3c230f497a964049486b12b7815c5028ed19eca0":"02000000000101e6946a967297d4d31622d2738fd5eb253dd641cd1e548ddfc8899c20d417edab0000000000feffffff022ddb60000000000017a914fd74bd3b653f0905ec955ff2d9d7a24d9910f9b487a0860100000000001976a914a43362c51b5ab6b2476c55e0a88452533e1a155a88ac0247304402207c1ea29f8b5a6104994d37f202364a15c398ae00fe8b27a01a89ea221a69fb11022013bbc97d646ec2d767e6f06e83781923cfb4d03168fdb10003a7b072a334e683012102c87c5c38f61500ea311a181b5dacd9d4d8c513b88875d8f8a7abe883c062d3dac09f1e00","285614f13fabd80bc50f32ef9fee4e3107e40f793e1ba16a1c81dda6c2327555":"020000000001019404d857a439f2ef694e11ea4aae205227a944c4ada7feba006d499b65d6b19b0100000000feffffff0233fbb7000000000017a914390ad85a6b10a50ab02e0f8cee65dd9c33f8d69287a0860100000000001976a914ff954b38c974ae46f6908a496896c53a833330cb88ac0247304402202fad643d4b023d2e8f156a0e0723094760baaa0aa9fcd07271ea4de87d2193fd022025c246eeb104c52b77fb8b5abe7f6f6c45db96e4b73d1297e75f1f4c477509f20121032065b9938030e4c5eaa83594a0d83c4065c8cdd6380853793b4167af60a9278e6ff61f00"}}',
			)
			.get("/api/fees")
			.reply(200, {
				data: {
					min: 0.00001074,
					avg: 0.0000001,
					max: 0.00180617,
				},
			})
			.persist();
	});

	it("should generate a transfer transaction and sign it with ledger nano", async () => {
		let subject: TransactionService = configureMock(ledger.mariano.record);

		const signatory = new Signatories.Signatory(
			new Signatories.LedgerSignatory({
				signingKey: "doesn't matter",
				options: {
					bip44: {
						account: 0,
					},
				},
			}),
		);

		const result = await subject.transfer({
			data: {
				amount: 0.0001,
				to: "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn",
			},
			signatory,
		});

		console.log(result);

		expect(result.id()).toBe("32736c41e9062d44f34cfe2884cb29b8c524fd8f33638d3bb5f0c7a4d5dd5a52");
		expect(result.sender()).toBe("mzeywHS67trEXZVrSxsEXcgvhd1vr9n8aF");
		expect(result.recipient()).toBe("tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		expect(result.amount().toNumber()).toBe(10_000);
		expect(result.fee().toNumber()).toBe(1_690);
		expect(result.timestamp()).toBeInstanceOf(DateTime);
		expect(result.toBroadcast()).toBe(
			"0100000001a0ec19ed28505c81b7126b484940967a490f233ccc8350a1f4bb63e36fccc267010000006a473044022023b1dee87014d81c6954282c07431b4f90d4d790119453f3bc7028ecdc406532022021f126650d37f8d9775009d7806cd636cd2fae1375e833498d94ab5a7cbc191a012102c51a1a843e4661e603d7d28279dcf58c065f8a217818fa00202b666aa56faa8b00000000021027000000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac4f6580100000000001976a914ef628f069100b9831b592ea20a1d446e5de2c01588ac00000000",
		);
	});
});

describe("bip49 wallet", () => {
	beforeAll(() => {
		nock.recorder.rec();
		nock("https://btc-test.payvo.com:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["2N789HT3aXABch6TqknX2TCekPEUGLMfurn","2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT","2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB","2MvxBq4NpBpBT2ZJhkj4eJXjAWzbo3vsnGR","2N5H3mWaqj7m8NQJaNXGt1myGsN9HZZVvbm","2MsKn6krztaAgssnYAXAUEjpBUB6hUoP4hF","2NAQ4EK2QdhUBSAunsRbgoh4Sd51rcZr1rb","2N4zv2KR93169CLL19XhXqMoyoThqneEGFe","2MwWzNwJLsLATochEcYmujbfmPyZxdXx9iD","2NFKpqkYwkciKeH4BxeUzD7UTHa5PJRcMNE","2NDCrPojzPDn6R7cHrxzmZBWndnxcuXVxiM","2N8nza539HAe6K9coAsZuEpGH6XTVQvvaMh","2Mw9ri9oks7CGkXxnkJseohk5dzmK39pndL","2N6BTWoweaufr7RXHPaPTiyPkrNdcjzeAKC","2MxJJ2CCNrDuZ9sYhAZjHcydeZY6U6nEXTC","2MsxeeHWUevXrCrXwc7tL6GPCmYuSyYZNuP","2NFwTtVpP8TqLRVLeNQ4z2BKD9LvkJGgqTx","2N6rWGYk8HaaezqWhysBZoNpJXkrk2ZBBnz","2MtYXRziznpvRfQVDfEhDTCYacUK1VKTYAR","2N8ST28NsESkkBohTFZhwXvJSTphe7eByUw","2N28utBztNg5XuEkustWDUsS3fQjQynPKxJ","2NCbA9qsyz3afU6DKUDG7pzxM9L5NqXjNzr","2MvyN2nHkpWrRoivaYZaAjJZR8wQPNvUiAE","2N6qNLeNJn7DWKM6ZCcF8GqCuYngifk1KoW","2N2kKdqAvvD5xT95LarwfPYHXLy4Kw7i7mu","2MvT4SX9zJm3H8NeGdEjsiJ5MuSyMqukLKj","2N8LFVMBZ22ZRHVo2qy41EiE3RGLnxk4QNd","2MxwHtHpBgGtC7RrFppwTrcjAthC1EQHj5p","2Msu29MZN2wdtub4Z3YxhS1XbrPBMHyuwsp","2NEjp5T1G6y61H1JPLPRxzx9wKctHhJz93x","2N5gz2yCQJRm4SqmUZcfc67HTjrUo55gHh3","2N3AwQqdPqeQ6MvS7rhSaC2gFvTru41xiK3","2MxrkkkBriArzsvv7DDnxANz8HjYaEXj86i","2N8uaCHXCrBVvp713ryViPfv4S3XxuaCTYK","2NFe4WTqCHgSYLrHwa6EF2rqgEeK4TdP1HU","2N2HC6Gxy85tGWNQsDLrJpDkEFsYtFmte2C","2Mwbt8GFowWm3AoatvhSCaQqNXV4YUkiDqs","2NE4RjenrKzgCNdyn5ePjGYYuViJTQrhdCT","2N5ZVzEfrSomVa2YVtwXz5SR3LpnWz7jSmQ","2NFXwS9S3zEdw4uyuPd4aJrrGgsNUqdBsLp","2MzdNTpW3WCBmZcjX4BV33dZsbLho6We4oT","2MzVNYFRpQnxLZ8AEUeyVuZBDrue9dq2Ukj","2MyCpARHGEr82U8JhFdQJ1rB4pYtWVSLeYR","2NDtXCMwG7btvTJ3iWckxQWD4T8f4K6KNLh","2MyCFvaYjcdKPEGxSGqNNwMtwEDnMEcH56k","2NFo3ZPMYMEe8W1ri7UD5AipdV8YfVGydYB","2N1Bd8YCSrSbHSZsbf5o3V3FrniZDwnQ8gw","2N8Mqj5ncuQGWEqzFp3muozALZVnt2qMbtR","2MtZ5cVKWSPB3PdozB5mjrmA3hXXZzuhSQG","2NDoKKEN54H3Zwwi1WDtLQ1pzC5VzGYSEKT","2MtaDtk6MxnYcLgRk2Tx4DduJxSZMwoi8TP","2MvpLKQqkeEnuU9EzASgd9Yg16AjAPzf8UV","2Mz4VbaTkocnPkUt7CxPRXg9uYd8pSGJS5b","2NAsJp3YXff1Ap77M9yBMuPfQAwe2sTfZzg","2N4GYLo4Zbz6hfgN1zq8GFqTRqEkc4XJ7j9","2NEA6FpdA3p4c5AsXVSwLdTZabQQgpzoWwY","2NAbA1nTMj8ENVs3wTi8QoQseuarXVhMke3","2MwrTMp2LXzCcJwKRvxAa3wdBNu6igdWSjz","2MzdrYY7sGc1gZkZwd6oKX6UExwX6UgVUCV","2MxqZAjk7UHqfgkEpHhkHhWpXHBjF9BQGpa","2MyV6XHikXbJuGvjQFLn8T2mW3s6BnZYALs","2N9xxRKVjXdgGoeu1bpZn6BDBBkH1FY2co9","2N2Y614L73mmGm5VpCCgb9zmbZZTRgvmj4b","2MwEek5fYgMjLh5z4db66bs2odPmhKayiXY","2MtT9XVV7JnMqZPTuRWmTZyKWrsFtxgWo9k","2MwEJWJsRmrQbmuzZpQJ1zrj33CPF9DxDpL","2N8a3JoEGX5LdnNofQPMV8ERKuVXdpuFgJc","2NDHtfxJv3WMp3x6WqDihHkGH2qPGart3wo","2N9zgD6ruwBvx711E1vdUhJwNW21UXdcjCD","2N2UCaSW44EHyxjuxTKghiGSjLaTdq9hM9Y","2N9zAgXDx2edhJBPSsr5BDHuxpjFg23k5m9","2NALsVSqT1x2TtdcGTWckvkwrbRRjdKDUEf","2MwmPqU3ukg8UyrsncEpTK5sLg3GcE7xqse","2NFBMzd7JgdKZKbGBaH6ukD6ngMDULCWBKv","2NDQa1rxk2RJ3ADTa53mhUp9RqeebFxNfAq","2MxWz1b1ALgwZUYDGFZYqXSrTPxSZTTYoQP","2Mwq3agY92JHqyqk8ScHtTdLJ6eYWDwNsaU","2MzZ6rGbSXx28BWdWsEfgxQDyHEhK3FPDbP","2MvJ93MF8q42nLUzep59v6sJRHca5Kz5Qxp","2N1eYd4UzUHmGxpNqhudeB2GaPNQsAvEhVG","2N48CwaTWgrKm8AkCGXHKyhCL1ttQFYtNNw","2Mt9iBT4RafyvC2S1JV2BcSZRmYQjL9e3g6","2MsrLJk9G84TsEJLXYTayPDM3keXJTFWohP","2N9Q8GSUN14qRTwgromn3ddjrUaX7NQFwzg","2NFY3ELk4XoVh6jWLmF647hMjcwyMVnbJMA","2MvVw42sEYGL2YwyYhwDbtdZpdv4ErQnXTH","2N2BLY9qoKVFDsynTdthzACLqZd4PfPbYKt","2N4ETCE7UkrE48pGcpW8P3iWqsoZuvgw7HX","2MstS3Yt5ehcEFxvELNeRhCdR4fRC7JWPmK","2N7ewhV2ZXSwHZuaagMHdSvJjpvaNuQbfQD","2NGJMGNeoocbNhurRw9EdWUqMYghC7EGaQA","2Mz3GJ4eCk4Pzc53STigVKQKiwuRwf6W8CW","2N6y5cWzLfLBBqxxGyMiykN9Ag3tCmy3yNv","2N4jqmC9t3ua1Dq9V6AxLHu4oHfGtT59dUj","2N1nsNGjv7NTR3rix4d8YLvpD3ohSeNFSZG","2N2hrq76A891qLShomZ2JfD6F4GMopj8KpW","2N7pcjatioAmK4PzKHDXcs5n9QN4wzkJedR","2MtrmGAW78kfkzaVfy4fw7tfwi9xmcPJmjh","2N4s867WeGgaQc1CAaTdLpaNjkr4h379Jbd","2MwKvaKjUp8CNP2PhUP2J3CtSvk1SujxWQy"]}',
			)
			.reply(
				200,
				'{"data":{"2N789HT3aXABch6TqknX2TCekPEUGLMfurn":true,"2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT":true,"2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB":true,"2MvxBq4NpBpBT2ZJhkj4eJXjAWzbo3vsnGR":false,"2N5H3mWaqj7m8NQJaNXGt1myGsN9HZZVvbm":false,"2MsKn6krztaAgssnYAXAUEjpBUB6hUoP4hF":false,"2NAQ4EK2QdhUBSAunsRbgoh4Sd51rcZr1rb":false,"2N4zv2KR93169CLL19XhXqMoyoThqneEGFe":false,"2MwWzNwJLsLATochEcYmujbfmPyZxdXx9iD":false,"2NFKpqkYwkciKeH4BxeUzD7UTHa5PJRcMNE":false,"2NDCrPojzPDn6R7cHrxzmZBWndnxcuXVxiM":false,"2N8nza539HAe6K9coAsZuEpGH6XTVQvvaMh":false,"2Mw9ri9oks7CGkXxnkJseohk5dzmK39pndL":false,"2N6BTWoweaufr7RXHPaPTiyPkrNdcjzeAKC":false,"2MxJJ2CCNrDuZ9sYhAZjHcydeZY6U6nEXTC":false,"2MsxeeHWUevXrCrXwc7tL6GPCmYuSyYZNuP":false,"2NFwTtVpP8TqLRVLeNQ4z2BKD9LvkJGgqTx":false,"2N6rWGYk8HaaezqWhysBZoNpJXkrk2ZBBnz":false,"2MtYXRziznpvRfQVDfEhDTCYacUK1VKTYAR":false,"2N8ST28NsESkkBohTFZhwXvJSTphe7eByUw":false,"2N28utBztNg5XuEkustWDUsS3fQjQynPKxJ":false,"2NCbA9qsyz3afU6DKUDG7pzxM9L5NqXjNzr":false,"2MvyN2nHkpWrRoivaYZaAjJZR8wQPNvUiAE":false,"2N6qNLeNJn7DWKM6ZCcF8GqCuYngifk1KoW":false,"2N2kKdqAvvD5xT95LarwfPYHXLy4Kw7i7mu":false,"2MvT4SX9zJm3H8NeGdEjsiJ5MuSyMqukLKj":false,"2N8LFVMBZ22ZRHVo2qy41EiE3RGLnxk4QNd":false,"2MxwHtHpBgGtC7RrFppwTrcjAthC1EQHj5p":false,"2Msu29MZN2wdtub4Z3YxhS1XbrPBMHyuwsp":false,"2NEjp5T1G6y61H1JPLPRxzx9wKctHhJz93x":false,"2N5gz2yCQJRm4SqmUZcfc67HTjrUo55gHh3":false,"2N3AwQqdPqeQ6MvS7rhSaC2gFvTru41xiK3":false,"2MxrkkkBriArzsvv7DDnxANz8HjYaEXj86i":false,"2N8uaCHXCrBVvp713ryViPfv4S3XxuaCTYK":false,"2NFe4WTqCHgSYLrHwa6EF2rqgEeK4TdP1HU":false,"2N2HC6Gxy85tGWNQsDLrJpDkEFsYtFmte2C":false,"2Mwbt8GFowWm3AoatvhSCaQqNXV4YUkiDqs":false,"2NE4RjenrKzgCNdyn5ePjGYYuViJTQrhdCT":false,"2N5ZVzEfrSomVa2YVtwXz5SR3LpnWz7jSmQ":false,"2NFXwS9S3zEdw4uyuPd4aJrrGgsNUqdBsLp":false,"2MzdNTpW3WCBmZcjX4BV33dZsbLho6We4oT":false,"2MzVNYFRpQnxLZ8AEUeyVuZBDrue9dq2Ukj":false,"2MyCpARHGEr82U8JhFdQJ1rB4pYtWVSLeYR":false,"2NDtXCMwG7btvTJ3iWckxQWD4T8f4K6KNLh":false,"2MyCFvaYjcdKPEGxSGqNNwMtwEDnMEcH56k":false,"2NFo3ZPMYMEe8W1ri7UD5AipdV8YfVGydYB":false,"2N1Bd8YCSrSbHSZsbf5o3V3FrniZDwnQ8gw":false,"2N8Mqj5ncuQGWEqzFp3muozALZVnt2qMbtR":false,"2MtZ5cVKWSPB3PdozB5mjrmA3hXXZzuhSQG":false,"2NDoKKEN54H3Zwwi1WDtLQ1pzC5VzGYSEKT":false,"2MtaDtk6MxnYcLgRk2Tx4DduJxSZMwoi8TP":false,"2MvpLKQqkeEnuU9EzASgd9Yg16AjAPzf8UV":false,"2Mz4VbaTkocnPkUt7CxPRXg9uYd8pSGJS5b":false,"2NAsJp3YXff1Ap77M9yBMuPfQAwe2sTfZzg":false,"2N4GYLo4Zbz6hfgN1zq8GFqTRqEkc4XJ7j9":false,"2NEA6FpdA3p4c5AsXVSwLdTZabQQgpzoWwY":false,"2NAbA1nTMj8ENVs3wTi8QoQseuarXVhMke3":false,"2MwrTMp2LXzCcJwKRvxAa3wdBNu6igdWSjz":false,"2MzdrYY7sGc1gZkZwd6oKX6UExwX6UgVUCV":false,"2MxqZAjk7UHqfgkEpHhkHhWpXHBjF9BQGpa":false,"2MyV6XHikXbJuGvjQFLn8T2mW3s6BnZYALs":false,"2N9xxRKVjXdgGoeu1bpZn6BDBBkH1FY2co9":false,"2N2Y614L73mmGm5VpCCgb9zmbZZTRgvmj4b":false,"2MwEek5fYgMjLh5z4db66bs2odPmhKayiXY":false,"2MtT9XVV7JnMqZPTuRWmTZyKWrsFtxgWo9k":false,"2MwEJWJsRmrQbmuzZpQJ1zrj33CPF9DxDpL":false,"2N8a3JoEGX5LdnNofQPMV8ERKuVXdpuFgJc":false,"2NDHtfxJv3WMp3x6WqDihHkGH2qPGart3wo":false,"2N9zgD6ruwBvx711E1vdUhJwNW21UXdcjCD":false,"2N2UCaSW44EHyxjuxTKghiGSjLaTdq9hM9Y":false,"2N9zAgXDx2edhJBPSsr5BDHuxpjFg23k5m9":false,"2NALsVSqT1x2TtdcGTWckvkwrbRRjdKDUEf":false,"2MwmPqU3ukg8UyrsncEpTK5sLg3GcE7xqse":false,"2NFBMzd7JgdKZKbGBaH6ukD6ngMDULCWBKv":false,"2NDQa1rxk2RJ3ADTa53mhUp9RqeebFxNfAq":false,"2MxWz1b1ALgwZUYDGFZYqXSrTPxSZTTYoQP":false,"2Mwq3agY92JHqyqk8ScHtTdLJ6eYWDwNsaU":false,"2MzZ6rGbSXx28BWdWsEfgxQDyHEhK3FPDbP":false,"2MvJ93MF8q42nLUzep59v6sJRHca5Kz5Qxp":false,"2N1eYd4UzUHmGxpNqhudeB2GaPNQsAvEhVG":false,"2N48CwaTWgrKm8AkCGXHKyhCL1ttQFYtNNw":false,"2Mt9iBT4RafyvC2S1JV2BcSZRmYQjL9e3g6":false,"2MsrLJk9G84TsEJLXYTayPDM3keXJTFWohP":false,"2N9Q8GSUN14qRTwgromn3ddjrUaX7NQFwzg":false,"2NFY3ELk4XoVh6jWLmF647hMjcwyMVnbJMA":false,"2MvVw42sEYGL2YwyYhwDbtdZpdv4ErQnXTH":false,"2N2BLY9qoKVFDsynTdthzACLqZd4PfPbYKt":false,"2N4ETCE7UkrE48pGcpW8P3iWqsoZuvgw7HX":false,"2MstS3Yt5ehcEFxvELNeRhCdR4fRC7JWPmK":false,"2N7ewhV2ZXSwHZuaagMHdSvJjpvaNuQbfQD":false,"2NGJMGNeoocbNhurRw9EdWUqMYghC7EGaQA":false,"2Mz3GJ4eCk4Pzc53STigVKQKiwuRwf6W8CW":false,"2N6y5cWzLfLBBqxxGyMiykN9Ag3tCmy3yNv":false,"2N4jqmC9t3ua1Dq9V6AxLHu4oHfGtT59dUj":false,"2N1nsNGjv7NTR3rix4d8YLvpD3ohSeNFSZG":false,"2N2hrq76A891qLShomZ2JfD6F4GMopj8KpW":false,"2N7pcjatioAmK4PzKHDXcs5n9QN4wzkJedR":false,"2MtrmGAW78kfkzaVfy4fw7tfwi9xmcPJmjh":false,"2N4s867WeGgaQc1CAaTdLpaNjkr4h379Jbd":false,"2MwKvaKjUp8CNP2PhUP2J3CtSvk1SujxWQy":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["2NCZ7HVZE86KDFVPURBa7aCYmiDhKPc3Ens","2NBq3Vn72BZyyxutTXsMXZSw7L4KdtMvSgW","2N2LmgL5GkpMxsPsHdKBZwn5z1kdcnTxUJC","2NAHKx4tmvRNTg1xrKdF6zP7mUK3iNejy8j","2MzW7F5mD34y8HNF49moav5NWV7oK8YV74k","2N5q4SwWPKySiES5CFzEkJjC4yfNL9ssdMx","2N58QRKdorCPYFrq89ev2eQEQgxmrWgQSVA","2NCex7e3mX8jEixQtED8Dbrk24zX8SmwQB8","2MxHaUUAMW47VeTYnRURG6MDWR2BWYhzsRp","2Mw7PXB737kvUb2gQZkHPEobsekBc1zJS4J","2MyghR9Pq8JPsn54resXvu7jEtfCKQGYk7q","2N5HsjNhNr9YMeg7mMR1AxkCPtQ1KzUmosA","2NAnshE3gpGAnxiP8hdpSi1BwphPkFFQ2bo","2MzfLizkqBGfm7N8Xav7RmWjZKNMu8MD9Su","2N8MWAYtndoL43EmmRwWyApsrQi8gU24U1f","2N5wY9ktLgXgxSAqVnuBqGx7ieKDZ4WDbM8","2N8VbZChVA9aLFqb3MavbJohhWArYc36QSq","2N9xerR3EjSzdkFZujnvGZ63YJvncwbAhoT","2MurZKzr7oqvkpbby2D275fGpNEYkVZr5F1","2N2tBPEcafrhdQY8wA1FwD36zSVNxvFL7ui","2NEfjAxHZiU3fTCjaH5Fi1cM7Gv5xMRXx75","2MzoEgXFs5bLk98PGZAut9rWoPf5Vyig8f4","2N2RFDg8Gi1ykFAYKTcedPyawPk1MDRpLkg","2NFN8zUKEyiRMUgRB5xdWCffj5mdkuz2BiT","2N8berkJ8CFaYWFETUdCvsoQP5FSgqsh3JV","2N7QrPRT2tA8mmmz7vwit7p8NvQJR15GBwT","2Mzu3nyZmfFZST6fpjwPPiYdUPYsmH25LL3","2Mwg2Ex24RaE3oUqQq1cQWvmSwaXvrn3DYg","2NCNM6FyrUz74gQQehtAJNAMhNhZgiyeTV1","2MzSYKRb1H7PozDXokyKC8oEX62QpurhgTo","2Mv5VQMZzRS7Eg43sehSSTK24WzkGrMkVPD","2N71QdMU5FWFguEA3DkDGGPiGwYYDSRmaCC","2N7pF8uuYV7n2U7XRSvr559Wq5FafFCzjqb","2N5g4Ymod4uT4D7Z5tWA5aAWiFRVosCb6qE","2N8gH2ufS2JgYeJZoo5u6nQkmNV7btWqwrS","2N85gm9yXck7ULnFYPVi5VBgcGDo9G1fiQm","2Mv3GFvVHEpNzc2cCcCcD8sBNDZrG7pUE6V","2N9MuyrpQF568gtjEcE5T96c4cP52V2Jzgb","2N7gEXhoXHuLsCZVp5rczrm2zK1S7V6HHc8","2N5PwikEmQCEJevVm8ac7d18c2f3BbHf8RP","2NBYkKHQDUb43KeR9UPwbPChe5W3u3wcm6y","2N9hurkMm9L5xLyXM6BfsgyuAmtLcaYfPB3","2N8aQZssrGrQpPAt5FN9XvYCQHpdDtHK5P5","2Mv6SnrfXEdbhkyCUJ2zS4mgRSwGLDhEGo3","2MsK6TA9ZPbuzcmWug7T3s1gBnwGu58DFs3","2MwXQCNYbKeiS47AYMGKAqKvfTyowdDLAAr","2N1GySTQwjyLVQxrjyRWd655ATM8Fs1niUa","2N69RLhne4hGy9LPQm1iJENAykM32wHJKRs","2N1WmJpQsWgmfuzGQ2zJAS3tA2Q9PwYrgar","2MyEEXh7e15atpu5bzZvUD1zY7XjcymrzEu","2Mtq6J2mM71MitnxY27jNAmnd2grfjZg5eo","2NBtgZf7FKu4pKxRqoapHrpQ1tRNupgQ9ym","2N5smkejWpBvUNUNScqNZ18MsdW6dDGPPAs","2NFhddTvwbFpPZrkpcMTmXf8cMcszny1AJk","2MuEjytuhTwwyMapvwCN1Cmw395EVrCyzsp","2MxGM3mR1wnzoDVDY7AyXAfGCasrFz5pZMb","2MvBuHNgsv6AkDWJqvN9TtJmSUEALU5SL9P","2N1w26a3DCwUiisn5J2E9gDWaXzsTQd5qgE","2NEEiLV5yCDetR3sfJrTvses6YkawEzuTqQ","2Mw8qSA3fhMdGbj5p62oUMjVwLtTVmb9Rn8","2MxrdgDwDNL2kzpjbkiRtMFxjuRsCU9sSNj","2Mzyg9FLTuyVZBMazJe4EudbW3LRwsr36ea","2MxmfYqh6aCszC9gPMVf9GKsTtxbT3AHzvb","2MzKT1UurBuMzxeGLZM8bgRF7vRvgFeWhEq","2MxzJdkUe4cBctTagugkQUe5qfoFQwvWHSj","2N2ng3BXbFvbqBLHy5V5jJGouEYFEM3Dd7D","2N9m2ABhSz6dvNrweigZqfJ2AxiqhavShBk","2NFXpB7aXHngWt9A6HcjgAnZZpQvdnRPBMy","2NB7Gg8QK8gLoZE5D4qtCPKVmZHzQEnj3MQ","2NB9BAJ3g51ANyH15WLHEQ8gHJoizagPC39","2N3dcpqM1atb9m9Vj2Gkk29ir6uGbEHFqTn","2N5nPH2zs5aGADSiLR2DDpD6NQFQZmbKrqT","2MsUrHe17VtL3BwQys2rfwKyJTAybwfkoF9","2Mvp5tSD3DqA4FfihRBA7UitzK26no7w68M","2N8EH8zTBwox5xqLDLJZmVDqb1776yPucvZ","2NAsfM2WLozSLWx2nbvWKxPZeA1VXJ9Lamj","2NEG8BcW1CdXLQSM362uCJzRY4UstW813Dk","2N3mMiZ5zSaCEvFCTH46isTUG6FtNv1y8k1","2NFQEaCzb6PdSnZu15oFy4Wa3HZH1fPu6FT","2N1UnjtqaAiJxQ8BshwdNEzDZHc8NguUj2k","2N45keLAoxpNj29oZG9GpZ3mwMHNbw2rAyc","2MwRnQ5h32sTaE2NUuXbhGnrGbGuFa1vHy5","2N71ytX1P56qYi7hCPomfXSCYxPr82GfMn9","2NA8kBXTZ63vvmRV45hiec3J6obXE4MQWYL","2MwcKJLiDPMaxJxvwpezNFWJ2aw5cjATDus","2NDnpvdvsx9k1FxZpYU5dk6QTfpiLVJLSzG","2NEtYiZFfNGKQtpKkDA23uDpjR7B73CEVbj","2N5ERfxJHFF1SNZ56vmbzw2Ldspwm3KMKK9","2NDWFm9vtRehHmXhFaMcqrMvkdoUAhQwpbB","2N2thCcBvLEyVa7N8dsR3xXW9xMPqmfKAjx","2NA2uCpKkSYuC9ycSFc7uNmDio3fMh9DsSK","2N8u1PX9S5FimoeCEvQgFdtEEV2kRFamdJi","2NATtNcURPuzFvxxfkPsezmVYFWVa5osNDz","2N68EGCSvTwZs2zMRTde5oAoVWaF5RkaF5T","2MzCafgec6eV9hDNkaMsuGtD1FfbMBbAL2x","2N7PoLSqzCCZmkq7Cj7H2gc94XZMxth9kch","2N1h3cfRVB2aChb6wvtjN8n4KijZnm2YcgZ","2N4kcChZsHza4nzthTG77K5t9VChyAobwAq","2NFeeaekausEiUVvTuntts5HfrjzSgCzDbJ","2NDwnfXLLAk1GLpzCbcHE6novqySTAxHbgu"]}',
			)
			.reply(
				200,
				'{"data":{"2NCZ7HVZE86KDFVPURBa7aCYmiDhKPc3Ens":false,"2NBq3Vn72BZyyxutTXsMXZSw7L4KdtMvSgW":false,"2N2LmgL5GkpMxsPsHdKBZwn5z1kdcnTxUJC":false,"2NAHKx4tmvRNTg1xrKdF6zP7mUK3iNejy8j":false,"2MzW7F5mD34y8HNF49moav5NWV7oK8YV74k":false,"2N5q4SwWPKySiES5CFzEkJjC4yfNL9ssdMx":false,"2N58QRKdorCPYFrq89ev2eQEQgxmrWgQSVA":false,"2NCex7e3mX8jEixQtED8Dbrk24zX8SmwQB8":false,"2MxHaUUAMW47VeTYnRURG6MDWR2BWYhzsRp":false,"2Mw7PXB737kvUb2gQZkHPEobsekBc1zJS4J":false,"2MyghR9Pq8JPsn54resXvu7jEtfCKQGYk7q":false,"2N5HsjNhNr9YMeg7mMR1AxkCPtQ1KzUmosA":false,"2NAnshE3gpGAnxiP8hdpSi1BwphPkFFQ2bo":false,"2MzfLizkqBGfm7N8Xav7RmWjZKNMu8MD9Su":false,"2N8MWAYtndoL43EmmRwWyApsrQi8gU24U1f":false,"2N5wY9ktLgXgxSAqVnuBqGx7ieKDZ4WDbM8":false,"2N8VbZChVA9aLFqb3MavbJohhWArYc36QSq":false,"2N9xerR3EjSzdkFZujnvGZ63YJvncwbAhoT":false,"2MurZKzr7oqvkpbby2D275fGpNEYkVZr5F1":false,"2N2tBPEcafrhdQY8wA1FwD36zSVNxvFL7ui":false,"2NEfjAxHZiU3fTCjaH5Fi1cM7Gv5xMRXx75":false,"2MzoEgXFs5bLk98PGZAut9rWoPf5Vyig8f4":false,"2N2RFDg8Gi1ykFAYKTcedPyawPk1MDRpLkg":false,"2NFN8zUKEyiRMUgRB5xdWCffj5mdkuz2BiT":false,"2N8berkJ8CFaYWFETUdCvsoQP5FSgqsh3JV":false,"2N7QrPRT2tA8mmmz7vwit7p8NvQJR15GBwT":false,"2Mzu3nyZmfFZST6fpjwPPiYdUPYsmH25LL3":false,"2Mwg2Ex24RaE3oUqQq1cQWvmSwaXvrn3DYg":false,"2NCNM6FyrUz74gQQehtAJNAMhNhZgiyeTV1":false,"2MzSYKRb1H7PozDXokyKC8oEX62QpurhgTo":false,"2Mv5VQMZzRS7Eg43sehSSTK24WzkGrMkVPD":false,"2N71QdMU5FWFguEA3DkDGGPiGwYYDSRmaCC":false,"2N7pF8uuYV7n2U7XRSvr559Wq5FafFCzjqb":false,"2N5g4Ymod4uT4D7Z5tWA5aAWiFRVosCb6qE":false,"2N8gH2ufS2JgYeJZoo5u6nQkmNV7btWqwrS":false,"2N85gm9yXck7ULnFYPVi5VBgcGDo9G1fiQm":false,"2Mv3GFvVHEpNzc2cCcCcD8sBNDZrG7pUE6V":false,"2N9MuyrpQF568gtjEcE5T96c4cP52V2Jzgb":false,"2N7gEXhoXHuLsCZVp5rczrm2zK1S7V6HHc8":false,"2N5PwikEmQCEJevVm8ac7d18c2f3BbHf8RP":false,"2NBYkKHQDUb43KeR9UPwbPChe5W3u3wcm6y":false,"2N9hurkMm9L5xLyXM6BfsgyuAmtLcaYfPB3":false,"2N8aQZssrGrQpPAt5FN9XvYCQHpdDtHK5P5":false,"2Mv6SnrfXEdbhkyCUJ2zS4mgRSwGLDhEGo3":false,"2MsK6TA9ZPbuzcmWug7T3s1gBnwGu58DFs3":false,"2MwXQCNYbKeiS47AYMGKAqKvfTyowdDLAAr":false,"2N1GySTQwjyLVQxrjyRWd655ATM8Fs1niUa":false,"2N69RLhne4hGy9LPQm1iJENAykM32wHJKRs":false,"2N1WmJpQsWgmfuzGQ2zJAS3tA2Q9PwYrgar":false,"2MyEEXh7e15atpu5bzZvUD1zY7XjcymrzEu":false,"2Mtq6J2mM71MitnxY27jNAmnd2grfjZg5eo":false,"2NBtgZf7FKu4pKxRqoapHrpQ1tRNupgQ9ym":false,"2N5smkejWpBvUNUNScqNZ18MsdW6dDGPPAs":false,"2NFhddTvwbFpPZrkpcMTmXf8cMcszny1AJk":false,"2MuEjytuhTwwyMapvwCN1Cmw395EVrCyzsp":false,"2MxGM3mR1wnzoDVDY7AyXAfGCasrFz5pZMb":false,"2MvBuHNgsv6AkDWJqvN9TtJmSUEALU5SL9P":false,"2N1w26a3DCwUiisn5J2E9gDWaXzsTQd5qgE":false,"2NEEiLV5yCDetR3sfJrTvses6YkawEzuTqQ":false,"2Mw8qSA3fhMdGbj5p62oUMjVwLtTVmb9Rn8":false,"2MxrdgDwDNL2kzpjbkiRtMFxjuRsCU9sSNj":false,"2Mzyg9FLTuyVZBMazJe4EudbW3LRwsr36ea":false,"2MxmfYqh6aCszC9gPMVf9GKsTtxbT3AHzvb":false,"2MzKT1UurBuMzxeGLZM8bgRF7vRvgFeWhEq":false,"2MxzJdkUe4cBctTagugkQUe5qfoFQwvWHSj":false,"2N2ng3BXbFvbqBLHy5V5jJGouEYFEM3Dd7D":false,"2N9m2ABhSz6dvNrweigZqfJ2AxiqhavShBk":false,"2NFXpB7aXHngWt9A6HcjgAnZZpQvdnRPBMy":false,"2NB7Gg8QK8gLoZE5D4qtCPKVmZHzQEnj3MQ":false,"2NB9BAJ3g51ANyH15WLHEQ8gHJoizagPC39":false,"2N3dcpqM1atb9m9Vj2Gkk29ir6uGbEHFqTn":false,"2N5nPH2zs5aGADSiLR2DDpD6NQFQZmbKrqT":false,"2MsUrHe17VtL3BwQys2rfwKyJTAybwfkoF9":false,"2Mvp5tSD3DqA4FfihRBA7UitzK26no7w68M":false,"2N8EH8zTBwox5xqLDLJZmVDqb1776yPucvZ":false,"2NAsfM2WLozSLWx2nbvWKxPZeA1VXJ9Lamj":false,"2NEG8BcW1CdXLQSM362uCJzRY4UstW813Dk":false,"2N3mMiZ5zSaCEvFCTH46isTUG6FtNv1y8k1":false,"2NFQEaCzb6PdSnZu15oFy4Wa3HZH1fPu6FT":false,"2N1UnjtqaAiJxQ8BshwdNEzDZHc8NguUj2k":false,"2N45keLAoxpNj29oZG9GpZ3mwMHNbw2rAyc":false,"2MwRnQ5h32sTaE2NUuXbhGnrGbGuFa1vHy5":false,"2N71ytX1P56qYi7hCPomfXSCYxPr82GfMn9":false,"2NA8kBXTZ63vvmRV45hiec3J6obXE4MQWYL":false,"2MwcKJLiDPMaxJxvwpezNFWJ2aw5cjATDus":false,"2NDnpvdvsx9k1FxZpYU5dk6QTfpiLVJLSzG":false,"2NEtYiZFfNGKQtpKkDA23uDpjR7B73CEVbj":false,"2N5ERfxJHFF1SNZ56vmbzw2Ldspwm3KMKK9":false,"2NDWFm9vtRehHmXhFaMcqrMvkdoUAhQwpbB":false,"2N2thCcBvLEyVa7N8dsR3xXW9xMPqmfKAjx":false,"2NA2uCpKkSYuC9ycSFc7uNmDio3fMh9DsSK":false,"2N8u1PX9S5FimoeCEvQgFdtEEV2kRFamdJi":false,"2NATtNcURPuzFvxxfkPsezmVYFWVa5osNDz":false,"2N68EGCSvTwZs2zMRTde5oAoVWaF5RkaF5T":false,"2MzCafgec6eV9hDNkaMsuGtD1FfbMBbAL2x":false,"2N7PoLSqzCCZmkq7Cj7H2gc94XZMxth9kch":false,"2N1h3cfRVB2aChb6wvtjN8n4KijZnm2YcgZ":false,"2N4kcChZsHza4nzthTG77K5t9VChyAobwAq":false,"2NFeeaekausEiUVvTuntts5HfrjzSgCzDbJ":false,"2NDwnfXLLAk1GLpzCbcHE6novqySTAxHbgu":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["2N789HT3aXABch6TqknX2TCekPEUGLMfurn","2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT","2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"2MyHRvRGabh3rLgKTxm9w6ACwiismanVYcB","txId":"a83039456f422ffc901e5d90315092fc12ff2f29b9be5c0b82c053b80c3ef2aa","outputIndex":0,"script":"a914423b8c503dfb7307e75c8c11705e34e8fd95301b87","satoshis":1000000},{"address":"2N6PNXPhGCbuSH2vbKBAw3yV6Shx9xhVmdT","txId":"14bb019ede5cb6905dd66dbc439a4e2c3efd3db074b917a1ed49c3c8fcdea4b7","outputIndex":0,"script":"a914902416b2e65a859146788006b9ade2907d13d52187","satoshis":1000000},{"address":"2N789HT3aXABch6TqknX2TCekPEUGLMfurn","txId":"bca46b2625258e4f9e3c4c6efcbe0ec352be31cc0bb3ab2132323fa1ff686744","outputIndex":0,"script":"a914983aec29890d89c391f99a680e577a6449c6bc1287","satoshis":1000000}],"links":{"first":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":3,"total":3}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["a83039456f422ffc901e5d90315092fc12ff2f29b9be5c0b82c053b80c3ef2aa","14bb019ede5cb6905dd66dbc439a4e2c3efd3db074b917a1ed49c3c8fcdea4b7","bca46b2625258e4f9e3c4c6efcbe0ec352be31cc0bb3ab2132323fa1ff686744"]}',
			)
			.reply(
				200,
				'{"data":{"a83039456f422ffc901e5d90315092fc12ff2f29b9be5c0b82c053b80c3ef2aa":"01000000000101cca6aa63103c12b5ff497f09bd26ab961f47eb3f4915f6fc642a66331bda7b9f0100000000f0ffffff0340420f000000000017a914423b8c503dfb7307e75c8c11705e34e8fd95301b8783362000000000001600149d53915415905ad17559c38dbd2bc3249daebff40000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100aada0a8285081c24d2b0baa29a72c5b5459fc0541fe67da026dd1487345e10cf0220284cb85fbc9b428fc67857ffa5516a611dc2a28ad5eb2ebdbdf2ac995fbcbb8f01210312ad7bb0a18773e9ee7f0564ed1d0bb3972c93859af8c3a0a85d641bde8c617300000000","14bb019ede5cb6905dd66dbc439a4e2c3efd3db074b917a1ed49c3c8fcdea4b7":"01000000000101c4b7d50951c0b86aad444b16b29614a0f670f4ce668a6e8f3350f7430bf2040d0100000000f0ffffff0340420f000000000017a914902416b2e65a859146788006b9ade2907d13d521876976210000000000160014c96573cf0ce7bbc4ca6ed3cc18473e518fb064cb0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100d694c4c6cf8e0fe2c5167e1afe678c5cd6bd21523c9eac60fc1e142fd6ad4339022060ec6b22a3e63c2e304573fee65d442cf4bc54b3928a2b6478590652dd93b30401210273517c2fe055a0599a675b944648f3f374fb00671aafbddab44167e4160c6e2f00000000","bca46b2625258e4f9e3c4c6efcbe0ec352be31cc0bb3ab2132323fa1ff686744":"010000000001010b9e58235a6e17f8477fe8f5997562437f9ac5b9373a3e002af6ad34d5e4fa440100000000f0ffffff0340420f000000000017a914983aec29890d89c391f99a680e577a6449c6bc128757ee240000000000160014e000c454f7d2063d607ea6c7d26468014412a4bf0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100be12416e311ff604503520218e9bdffe88e7e34d7e12d1613fb4eb66bc3bc69302201aeb426d81dfe64b61a126ffd9821aa58f532968e1e5033301de9c947241240f012103374079bc604a31173d21ae2b7b8a694d07293ea66e0c2a8863aad83a9c420dcb00000000"}}',
			)
			.get("/api/fees")
			.reply(200, {
				data: {
					min: 0.00001074,
					avg: 0.00001074,
					max: 0.00180617,
				},
			})
			.persist();
	});

	it.skip("should generate a transfer transaction and sign it with ledger nano", async () => {
		let subject: TransactionService = configureMock(ledger.mariano.record);

		const signatory = new Signatories.Signatory(
			new Signatories.LedgerSignatory({
				signingKey: "doesn't matter",
				options: {
					bip49: {
						account: 0,
					},
				},
			}),
		);

		const result = await subject.transfer({
			data: {
				amount: 0.0001,
				to: "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn",
			},
			signatory,
		});

		expect(result.id()).toBe("4d6e178f4b1bc3c63ee167b15b277625c9c764a4fe19d9401c240358b1aa1195");
		expect(result.sender()).toBe("2N789HT3aXABch6TqknX2TCekPEUGLMfurn");
		expect(result.recipient()).toBe("tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		expect(result.amount().toNumber()).toBe(10_000);
		expect(result.fee().toNumber()).toBe(1_690);
		expect(result.timestamp()).toBeInstanceOf(DateTime);
		expect(result.toBroadcast()).toBe(
			"02000000000101aaf23e0cb853c0820b5cbeb9292fff12fc925031905d1e90fc2f426f453930a80000000017160014ad5d241c585fd25d3271875af67a077ba4cf7324ffffffff02a086010000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac47c070a000000000017a914d3cc481599f154c8cf7f9111681f7da53e54cd4b8702483045022100e83b0bf79dc14304fc1770aab7e50d1468578ab4d602c520d89ad36c97d067070220044704d8e6e5cf9d4d624b7cfc0bc20c8356ad716971bdb9f43ccbd99385048c012103987e47d69f9980f32363e40f50224fba7e22482459dc34d75e6f2353e9465d7600000000",
		);
	});
});

describe("bip84 wallet", () => {
	beforeAll(() => {
		nock.recorder.rec();
		nock("https://btc-test.payvo.com:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn","tb1qnyupre6mtmhzguffsucrz40sy2katy8vkt8zfu","tb1q4hel24zseq8xkdeq6vha54n6384kgeu95hyyv3","tb1q8g0j9eqtntqnh3tvsfvw74j546td7c5996wyn6","tb1qzu6m9fkjut4lazp3r0ng8vffckzjtw09yuynwr","tb1q5szhk63gy5kcjss5k9lczuvrrdkj0s47ys5d7n","tb1qft4e63naynzfv6cuq8fmzqw6vm5h0826y975zq","tb1qwm4e2thywjze204pyy3dl4q7367jl7dx5gemys","tb1qg83jwmwz30gkgxye58t98tkdplseurgjt3w8ef","tb1qvtu2n0wf4k2wxw347l9jyqcv3m3f9g2afz8jxd","tb1qjc3d58wx2k534xwhpxn7rn9ztfztvxpf47rtzr","tb1qn5yntgep5vwyvgaqpuadywnykaeahmujydhs0y","tb1qc3wayhruahwwu98j9pmqdv7zsktm78n79ekgz3","tb1q2qkcmydj76kcpf7k9mugmjufts5x7756gp6ktx","tb1q3vemskd4app577n47yrnrsz62zv6anz45r8j5m","tb1q8yyhk6ujynw32d6vg2xgdnln4c5t9k0vesuvrw","tb1q7mhg4pfudy02eegcjwnzey237sveggtdfldgh7","tb1qnq8teyxjvl856zlzd0grggt3r8j57q3yglmmm8","tb1q287042u5t4jxlwu0pjdal2ewnzm0k3urf595y0","tb1qrmem58ypay69y29lh4pfk3d5r4hsl3a4kgd7cd","tb1qpwum56tqxj3gs269f7tcy7sawrc2gs8ry8fpk4","tb1q5dk3crwgmqachcpdrl0d0hfs3ufu464nmkndvj","tb1q0247au5mcn8qf862z2c8aejjfxzwsu2m9gehlu","tb1qr095h3mc7zkkypx8y6fhtjmv0e7dl4nst9lcxv","tb1qlhkvctujxxfyxldvqsurqhxn854vqv7we2uqlu","tb1qzdvs64mt38t8nxrvwczt3wphfclkdgwhysmejk","tb1q5rrec57glqjq40l6uncswrkxg6yw23vdcr9mlz","tb1qafpwdv45cj3wuc2y0dz737rjagdx0vxu5rnmyv","tb1qtw845dktyuh9em4g6spf60l73kcazfa8tscxvm","tb1qzglhldv20xlwu9y9zc8ra0785nvrg0fljmzqlt","tb1q6srmkcmqjup2a6kelks7d8erlqqecz6uspwecw","tb1qgy49nf8tevqptsvzke4ld0w3aa73r7he6h77d6","tb1qthjufnk4k80mpzcj2ylmh87dkw5rzfvmfq4752","tb1q7aaapr73fzlyvt7350k2wy5kmnr9cgwedfejc3","tb1q2k29k05gtyukjnhmy2d3x07gg50rruz7xk2uwu","tb1qd63u72htfuazgdg2y95g93tytvjszt9882hhjd","tb1qfj2nxcu3gqtny9rftryxrcmr7yzgqejlpnl2sy","tb1qq3etva0ycdkvxln8q5uw836ccjmp28r6c0d2ws","tb1qtdmpktudjn6h22rp50pz8wqnp8pjc5582w6zuq","tb1qvnqkjml2td327hrwkc2p2ktxca5wfas8sx7rmm","tb1qtz6023w334akvfdp6mke7wu68f5mfdtuwwvp0w","tb1qka7lmpa08fryucx6jkwmjagu0u5ht99nqevz5g","tb1qxduwknmu3epxqtvptcxmg8dm7calf4rmeah0ce","tb1qxv4as5np4hswyzlgcm8jjg8sd7yhda2rvy4wv7","tb1qlfee29rd4r8pyq69mqwm8dx6ym5jgcfaj8yvlv","tb1qhak9pdn00lrctrjg43zkwk9gcmfwyh7ctru2lt","tb1q3ady3drv05qgex0ckldlmr7jua4mzh7g8ywpua","tb1qsaj63xdqla8tfydk7yufyk4qpg33xke9t0kpna","tb1q6prya27nf3aku6le939n3trvq9hm9vvggw3q29","tb1q9n8nzxv5pt64h3x20sdmngppd6smrczps8s8r5","tb1qvrgkjra3kzm6mzgddptzp8h6r2fv2nyu38qy36","tb1qjgkjr0wracp8hc3yl8w24eg7amktf3hlj05hcp","tb1qmah2zdm3eu6nlq2383h99sv08yux8qkmxc6qpc","tb1qc4nwmq367a48jmzvnfav6vme5nyxntyg5dkakk","tb1qtmhm86se75j2el84gdurz209v72g5w23c43u0m","tb1qwp8fupq52ez6z9gpzg4rg7rr46c5s4qjx59xq6","tb1qgtuhutm6msxq9rvd5k0uj7vet8rxc5l0sqxfut","tb1q205nkwd23h6j8mkagvvezl3av56gu3k08zm3rf","tb1qvgpjkryzkdc5r9clsqln32c6s0980cjs6p7csz","tb1qh0dsjewn3yn4v6s88k6ksvpfv0nuytwucvqf7j","tb1q4fsuxvf9se3x0yu9hkys7unmht82fxyyyqju36","tb1qc3cqsgyp6d5p00a777lruchlkqh294wy308hyw","tb1qyus7f3ef0wle99fu73tu3a52chz0y6m5td6vhk","tb1qnddsnsj5n3zgl6uy4kp9rgzpynfgy3gres6zt4","tb1qhvq9jdvt5nrf5hxhqgsa95227ty7g6wjk2lnv5","tb1q0p2tt0t7tz6nrekg2rt7y0dmn2yhkp7nclak6v","tb1q8nd8uaqlc83y3d3m2sm8qfpj23aegj8he88xrl","tb1qst0txydc5q9nkeyqv58346hrvtfxfquyw7dmsn","tb1qjyv67rdgfhav3cgzp3kun2qhr9jmajqhunce95","tb1q550t3wt8ddvytftfpvay0yywrjmjzkcsm6fuzd","tb1ql8r5596kq9hm4vzamvv9576zup6d7s2ccq3rg9","tb1q90jx45swj5f78wh5fg2jz7cexeppy7teanr4xv","tb1q0pp2647uekaj7ew3ymp07x684v838lgwh78swa","tb1qefgkdfdvwgzl9gctvudyuvxa8fd7rujuhg9pyl","tb1q8gxjp3yt7pr7h2yepw93pwasmfudv4ls3vff7t","tb1qga0xqgwndrvs87quycav3t520c3jn7s6pym5ek","tb1qszms32540n60kymp9542ar2r23y3df0q3j9zxp","tb1q23jkrgu0glt2ghdxlm233uy54jg97aegumxq9k","tb1qk6fxhqz592xe5ttqzdzdlxx8um0nmk3jtjz5uw","tb1qlvzq53sttx5556g02tmxjfr5647jspwnd7k33e","tb1q82n0h930vvewmnph9k7204re8g6k30x6cv5466","tb1qz5trkf0le9hmvvsclpl596e7c63v4at6e80sv5","tb1qk69dg527ykhtzg8zns6zhztasgzpxttn8gw9fe","tb1qmk780025qyjkm8ys8mv6mh6um6ddf55dc99yfy","tb1qg6p77jqp26y9qa35dxuhzl9ztf84ngd4wcqgxk","tb1qffgre788as3rs3nwdeu84d4j2nl790a846zdj7","tb1qfu5tdchmlmdhh7svjw6qs95p6net2kglvudqcr","tb1q924a4x6dqteaw0e4z62cvg9gqdsp7w2xpepww4","tb1qp0t256s06glsupjjf9znfg5v0k7aeuwtxhh99t","tb1qr05syarj38wxjdn65y0mdm0kyp82dpl6zdw7cl","tb1qzzknzfxatdhjus66fnd7pl4gpclv0r7ljju7kk","tb1q7hjfm7503vl9vkx9nell34du0tulstf0dh0ch8","tb1q7hjujwr6hpd90rw7w2ctf0ldtehgehjy6rxt25","tb1qeqllgy73sv6wh5fexdyvnjzrhv6mvnucatarjz","tb1qjwxn45a8mluhevzyvtavyp486k9mg7qh3777px","tb1qhvgr6va55xhqdg6sjwqn43j5vpt872nvp3asxn","tb1qfmzsm7ttqfmzw6um7vq3ndf6w2q8u2n9tj8lcw","tb1qnz6zh6j9uuxkfslr6qc3x8xau9djz8a438xhe2","tb1qmw2p34lzdp8cwyhqdjyj3qd232yymlyx0vcjqp","tb1qxxp206q44rkljappkdtp5zq8ed55ekax97zauh"]}',
			)
			.reply(
				200,
				'{"data":{"tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn":true,"tb1qnyupre6mtmhzguffsucrz40sy2katy8vkt8zfu":true,"tb1q4hel24zseq8xkdeq6vha54n6384kgeu95hyyv3":false,"tb1q8g0j9eqtntqnh3tvsfvw74j546td7c5996wyn6":true,"tb1qzu6m9fkjut4lazp3r0ng8vffckzjtw09yuynwr":false,"tb1q5szhk63gy5kcjss5k9lczuvrrdkj0s47ys5d7n":false,"tb1qft4e63naynzfv6cuq8fmzqw6vm5h0826y975zq":false,"tb1qwm4e2thywjze204pyy3dl4q7367jl7dx5gemys":false,"tb1qg83jwmwz30gkgxye58t98tkdplseurgjt3w8ef":false,"tb1qvtu2n0wf4k2wxw347l9jyqcv3m3f9g2afz8jxd":false,"tb1qjc3d58wx2k534xwhpxn7rn9ztfztvxpf47rtzr":false,"tb1qn5yntgep5vwyvgaqpuadywnykaeahmujydhs0y":false,"tb1qc3wayhruahwwu98j9pmqdv7zsktm78n79ekgz3":false,"tb1q2qkcmydj76kcpf7k9mugmjufts5x7756gp6ktx":false,"tb1q3vemskd4app577n47yrnrsz62zv6anz45r8j5m":false,"tb1q8yyhk6ujynw32d6vg2xgdnln4c5t9k0vesuvrw":false,"tb1q7mhg4pfudy02eegcjwnzey237sveggtdfldgh7":false,"tb1qnq8teyxjvl856zlzd0grggt3r8j57q3yglmmm8":false,"tb1q287042u5t4jxlwu0pjdal2ewnzm0k3urf595y0":false,"tb1qrmem58ypay69y29lh4pfk3d5r4hsl3a4kgd7cd":false,"tb1qpwum56tqxj3gs269f7tcy7sawrc2gs8ry8fpk4":false,"tb1q5dk3crwgmqachcpdrl0d0hfs3ufu464nmkndvj":false,"tb1q0247au5mcn8qf862z2c8aejjfxzwsu2m9gehlu":false,"tb1qr095h3mc7zkkypx8y6fhtjmv0e7dl4nst9lcxv":false,"tb1qlhkvctujxxfyxldvqsurqhxn854vqv7we2uqlu":false,"tb1qzdvs64mt38t8nxrvwczt3wphfclkdgwhysmejk":false,"tb1q5rrec57glqjq40l6uncswrkxg6yw23vdcr9mlz":false,"tb1qafpwdv45cj3wuc2y0dz737rjagdx0vxu5rnmyv":false,"tb1qtw845dktyuh9em4g6spf60l73kcazfa8tscxvm":false,"tb1qzglhldv20xlwu9y9zc8ra0785nvrg0fljmzqlt":false,"tb1q6srmkcmqjup2a6kelks7d8erlqqecz6uspwecw":false,"tb1qgy49nf8tevqptsvzke4ld0w3aa73r7he6h77d6":false,"tb1qthjufnk4k80mpzcj2ylmh87dkw5rzfvmfq4752":false,"tb1q7aaapr73fzlyvt7350k2wy5kmnr9cgwedfejc3":false,"tb1q2k29k05gtyukjnhmy2d3x07gg50rruz7xk2uwu":false,"tb1qd63u72htfuazgdg2y95g93tytvjszt9882hhjd":false,"tb1qfj2nxcu3gqtny9rftryxrcmr7yzgqejlpnl2sy":false,"tb1qq3etva0ycdkvxln8q5uw836ccjmp28r6c0d2ws":false,"tb1qtdmpktudjn6h22rp50pz8wqnp8pjc5582w6zuq":false,"tb1qvnqkjml2td327hrwkc2p2ktxca5wfas8sx7rmm":false,"tb1qtz6023w334akvfdp6mke7wu68f5mfdtuwwvp0w":false,"tb1qka7lmpa08fryucx6jkwmjagu0u5ht99nqevz5g":false,"tb1qxduwknmu3epxqtvptcxmg8dm7calf4rmeah0ce":false,"tb1qxv4as5np4hswyzlgcm8jjg8sd7yhda2rvy4wv7":false,"tb1qlfee29rd4r8pyq69mqwm8dx6ym5jgcfaj8yvlv":false,"tb1qhak9pdn00lrctrjg43zkwk9gcmfwyh7ctru2lt":false,"tb1q3ady3drv05qgex0ckldlmr7jua4mzh7g8ywpua":false,"tb1qsaj63xdqla8tfydk7yufyk4qpg33xke9t0kpna":false,"tb1q6prya27nf3aku6le939n3trvq9hm9vvggw3q29":false,"tb1q9n8nzxv5pt64h3x20sdmngppd6smrczps8s8r5":false,"tb1qvrgkjra3kzm6mzgddptzp8h6r2fv2nyu38qy36":false,"tb1qjgkjr0wracp8hc3yl8w24eg7amktf3hlj05hcp":false,"tb1qmah2zdm3eu6nlq2383h99sv08yux8qkmxc6qpc":false,"tb1qc4nwmq367a48jmzvnfav6vme5nyxntyg5dkakk":false,"tb1qtmhm86se75j2el84gdurz209v72g5w23c43u0m":false,"tb1qwp8fupq52ez6z9gpzg4rg7rr46c5s4qjx59xq6":false,"tb1qgtuhutm6msxq9rvd5k0uj7vet8rxc5l0sqxfut":false,"tb1q205nkwd23h6j8mkagvvezl3av56gu3k08zm3rf":false,"tb1qvgpjkryzkdc5r9clsqln32c6s0980cjs6p7csz":false,"tb1qh0dsjewn3yn4v6s88k6ksvpfv0nuytwucvqf7j":false,"tb1q4fsuxvf9se3x0yu9hkys7unmht82fxyyyqju36":false,"tb1qc3cqsgyp6d5p00a777lruchlkqh294wy308hyw":false,"tb1qyus7f3ef0wle99fu73tu3a52chz0y6m5td6vhk":false,"tb1qnddsnsj5n3zgl6uy4kp9rgzpynfgy3gres6zt4":false,"tb1qhvq9jdvt5nrf5hxhqgsa95227ty7g6wjk2lnv5":false,"tb1q0p2tt0t7tz6nrekg2rt7y0dmn2yhkp7nclak6v":false,"tb1q8nd8uaqlc83y3d3m2sm8qfpj23aegj8he88xrl":false,"tb1qst0txydc5q9nkeyqv58346hrvtfxfquyw7dmsn":false,"tb1qjyv67rdgfhav3cgzp3kun2qhr9jmajqhunce95":false,"tb1q550t3wt8ddvytftfpvay0yywrjmjzkcsm6fuzd":false,"tb1ql8r5596kq9hm4vzamvv9576zup6d7s2ccq3rg9":false,"tb1q90jx45swj5f78wh5fg2jz7cexeppy7teanr4xv":false,"tb1q0pp2647uekaj7ew3ymp07x684v838lgwh78swa":false,"tb1qefgkdfdvwgzl9gctvudyuvxa8fd7rujuhg9pyl":false,"tb1q8gxjp3yt7pr7h2yepw93pwasmfudv4ls3vff7t":false,"tb1qga0xqgwndrvs87quycav3t520c3jn7s6pym5ek":false,"tb1qszms32540n60kymp9542ar2r23y3df0q3j9zxp":false,"tb1q23jkrgu0glt2ghdxlm233uy54jg97aegumxq9k":false,"tb1qk6fxhqz592xe5ttqzdzdlxx8um0nmk3jtjz5uw":false,"tb1qlvzq53sttx5556g02tmxjfr5647jspwnd7k33e":false,"tb1q82n0h930vvewmnph9k7204re8g6k30x6cv5466":false,"tb1qz5trkf0le9hmvvsclpl596e7c63v4at6e80sv5":false,"tb1qk69dg527ykhtzg8zns6zhztasgzpxttn8gw9fe":false,"tb1qmk780025qyjkm8ys8mv6mh6um6ddf55dc99yfy":false,"tb1qg6p77jqp26y9qa35dxuhzl9ztf84ngd4wcqgxk":false,"tb1qffgre788as3rs3nwdeu84d4j2nl790a846zdj7":false,"tb1qfu5tdchmlmdhh7svjw6qs95p6net2kglvudqcr":false,"tb1q924a4x6dqteaw0e4z62cvg9gqdsp7w2xpepww4":false,"tb1qp0t256s06glsupjjf9znfg5v0k7aeuwtxhh99t":false,"tb1qr05syarj38wxjdn65y0mdm0kyp82dpl6zdw7cl":false,"tb1qzzknzfxatdhjus66fnd7pl4gpclv0r7ljju7kk":false,"tb1q7hjfm7503vl9vkx9nell34du0tulstf0dh0ch8":false,"tb1q7hjujwr6hpd90rw7w2ctf0ldtehgehjy6rxt25":false,"tb1qeqllgy73sv6wh5fexdyvnjzrhv6mvnucatarjz":false,"tb1qjwxn45a8mluhevzyvtavyp486k9mg7qh3777px":false,"tb1qhvgr6va55xhqdg6sjwqn43j5vpt872nvp3asxn":false,"tb1qfmzsm7ttqfmzw6um7vq3ndf6w2q8u2n9tj8lcw":false,"tb1qnz6zh6j9uuxkfslr6qc3x8xau9djz8a438xhe2":false,"tb1qmw2p34lzdp8cwyhqdjyj3qd232yymlyx0vcjqp":false,"tb1qxxp206q44rkljappkdtp5zq8ed55ekax97zauh":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["tb1qdggppphsk6fjz9uzyc03806th023du4k75pns8","tb1qh620ghv4prx8tk0k9g9q9mr4kwz6795u9a0eke","tb1qd3emae32a9kec0j62clpj2ssywppul87k8ck0u","tb1qjyqqt67cthz6xt43kjt4k0pt24nads6y53u57c","tb1q9vuljwpeenh65a06mfm3t3sccx467j0w3hejx9","tb1qqx4643eev7xkp82c39alpcfczcc75vzcjxym0s","tb1q2g2qdnwxjecdvsq3z8ycmz3uh4enpdhc03cfqc","tb1qk2vv5dakwkq7h0rqsukn4xe389kct0t9e6qclj","tb1q06lfdjzxyw3tp83a80qwlhxjnegmt0pj7auq95","tb1qhselk3ee0gp2r32xh49xxr7n3ljnmpy2rt9cde","tb1qegpu8x4uexsyty6xjjwjdunvgunvenjtetk5pa","tb1q8zyswkhelgad9m0kqk3kj4uf3zcrz5fzrl7a5c","tb1q8hhajvnm6mzt2ectk5ccx3kp28pykj2mncqx8f","tb1qgmt60ymavumqmcj69zcfznpjfjxsuvlrycv39k","tb1qhjd0rwlnee5kewd0wm0xl8n8pj7uvtwjnccrvw","tb1q6xquyat34fjkv4nc2r2amuq7kfueflh7yftucy","tb1q6h0zl6q2p5h8kh82387zjqpp50654qzprt8agr","tb1qgvsh9tlqsn6hfefwfcczee86kmk8h54w0eu9dg","tb1q6h8n9h392kgpgyrvn6vrm2qaxj3a7acpx7y82t","tb1q6esh8h7aepj45rmm4le5zalg243ul3nc77w450","tb1q64rj9xnz2p08vvfpd533nqhlgj8s2lkd22xf9u","tb1qex9z6nzrva0z3eqa9r5uqf6tc3f838genelral","tb1qp5hequyhtxmcat0s5tl6ytvtvn2xlejwu0q533","tb1q2tz73m2lqxsy7cgcxzf0eacadxulpjnusqynnm","tb1qet23glj4asrsxs9c5qvecz4c3nmwu2fn2dyg76","tb1qpql0rl9xssg2dyec6mkans4dc30qsryur80u5t","tb1qtrd8p7py89qxfekhadze4uw06sy3gnf9um4cep","tb1qa9sfzhwkx2k76yznefx0cv25ez28a9zwlfqgc3","tb1qeyxufvjz6qdam78zf40l5l84pjkrcrgqcp0nv7","tb1qqy7663rm2t9y8esjtpjgtds2ufcknwc60mz3n6","tb1qrdv75a8wcfrqnnak56f0uwn90j35yu8h5msv5h","tb1q7qumstk7t8fdw5zl0ye4nk24qqw5u4qntmd34x","tb1qwpnjhnudw4v5wue4c8q4l4detaqtzyfyvpg60m","tb1qte8vp2cek947a6xmuny72sfprxhe7mff8kgr8d","tb1q9nxmat6af5ldrrsfv9c06x2lvksag7hqz4nvxr","tb1q30f2kypq3gfyzursyj32aa2vq8lsr23xcj6h34","tb1qk77wm73sfds2fv4wheqx3wzu9j0xxccplpqse7","tb1qwrgwautleh6qlptjks83nc4888qtpjpvecuxxl","tb1qm4zlg80z245umu3ptxg7qc7rrpep97h27jy98e","tb1q03dzpyq75zq6rmtzzq9jwuyyzdn7yrfrq5p6k3","tb1qtd7rd06g9s9pzjhjxztjm2l3kzugrx46nhxxa0","tb1qyvpzl8kevsgvl96cqjdsr8mp823y7uc4q3x84l","tb1qdjs0l5hq8hzddmnp9e2q5l2tqw6h2w6t32xwg9","tb1q07yw2adq4m5qghdrs8l62y9w2temj4kr3qplhe","tb1qqft6qnfvyafap5n76ejjkmvet7enjpmzrfrujw","tb1q4s988w2xeapshf23xfk5r6xpm966dllu6ncmj9","tb1qaejqhwzppqrhja4r943mvhm6nc8wtdv88h4cjq","tb1q8z0fhpz9zg240jyyq3ydzp4emsv4ud3t85pcuw","tb1qttj3736ys5eeee96555ep3ng6x60uvpymv58jr","tb1q57tn30auaq60k8lsgeuthhfqvn23qfn80apzzk","tb1qpc9lgn8z8yxnttwxqhwsqm4v6x847u0xvdrant","tb1q3f00n24k0sj5v74uzgnr48vn2xh4wq787xcgw2","tb1quz7yrk5tdn08pdwgx03v0a5pnznsluj7mp322v","tb1qnkfxws75rhtcln5uqy3p2xnnuvxm9gyn86hlun","tb1q8zwdqr0vjavrzqjlhvetmff22xr62ftwp36k0a","tb1qmxclylwaeh78kngg6zwf90men7fgp837f5ghpl","tb1qhvjguqhe9urmugrja24k64kpmjuqgy3yc7gt40","tb1q8t44q5gevd43aa2nsgkuh6ppt4a7fjcay0paww","tb1qzqem7glkkwhrzw2ur6ju0azqlrxhhqq95dhcy6","tb1qzhxrm35vdkfz32dtah5qek8fw72fnz2s630k4y","tb1qnrk5fsylvu6hdcsgkvv02cpher5wcxxce6x45s","tb1q24ft7syv9x0ytj6vg26gqpjkrn3tfkfwcnxfzg","tb1q05kv9kg0zdsl8t0andchwqm7tq7ne7jmvvk4y8","tb1qc9y972kkwayh6dqgevhyncpacxlmd4e3x5hds3","tb1qnw0pg88ss8450zqqsdthvlqqx4vvssxz057fpp","tb1qeclgv3gcfdkulmderue9xkylx2rdjeefqz7za5","tb1q56j6sljfnuqjpsarp5zq9htx3wapmayuc52al4","tb1qm2ghhu2uth9vwajs6pkf5fvp3tclpm360lqj9e","tb1qnjqzhtr9rytgvjpc4t7zrwk24x08k05m5x2nld","tb1qx66uuvpd80pav4qj30yu9kz0xues87363d4jd0","tb1q5ezam3fzet4ytkw36zv3gcu57fztah2psns9vd","tb1qlul4m387pmj4r3y22jyxc40z53fw4356ya9vzu","tb1qgd3rd0nq6d0qgyv22mqm3rr4gz9zt46jpdw59f","tb1qnd9qpzcd0vxkrky5rmj8l79hlm9eutu92cxe64","tb1qx2642d4heaey8nd48c3dftdl0865uvx3074z6e","tb1qr8su2cdaxyqe4z30zlrrmy8nhct6uqdnl3hrr3","tb1qnxa6wupgdxz5nvh97u80vct2e5rc9csywwvsgr","tb1qrcfqatvx7m9n0z2pfx3ljkjspmlm73k9xnuqkx","tb1q2z6gtphhxy62aasm6v2n2slu25yj5f9vq6jrwm","tb1qns39633aurl2a6nvtqfef6z6x9c7vgwa3h0fr7","tb1qpw0pgq8f4zy75frwsrhw3zr9xhzq4f44kz4656","tb1q82rptdkp4xkh7ajw8l6aspu6u7hwweeclxjmfa","tb1q0kf6sr22rtlmgy5y8dj6202nv80ua7gl6zccpc","tb1qwryfq87zsdtg07xjycyr2xhwcwh6gr386e276s","tb1qxhj7wlw82el0dv8sg5csm63ryc7lhwv5l28e5m","tb1q6xhh3fnkn4t2ye953ma5g7jh40xts5tqm4nny7","tb1qhph8yvxz8r90yq5t6s3wr50jch6zuuw8gnreg3","tb1qey0e5cs5tm7hclc0r288eweq0tpwpn0458kc3x","tb1qgcfppyr45jks5xe6p3pljf7uf0kg65qn2v4tsj","tb1qmlslf93w87ulamwvwvgqfhtlue772k9emncxee","tb1q8dz8mr9wes6wqd43h3k2zy3y38rwl0jnunqrnd","tb1qqmeap0eqwdh7jtxpypp2twjwe94w96mrxqnj89","tb1qdwagxrejud386lhyz73wzd8meq9k9p6r2nkvu4","tb1q38uef9388sfhhd2gvplfn0fm99cpp0zxje0rps","tb1q7vd9ty2svwf7yu8tyl497eu0k23hnfneq7akdt","tb1qwq6zg7lky0w0uwjg9ucth9wl7vlpuge3d2yaf4","tb1qj4kev9lydakdwnrkx5whu8ga3phadpaey6hnx0","tb1q6dv007hmrfer7nqqpgzxyt2awr0j0r62twmh6p","tb1qfryty6ckzf7c6vlx3hu6mav4uky7x6mtwgtkmf","tb1qpzcu5svaghwrgl4u8peuk0xpt6377v24vjyqsu"]}',
			)
			.reply(
				200,
				'{"data":{"tb1qdggppphsk6fjz9uzyc03806th023du4k75pns8":false,"tb1qh620ghv4prx8tk0k9g9q9mr4kwz6795u9a0eke":false,"tb1qd3emae32a9kec0j62clpj2ssywppul87k8ck0u":false,"tb1qjyqqt67cthz6xt43kjt4k0pt24nads6y53u57c":false,"tb1q9vuljwpeenh65a06mfm3t3sccx467j0w3hejx9":false,"tb1qqx4643eev7xkp82c39alpcfczcc75vzcjxym0s":false,"tb1q2g2qdnwxjecdvsq3z8ycmz3uh4enpdhc03cfqc":false,"tb1qk2vv5dakwkq7h0rqsukn4xe389kct0t9e6qclj":false,"tb1q06lfdjzxyw3tp83a80qwlhxjnegmt0pj7auq95":false,"tb1qhselk3ee0gp2r32xh49xxr7n3ljnmpy2rt9cde":false,"tb1qegpu8x4uexsyty6xjjwjdunvgunvenjtetk5pa":false,"tb1q8zyswkhelgad9m0kqk3kj4uf3zcrz5fzrl7a5c":false,"tb1q8hhajvnm6mzt2ectk5ccx3kp28pykj2mncqx8f":false,"tb1qgmt60ymavumqmcj69zcfznpjfjxsuvlrycv39k":false,"tb1qhjd0rwlnee5kewd0wm0xl8n8pj7uvtwjnccrvw":false,"tb1q6xquyat34fjkv4nc2r2amuq7kfueflh7yftucy":false,"tb1q6h0zl6q2p5h8kh82387zjqpp50654qzprt8agr":false,"tb1qgvsh9tlqsn6hfefwfcczee86kmk8h54w0eu9dg":false,"tb1q6h8n9h392kgpgyrvn6vrm2qaxj3a7acpx7y82t":false,"tb1q6esh8h7aepj45rmm4le5zalg243ul3nc77w450":false,"tb1q64rj9xnz2p08vvfpd533nqhlgj8s2lkd22xf9u":false,"tb1qex9z6nzrva0z3eqa9r5uqf6tc3f838genelral":false,"tb1qp5hequyhtxmcat0s5tl6ytvtvn2xlejwu0q533":false,"tb1q2tz73m2lqxsy7cgcxzf0eacadxulpjnusqynnm":false,"tb1qet23glj4asrsxs9c5qvecz4c3nmwu2fn2dyg76":false,"tb1qpql0rl9xssg2dyec6mkans4dc30qsryur80u5t":false,"tb1qtrd8p7py89qxfekhadze4uw06sy3gnf9um4cep":false,"tb1qa9sfzhwkx2k76yznefx0cv25ez28a9zwlfqgc3":false,"tb1qeyxufvjz6qdam78zf40l5l84pjkrcrgqcp0nv7":false,"tb1qqy7663rm2t9y8esjtpjgtds2ufcknwc60mz3n6":false,"tb1qrdv75a8wcfrqnnak56f0uwn90j35yu8h5msv5h":false,"tb1q7qumstk7t8fdw5zl0ye4nk24qqw5u4qntmd34x":false,"tb1qwpnjhnudw4v5wue4c8q4l4detaqtzyfyvpg60m":false,"tb1qte8vp2cek947a6xmuny72sfprxhe7mff8kgr8d":false,"tb1q9nxmat6af5ldrrsfv9c06x2lvksag7hqz4nvxr":false,"tb1q30f2kypq3gfyzursyj32aa2vq8lsr23xcj6h34":false,"tb1qk77wm73sfds2fv4wheqx3wzu9j0xxccplpqse7":false,"tb1qwrgwautleh6qlptjks83nc4888qtpjpvecuxxl":false,"tb1qm4zlg80z245umu3ptxg7qc7rrpep97h27jy98e":false,"tb1q03dzpyq75zq6rmtzzq9jwuyyzdn7yrfrq5p6k3":false,"tb1qtd7rd06g9s9pzjhjxztjm2l3kzugrx46nhxxa0":false,"tb1qyvpzl8kevsgvl96cqjdsr8mp823y7uc4q3x84l":false,"tb1qdjs0l5hq8hzddmnp9e2q5l2tqw6h2w6t32xwg9":false,"tb1q07yw2adq4m5qghdrs8l62y9w2temj4kr3qplhe":false,"tb1qqft6qnfvyafap5n76ejjkmvet7enjpmzrfrujw":false,"tb1q4s988w2xeapshf23xfk5r6xpm966dllu6ncmj9":false,"tb1qaejqhwzppqrhja4r943mvhm6nc8wtdv88h4cjq":false,"tb1q8z0fhpz9zg240jyyq3ydzp4emsv4ud3t85pcuw":false,"tb1qttj3736ys5eeee96555ep3ng6x60uvpymv58jr":false,"tb1q57tn30auaq60k8lsgeuthhfqvn23qfn80apzzk":false,"tb1qpc9lgn8z8yxnttwxqhwsqm4v6x847u0xvdrant":false,"tb1q3f00n24k0sj5v74uzgnr48vn2xh4wq787xcgw2":false,"tb1quz7yrk5tdn08pdwgx03v0a5pnznsluj7mp322v":false,"tb1qnkfxws75rhtcln5uqy3p2xnnuvxm9gyn86hlun":false,"tb1q8zwdqr0vjavrzqjlhvetmff22xr62ftwp36k0a":false,"tb1qmxclylwaeh78kngg6zwf90men7fgp837f5ghpl":false,"tb1qhvjguqhe9urmugrja24k64kpmjuqgy3yc7gt40":false,"tb1q8t44q5gevd43aa2nsgkuh6ppt4a7fjcay0paww":false,"tb1qzqem7glkkwhrzw2ur6ju0azqlrxhhqq95dhcy6":false,"tb1qzhxrm35vdkfz32dtah5qek8fw72fnz2s630k4y":false,"tb1qnrk5fsylvu6hdcsgkvv02cpher5wcxxce6x45s":false,"tb1q24ft7syv9x0ytj6vg26gqpjkrn3tfkfwcnxfzg":false,"tb1q05kv9kg0zdsl8t0andchwqm7tq7ne7jmvvk4y8":false,"tb1qc9y972kkwayh6dqgevhyncpacxlmd4e3x5hds3":false,"tb1qnw0pg88ss8450zqqsdthvlqqx4vvssxz057fpp":false,"tb1qeclgv3gcfdkulmderue9xkylx2rdjeefqz7za5":false,"tb1q56j6sljfnuqjpsarp5zq9htx3wapmayuc52al4":false,"tb1qm2ghhu2uth9vwajs6pkf5fvp3tclpm360lqj9e":false,"tb1qnjqzhtr9rytgvjpc4t7zrwk24x08k05m5x2nld":false,"tb1qx66uuvpd80pav4qj30yu9kz0xues87363d4jd0":false,"tb1q5ezam3fzet4ytkw36zv3gcu57fztah2psns9vd":false,"tb1qlul4m387pmj4r3y22jyxc40z53fw4356ya9vzu":false,"tb1qgd3rd0nq6d0qgyv22mqm3rr4gz9zt46jpdw59f":false,"tb1qnd9qpzcd0vxkrky5rmj8l79hlm9eutu92cxe64":false,"tb1qx2642d4heaey8nd48c3dftdl0865uvx3074z6e":false,"tb1qr8su2cdaxyqe4z30zlrrmy8nhct6uqdnl3hrr3":false,"tb1qnxa6wupgdxz5nvh97u80vct2e5rc9csywwvsgr":false,"tb1qrcfqatvx7m9n0z2pfx3ljkjspmlm73k9xnuqkx":false,"tb1q2z6gtphhxy62aasm6v2n2slu25yj5f9vq6jrwm":false,"tb1qns39633aurl2a6nvtqfef6z6x9c7vgwa3h0fr7":false,"tb1qpw0pgq8f4zy75frwsrhw3zr9xhzq4f44kz4656":false,"tb1q82rptdkp4xkh7ajw8l6aspu6u7hwweeclxjmfa":false,"tb1q0kf6sr22rtlmgy5y8dj6202nv80ua7gl6zccpc":false,"tb1qwryfq87zsdtg07xjycyr2xhwcwh6gr386e276s":false,"tb1qxhj7wlw82el0dv8sg5csm63ryc7lhwv5l28e5m":false,"tb1q6xhh3fnkn4t2ye953ma5g7jh40xts5tqm4nny7":false,"tb1qhph8yvxz8r90yq5t6s3wr50jch6zuuw8gnreg3":false,"tb1qey0e5cs5tm7hclc0r288eweq0tpwpn0458kc3x":false,"tb1qgcfppyr45jks5xe6p3pljf7uf0kg65qn2v4tsj":false,"tb1qmlslf93w87ulamwvwvgqfhtlue772k9emncxee":false,"tb1q8dz8mr9wes6wqd43h3k2zy3y38rwl0jnunqrnd":false,"tb1qqmeap0eqwdh7jtxpypp2twjwe94w96mrxqnj89":false,"tb1qdwagxrejud386lhyz73wzd8meq9k9p6r2nkvu4":false,"tb1q38uef9388sfhhd2gvplfn0fm99cpp0zxje0rps":false,"tb1q7vd9ty2svwf7yu8tyl497eu0k23hnfneq7akdt":false,"tb1qwq6zg7lky0w0uwjg9ucth9wl7vlpuge3d2yaf4":false,"tb1qj4kev9lydakdwnrkx5whu8ga3phadpaey6hnx0":false,"tb1q6dv007hmrfer7nqqpgzxyt2awr0j0r62twmh6p":false,"tb1qfryty6ckzf7c6vlx3hu6mav4uky7x6mtwgtkmf":false,"tb1qpzcu5svaghwrgl4u8peuk0xpt6377v24vjyqsu":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn","tb1qnyupre6mtmhzguffsucrz40sy2katy8vkt8zfu","tb1q8g0j9eqtntqnh3tvsfvw74j546td7c5996wyn6"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn","txId":"2f718af139fa92be03803a62bf79087b0f366c3eeb0ed797fe261a482c79c694","outputIndex":0,"script":"0014f3e9df76d5ccbfb4e29c047a942815a32a477ac4","satoshis":100000},{"address":"tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn","txId":"912ff5cac9d386fad9ad59a7661ed713990a8db12a801b34a3e8de0f27057371","outputIndex":0,"script":"0014f3e9df76d5ccbfb4e29c047a942815a32a477ac4","satoshis":100000},{"address":"tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn","txId":"2d4b716451be03935885ec5fc99afb2b2cedb6656d9776e0342a643767430535","outputIndex":0,"script":"0014f3e9df76d5ccbfb4e29c047a942815a32a477ac4","satoshis":1000000},{"address":"tb1q8g0j9eqtntqnh3tvsfvw74j546td7c5996wyn6","txId":"07b2af052139176381d7245b78be65bcb68ee3f3d0d624fe738cc2e6d04be04b","outputIndex":0,"script":"00143a1f22e40b9ac13bc56c8258ef5654ae96df6285","satoshis":1000000},{"address":"tb1qnyupre6mtmhzguffsucrz40sy2katy8vkt8zfu","txId":"c84ecdca84fd746859fa51519e12ddc8d475e66787b55d74a966a1601a1c7008","outputIndex":0,"script":"0014993811e75b5eee24712987303155f022add590ec","satoshis":1000000}],"links":{"first":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/btc-test.payvo.com\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":5,"total":5}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["2f718af139fa92be03803a62bf79087b0f366c3eeb0ed797fe261a482c79c694","912ff5cac9d386fad9ad59a7661ed713990a8db12a801b34a3e8de0f27057371","2d4b716451be03935885ec5fc99afb2b2cedb6656d9776e0342a643767430535","07b2af052139176381d7245b78be65bcb68ee3f3d0d624fe738cc2e6d04be04b","c84ecdca84fd746859fa51519e12ddc8d475e66787b55d74a966a1601a1c7008"]}',
			)
			.reply(
				200,
				'{"data":{"2f718af139fa92be03803a62bf79087b0f366c3eeb0ed797fe261a482c79c694":"02000000000101aaf23e0cb853c0820b5cbeb9292fff12fc925031905d1e90fc2f426f453930a80000000017160014ad5d241c585fd25d3271875af67a077ba4cf7324ffffffff02a086010000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac4128b0d000000000017a914983aec29890d89c391f99a680e577a6449c6bc12870247304402202c36d500cdc51bb23749b1c4137cadde4540ad30f3c0c30f2e9999dbe4bda51102204e4cabb31e37e73bf0b76c08b2c58119933ce362b2b674b968127605aef41e33012103987e47d69f9980f32363e40f50224fba7e22482459dc34d75e6f2353e9465d7600000000","912ff5cac9d386fad9ad59a7661ed713990a8db12a801b34a3e8de0f27057371":"0200000001e6eb100bcd16a7347f3405b804b372726e761c2e13f0557aee1ade1a796a3394000000006b483045022100a731e9b6c1092cfc20532c3f6b1091816fcd314f5d4332eb4b8a98a59ef07e3a02201654fdcf9bb653f8af9e8ae6de1ede2654a92f6779f18846a3dedaadf8994804012102692389c4f8121468f18e779b66253b7eb9495fe215dc1edf0e11cbaeff3f67c8ffffffff02a086010000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac4128b0d00000000001976a914a08a89d81d7a9be55a18d12f9808dcd572e2cd1c88ac00000000","2d4b716451be03935885ec5fc99afb2b2cedb6656d9776e0342a643767430535":"010000000001014bd579923bb0b270d72b0f9ee7f91eca0691002019fa95c69e518b5aded3b39f0100000000f0ffffff0340420f0000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac4e5df2400000000001600142d0de4d1eb44019d58cd4145e1c5d0533b33d31b0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d02483045022100bfdc818acb34732ec6dd27d2403145933cef6847e3b748b3e20d5e44dd292d060220160ce62e5573d4a54a70fad2b9819b75ebc0ad684400b9659f8685850883362a012103fc256844336cdd7425a56fbcf583b18ff6ef58f890080625cc43cd1c3fd8618900000000","07b2af052139176381d7245b78be65bcb68ee3f3d0d624fe738cc2e6d04be04b":"0100000000010106dc2bdf045b928247e50f29b8985e039d0b4b6748c6cb3d28c7823f6ffbcde50100000000f0ffffff0340420f00000000001600143a1f22e40b9ac13bc56c8258ef5654ae96df6285ad2d220000000000160014cdc110e962030f8ba6f9d4d913e9e2d1035ca96f0000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d0247304402204cf5ea8dc821836d3d210d8508c50a1c4a34205b33debd29114d0493845aa6720220345743c9e8ed48a7b9341e64a309e09e4ce12206e6a0c801d189f231aacb903e0121035fbd76bdf5ee796a5c78613c54d082617a36d41d736e73a0f12d83f957825e3400000000","c84ecdca84fd746859fa51519e12ddc8d475e66787b55d74a966a1601a1c7008":"01000000000101ad2d6e4caaf9becb41b45c5540ab2188bd316867c42755b3b096c94e16d7b77a0100000000f0ffffff0340420f0000000000160014993811e75b5eee24712987303155f022add590ecb0542300000000001600147e3a64f855b18cfe78a372a3669bdf4d9031be380000000000000000196a1768747470733a2f2f746274632e6269746170732e636f6d0247304402203e0a47686a2c9593aa8ae9c49ddc845e839961edfbd6e033c78c177f04a94e980220078eddaaadd0bca65eb1eb0439f80bf7605c6b7f04251c6bca928a376c4c91380121020dc805b6cbc9d0b975bdd4ddaa69227801cd74cef9913845bbaa93e2cef30a4f00000000"}}',
			)
			.get("/api/fees")
			.reply(200, {
				data: {
					min: 0.00001074,
					avg: 0.00001074,
					max: 0.00180617,
				},
			})
			.persist();
	});

	it.skip("should generate and sign a transfer transaction", async () => {
		let subject: TransactionService = configureMock(ledger.mariano.record);

		const signatory = new Signatories.Signatory(
			new Signatories.LedgerSignatory({
				signingKey: "doesn't matter",
				options: {
					bip84: {
						account: 0,
					},
				},
			}),
		);

		const result = await subject.transfer({
			data: {
				amount: 0.0001,
				to: "mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6",
			},
			signatory,
		});

		expect(result.id()).toBe("5f8d73a74d08d04739a633cd1cb22f11f1f235bf6a2256a0d337e9c87d900d22");
		expect(result.sender()).toBe("tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		expect(result.recipient()).toBe("mv9pNZs3d65sjL68JueZDphWe3vHNmmSn6");
		expect(result.amount().toNumber()).toBe(10_000);
		expect(result.fee().toNumber()).toBe(1_690);
		expect(result.timestamp()).toBeInstanceOf(DateTime);
		expect(result.toBroadcast()).toBe(
			"020000000001013505436737642a34e076976d65b6ed2c2bfb9ac95fec85589303be5164714b2d0000000000ffffffff02a0860100000000001976a914a08a89d81d7a9be55a18d12f9808dcd572e2cd1c88ac7c070a00000000001600146a101086f0b693211782261f13bf4bbbd516f2b6024730440220031463623bf6c454601f8d3239c74802bd24409903d4c78a351df77fa2a94b6502207d9b509ba050a6fad10e30cb79ab67813c0b0ffc5c6051e6c3a094c0ee6f33320121023604afdf13cda171630e1e4dddade91d5984d54f1b7dbdf06ed7cd1977fe7ef400000000",
		);
	});
});
